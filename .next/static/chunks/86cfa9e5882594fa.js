(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72169,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566);function r(){let e=(0,s.useSearchParams)(),r=(0,s.useRouter)(),l=e?.get("ingestionId")||null,d=e?.get("url")||null,[n,i]=(0,a.useState)(d||""),[o,c]=(0,a.useState)(null),[x,p]=(0,a.useState)(!1),[m,b]=(0,a.useState)(!1),[h,u]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),[f,j]=(0,a.useState)(""),[k,w]=(0,a.useState)("idle"),[N,v]=(0,a.useState)(!1),[S,_]=(0,a.useState)(null),[I,O]=(0,a.useState)(null),[P,R]=(0,a.useState)(!1),[T]=(0,a.useState)(d||""),E=(0,a.useCallback)(async(e,t=()=>!1)=>{p(!0),u(null),y("Refreshing ingestion");try{let a=await fetch(`/api/v1/ingest/${encodeURIComponent(e)}`),s=await a.json();if(!a.ok)throw Error(s?.error?.message||s?.error||`Ingest fetch failed: ${a.status}`);t()||(c(s?.data??s),y("Ingestion ready"))}catch(e){t()||(u(String(e?.message||e)),y(null))}finally{t()||p(!1)}},[]);async function C(e,t=!0){if(!m){b(!0),u(null),R(!1),y("Generating AvidiaSEO");try{if(t){let t=await a(!0);if(t.ok){R(!1);let a=t.json?.seo_payload??t.json?.seoPayload??null,s=t.json?.description_html??t.json?.descriptionHtml??null,l=t.json?.features??null;(a||s||l)&&(c(e=>({...e||{},seo_payload:a??e?.seo_payload??null,description_html:s??e?.description_html??null,features:l??e?.features??null})),y("SEO persisted to Supabase")),await E(e),r.push(`/dashboard/seo?ingestionId=${encodeURIComponent(e)}`);return}let s=t.json?.error?.code??"";if(401===t.status||"UNAUTHORIZED_TO_PERSIST"===s||403===t.status){let e=await a(!1);if(e.ok){R(!0);let t=e.json,a={...o||{},seo_payload:t?.seoPayload??t?.seo_payload??t,description_html:t?.descriptionHtml??t?.description_html??t?.descriptionHtml??t?.description_html,_debug:t?._debug??null};c(a),u("Preview generated. Sign in to persist SEO for this ingestion."),y("Preview SEO ready");return}u(e.json?.error?.message??`Preview failed: ${e.status}`),y(null);return}u(t.json?.error?.message??`SEO generation failed: ${t.status}`),y(null);return}let s=await a(!1);if(s.ok){R(!0);let e=s.json,t={...o||{},seo_payload:e?.seoPayload??e?.seo_payload??e,description_html:e?.descriptionHtml??e?.description_html??e};c(t),y("Preview SEO ready")}else u(s.json?.error?.message??`SEO preview failed: ${s.status}`),y(null)}catch(e){u(String(e?.message||e)),y(null)}finally{b(!1)}}async function a(t){try{let a=await fetch("/api/v1/seo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingestionId:e,persist:t})}),s=await a.json().catch(()=>null);return{status:a.status,ok:a.ok,json:s,rawStatus:a.status}}catch(e){return{status:0,ok:!1,json:null,error:String(e)}}}}async function L(e,t=12e4,a=3e3){let s=Date.now();for(O(`polling job ${e}`),y("Scraping & normalizing");Date.now()-s<t;){try{let t=await fetch(`/api/v1/ingest/job/${encodeURIComponent(e)}`);if(200===t.status){let e=await t.json();return O(`completed: ingestionId=${e.ingestionId}`),y("Ingestion completed"),e}let a=Math.floor((Date.now()-s)/1e3);O(`waiting... ${a}s`)}catch(e){console.warn("pollForIngestion error",e),O(`error polling: ${String(e)}`),y(null)}await new Promise(e=>setTimeout(e,a))}throw O("timeout"),y(null),Error("Ingestion did not complete within timeout")}async function U(e){if(!m){if(!e)return void u("Please enter a URL");b(!0),u(null),_(null),O(null),y("Submitting ingestion");try{let t,a=await fetch("/api/v1/ingest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,persist:!0,options:{includeSeo:!0}})}),s=await a.json().catch(()=>null);if(console.debug("POST /api/v1/ingest response:",a.status,s),_({status:a.status,body:s}),y("Ingestion accepted; waiting for callback"),!a.ok)return void u(s?.error?.message||s?.error||`Ingest failed: ${a.status}`);let l=s?.ingestionId??s?.id??s?.data?.id??s?.data?.ingestionId??null;if(l){if(r.push(`/dashboard/seo?ingestionId=${encodeURIComponent(l)}`),s?.status!=="accepted"&&202!==a.status)return void await C(l,!0);{let e=s?.jobId??s?.ingestionId??l;try{let t=await L(e,12e4,3e3),a=t?.ingestionId??l;r.push(`/dashboard/seo?ingestionId=${encodeURIComponent(a)}`),await C(a,!0);return}catch(e){u(String(e?.message||e));return}}}let d=s?.jobId??s?.job?.id??null;if(!d)return void u("Ingest did not return an ingestionId or jobId. See debug pane.");try{t=await L(d,12e4,3e3)}catch(e){u(String(e?.message||e));return}let n=t?.ingestionId??t?.id??null;if(!n)return void u("Polling returned no ingestionId. See debug pane.");r.push(`/dashboard/seo?ingestionId=${encodeURIComponent(n)}`),await C(n,!0)}catch(e){u(String(e?.message||e))}finally{b(!1),O(null)}}}async function $(){u(null);let e=T&&n===T;l&&e?await C(l,!0):(c(null),R(!1),_(null),O(null),y(null),await U(n))}(0,a.useEffect)(()=>{if(!l)return;let e=!1;return y("Loading ingestion"),E(l,()=>e),()=>{e=!0}},[E,l]);let A=(0,a.useMemo)(()=>o?o?.data?.data?o.data.data:o?.data?o.data:o:null,[o]),H=A?.seo_payload??A?.seoPayload??null,M=A?.description_html??A?.descriptionHtml??A?.seo_payload?.description_html??A?._debug?.description_html??null,D="string"==typeof M&&M.trim().length>0?M:null,G=(0,a.useMemo)(()=>Array.isArray(A?.features)?A.features:Array.isArray(A?.seo_payload?.features)?A.seo_payload.features:null,[A]),z=(0,a.useMemo)(()=>{if(!D)return"<em>No description generated yet</em>";if(!f)return D;try{let e=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),t=RegExp(`(${e})`,"gi");return D.replace(t,'<mark class="bg-amber-200 text-gray-900 px-1 rounded-sm">$1</mark>')}catch(e){return console.warn("Unable to highlight search term",e),D}},[D,f]),J=["h1","pageTitle","title","metaDescription","meta_description","seoShortDescription","seo_short_description","keywords","slug","name_best"],B=(0,a.useMemo)(()=>H&&"object"==typeof H?Object.entries(H).filter(([e])=>!J.includes(e)):[],[H]),F=async()=>{if(D)try{await navigator.clipboard.writeText(D),w("copied"),setTimeout(()=>w("idle"),1500)}catch(e){console.error("copy failed",e),w("error"),setTimeout(()=>w("idle"),1500)}},K=!!(H||D||G),Q=(0,a.useMemo)(()=>[{key:"scrape",label:"Scraping & Normalizing",state:x||I?"active":A?.status==="completed"||A?.normalized_payload?"done":"idle",hint:I||A?.status||"waiting"},{key:"seo",label:"AvidiaSEO Generation",state:m?"active":K?"done":"idle",hint:m?"Calling central GPT":K?"SEO saved":"ready"},{key:"review",label:"Human-ready Preview",state:K?"done":"idle",hint:K?"Rendered":"awaiting generation"}],[m,K,A?.normalized_payload,A?.status,x,I]);return(0,t.jsxs)("main",{className:"min-h-screen bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-slate-50 relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,t.jsx)("div",{className:"absolute -top-32 -left-24 h-72 w-72 rounded-full bg-cyan-300/22 blur-3xl dark:bg-cyan-500/15"}),(0,t.jsx)("div",{className:"absolute -bottom-24 right-0 h-72 w-72 rounded-full bg-emerald-300/20 blur-3xl dark:bg-emerald-500/10"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(248,250,252,0)_0,_rgba(248,250,252,0.9)_55%,_rgba(248,250,252,1)_100%)] dark:bg-[radial-gradient(circle_at_top,_rgba(15,23,42,0)_0,_rgba(15,23,42,0.9)_55%,_rgba(15,23,42,1)_100%)]"}),(0,t.jsx)("div",{className:"absolute inset-0 opacity-[0.04] dark:opacity-[0.08]",children:(0,t.jsx)("div",{className:"h-full w-full bg-[linear-gradient(to_right,#e5e7eb_1px,transparent_1px),linear-gradient(to_bottom,#e5e7eb_1px,transparent_1px)] bg-[size:42px_42px] dark:bg-[linear-gradient(to_right,#1f2937_1px,transparent_1px),linear-gradient(to_bottom,#1f2937_1px,transparent_1px)]"})})]}),(0,t.jsxs)("div",{className:"relative mx-auto max-w-7xl px-4 pt-4 pb-8 space-y-6 lg:px-8 lg:pt-6 lg:pb-10",children:[(0,t.jsxs)("section",{className:"relative flex flex-col gap-6 lg:flex-row lg:items-stretch",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-[260px] space-y-4",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full border border-cyan-300/70 bg-white/90 px-3 py-1.5 text-[10px] font-medium uppercase tracking-[0.18em] text-slate-600 shadow-sm dark:border-cyan-500/40 dark:bg-slate-950/80 dark:text-cyan-100",children:[(0,t.jsx)("span",{className:"inline-flex h-3 w-3 items-center justify-center rounded-full bg-slate-100 border border-cyan-300 dark:bg-slate-900 dark:border-cyan-400/60",children:(0,t.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-cyan-400 animate-pulse"})}),"AvidiaTech • AvidiaSEO",l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"h-3 w-px bg-slate-300/70 dark:bg-slate-700/70"}),(0,t.jsxs)("span",{className:"font-mono text-[10px]",children:[l.slice(0,8),"…"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h1",{className:"text-xl sm:text-2xl font-semibold text-slate-900 leading-tight dark:text-slate-50",children:["Turn any manufacturer URL into a"," ",(0,t.jsx)("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-cyan-500 via-sky-500 to-emerald-400 dark:from-cyan-300 dark:via-sky-400 dark:to-emerald-300",children:"production-ready SEO page"}),"."]}),(0,t.jsx)("p",{className:"text-sm text-slate-600 max-w-xl dark:text-slate-300",children:"Paste a product URL and fire the whole pipeline: ingestion, cleanup, and compliant copy — rendered exactly how your store needs it. No prompts, no copy-paste gymnastics."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 text-[11px]",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-xl bg-white/90 border border-slate-200 px-3 py-2 shadow-sm dark:bg-slate-950/80 dark:border-slate-700/70",children:[(0,t.jsx)("span",{className:"h-5 w-5 rounded-lg bg-cyan-500/10 border border-cyan-300 flex items-center justify-center text-[13px] text-cyan-700 dark:bg-cyan-500/15 dark:border-cyan-500/40 dark:text-cyan-100",children:"1"}),(0,t.jsxs)("div",{className:"space-y-0",children:[(0,t.jsx)("p",{className:"font-semibold text-slate-900 dark:text-slate-50",children:"Ingest engine native"}),(0,t.jsx)("p",{className:"text-slate-500 text-[10px] dark:text-slate-400",children:"Reuses the same ingestion layer powering AvidiaExtract."})]})]}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-xl bg-white/90 border border-slate-200 px-3 py-2 shadow-sm dark:bg-slate-950/80 dark:border-slate-700/70",children:[(0,t.jsx)("span",{className:"h-5 w-5 rounded-lg bg-sky-500/10 border border-sky-300 flex items-center justify-center text-[13px] text-sky-700 dark:bg-sky-500/15 dark:border-sky-500/40 dark:text-sky-100",children:"2"}),(0,t.jsxs)("div",{className:"space-y-0",children:[(0,t.jsx)("p",{className:"font-semibold text-slate-900 dark:text-slate-50",children:"Custom GPT brain"}),(0,t.jsx)("p",{className:"text-slate-500 text-[10px] dark:text-slate-400",children:"Runs your instruction sheet, not a generic prompt."})]})]}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-xl bg-white/90 border border-slate-200 px-3 py-2 shadow-sm dark:bg-slate-950/80 dark:border-slate-700/70",children:[(0,t.jsx)("span",{className:"h-5 w-5 rounded-lg bg-emerald-500/10 border border-emerald-300 flex items-center justify-center text-[13px] text-emerald-700 dark:bg-emerald-500/15 dark:border-emerald-500/40 dark:text-emerald-100",children:"3"}),(0,t.jsxs)("div",{className:"space-y-0",children:[(0,t.jsx)("p",{className:"font-semibold text-slate-900 dark:text-slate-50",children:"JSON + HTML ready"}),(0,t.jsx)("p",{className:"text-slate-500 text-[10px] dark:text-slate-400",children:"Mirrors your BigCommerce / automation schema."})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 pt-1",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 border border-cyan-200 px-3 py-1.5 text-[11px] shadow-sm dark:bg-slate-950/80 dark:border-cyan-500/30",children:[(0,t.jsx)("span",{className:"text-[11px] font-semibold text-cyan-700 uppercase tracking-[0.16em] dark:text-cyan-200",children:"Step 1"}),(0,t.jsxs)("span",{className:"text-[11px] text-slate-600 dark:text-slate-300",children:["Paste the manufacturer URL in the"," ",(0,t.jsx)("span",{className:"font-semibold text-cyan-700 dark:text-cyan-200",children:"URL box directly below"}),"."]})]}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-1.5 rounded-full bg-slate-100 border border-slate-200 px-3 py-1.5 text-[11px] text-slate-600 shadow-sm dark:bg-slate-950/80 dark:border-slate-700 dark:text-slate-300",children:[(0,t.jsx)("span",{className:"text-xs",children:"⬇"}),(0,t.jsx)("span",{children:"Step 2 — hit “Generate & Save” for full cascade."})]}),g&&(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 border border-cyan-200 px-3 py-1.5 text-[11px] text-cyan-700 shadow-sm dark:bg-slate-950/80 dark:border-cyan-500/40 dark:text-cyan-100",children:[(0,t.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-cyan-400 animate-pulse"}),g]})]})]}),(0,t.jsxs)("div",{className:"w-full lg:w-[430px] xl:w-[480px] flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("p",{className:"text-[11px] font-medium uppercase tracking-[0.18em] text-slate-500 dark:text-slate-400",children:"Real-time pipeline"}),(0,t.jsx)("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:x||m?"Running…":"Idle"})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,t.jsxs)("div",{className:"flex-1 rounded-2xl bg-white/95 border border-slate-200 px-4 py-3 space-y-2 shadow-sm dark:bg-slate-950/80 dark:border-slate-700/80",children:[(0,t.jsx)("p",{className:"text-[11px] font-medium uppercase tracking-[0.2em] text-slate-500 dark:text-slate-400",children:"3-step visual flow"}),(0,t.jsx)("ol",{className:"space-y-2.5 text-xs mt-1",children:Q.map((e,a)=>{let s="done"===e.state,r="active"===e.state;return(0,t.jsxs)("li",{className:"flex items-center gap-3 relative",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:["flex h-7 w-7 items-center justify-center rounded-full border text-[11px] font-semibold shadow-sm",s?"bg-emerald-400 text-slate-900 border-emerald-300 shadow-emerald-500/40":r?"bg-cyan-500 text-slate-900 border-cyan-300 animate-pulse shadow-cyan-500/40":"bg-slate-100 text-slate-500 border-slate-300 dark:bg-slate-900 dark:text-slate-400 dark:border-slate-600"].join(" "),children:a+1}),a<Q.length-1&&(0,t.jsx)("div",{className:["mt-1 h-6 w-px",s||r?"bg-gradient-to-b from-cyan-400 via-emerald-400 to-transparent":"bg-slate-200 dark:bg-slate-700"].join(" ")})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-[11px] font-medium text-slate-800 dark:text-slate-100",children:e.label}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:e.hint})]})]},e.key)})})]}),(0,t.jsxs)("div",{className:"flex-1 rounded-2xl bg-white/95 border border-slate-200 px-4 py-3 space-y-2 shadow-sm dark:bg-slate-950/80 dark:border-slate-700/80",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-[11px] font-medium uppercase tracking-[0.18em] text-slate-500 dark:text-slate-400",children:"Live pipeline status"}),x&&(0,t.jsx)("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:"Loading…"})]}),(0,t.jsx)("div",{className:"space-y-2 mt-1",children:Q.map(e=>(0,t.jsxs)("div",{className:`flex items-center justify-between px-3 py-1.5 rounded-xl border text-[11px] ${"done"===e.state?"bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-950/70 dark:border-emerald-500/40 dark:text-emerald-100":"active"===e.state?"bg-amber-50 border-amber-200 text-amber-700 dark:bg-amber-950/70 dark:border-amber-500/40 dark:text-amber-100":"bg-slate-50 border-slate-200 text-slate-600 dark:bg-slate-950/70 dark:border-slate-700 dark:text-slate-300"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`h-2 w-2 rounded-full ${"done"===e.state?"bg-emerald-400":"active"===e.state?"bg-amber-400 animate-pulse":"bg-slate-400 dark:bg-slate-500"}`}),(0,t.jsx)("span",{className:"font-medium",children:e.label})]}),(0,t.jsx)("span",{className:"text-[10px]",children:e.hint})]},e.key))}),(0,t.jsx)("p",{className:"text-[10px] text-slate-500 mt-1 dark:text-slate-500",children:"Every state here reflects real ingestion + SEO calls — not a fake demo."})]})]})]})]}),h&&(0,t.jsx)("div",{className:"rounded-2xl border border-rose-300 bg-rose-50 text-rose-800 px-4 py-3 text-sm shadow-sm dark:border-rose-500/40 dark:bg-rose-950/60 dark:text-rose-50",children:h}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,t.jsxs)("div",{className:"rounded-2xl bg-white border border-slate-200 shadow-sm p-4 lg:p-5 space-y-3 dark:bg-slate-900/80 dark:border-slate-700/60",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:"One-click AvidiaSEO"}),(0,t.jsxs)("p",{className:"text-xs text-slate-600 max-w-xl dark:text-slate-400",children:["Step 1 — paste the manufacturer URL. Step 2 — hit"," ",(0,t.jsx)("span",{className:"font-semibold text-cyan-700 dark:text-cyan-300",children:"Generate & Save"}),". AvidiaSEO runs ingest → poll → GPT SEO in a single shot."]})]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,t.jsx)("input",{value:n,onChange:e=>{i(e.target.value),c(null),R(!1),_(null),O(null),y(null),u(null)},placeholder:"https://manufacturer.com/product...",className:"w-full px-3 py-2 rounded-lg border border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/30 text-sm dark:border-slate-700 dark:bg-slate-950/60 dark:text-slate-50 dark:placeholder:text-slate-500",type:"url"}),(0,t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),$()},disabled:m,className:"sm:w-48 w-full px-4 py-3 rounded-lg bg-cyan-500 text-slate-950 text-sm font-semibold shadow-sm hover:bg-cyan-400 disabled:opacity-60 disabled:shadow-none transition-transform hover:-translate-y-[1px]",children:m?"Generating…":"Generate & Save"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsx)("p",{className:"text-[11px] text-slate-500 dark:text-slate-500",children:"This always runs the full cascade for the current URL. If the URL matches an existing ingestion, AvidiaSEO reuses it."}),(0,t.jsx)("button",{type:"button",onClick:()=>{i("https://www.apple.com/iphone-17/"),c(null),R(!1),_(null),O(null),y("Demo URL loaded — hit Generate & Save"),u(null)},className:"text-[11px] text-cyan-700 hover:text-cyan-600 underline underline-offset-4 dark:text-cyan-300 dark:hover:text-cyan-200",children:"Try a demo URL"})]})]})]}),(0,t.jsxs)("div",{className:"rounded-2xl bg-white text-slate-900 shadow-sm p-5 border border-slate-200 dark:bg-slate-900/85 dark:text-white dark:border-slate-700/80",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-[0.22em] text-slate-500 mb-1 dark:text-slate-400",children:"Description window"}),(0,t.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold mb-1",children:"Premium HTML viewer"}),(0,t.jsx)("p",{className:"text-slate-600 text-xs max-w-2xl dark:text-slate-300",children:"See the final copy exactly as it will appear on a product page. Highlight any claim, copy it into your CMS, or export the HTML for your automation layer."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:F,disabled:!D,className:"px-3 py-2 rounded-lg bg-slate-900 text-xs text-slate-50 border border-slate-900 shadow-sm hover:bg-slate-800 disabled:opacity-40 dark:bg-white/5 dark:border-white/25 dark:text-white dark:hover:bg-white/10",children:"copied"===k?"Copied!":"error"===k?"Copy failed":"Copy description"}),(0,t.jsx)("button",{type:"button",onClick:()=>{if(!D)return;let e=new Blob([D],{type:"text/html"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`avidia-seo-description-${l||"preview"}.html`,a.click(),URL.revokeObjectURL(t)},disabled:!D,className:"px-3 py-2 rounded-lg bg-slate-900 text-xs text-slate-50 font-semibold border border-slate-900 shadow-sm hover:-translate-y-[1px] transition disabled:opacity-40 disabled:shadow-none dark:bg-white dark:text-slate-900 dark:border-white/30",children:"Download HTML"}),(0,t.jsx)("button",{type:"button",onClick:()=>j(e=>e.trim()),className:"px-3 py-2 rounded-lg bg-amber-400 text-xs text-slate-900 font-semibold shadow-sm hover:bg-amber-300",children:"Search in text"})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-white border border-slate-200 rounded-lg px-3 py-2 dark:bg-white/5 dark:border-white/15",children:[(0,t.jsx)("input",{value:f,onChange:e=>j(e.target.value),placeholder:"Search headline, claims, or FAQs",className:"flex-1 bg-transparent text-xs text-slate-900 placeholder:text-slate-400 focus:outline-none dark:text-white dark:placeholder:text-slate-300"}),(0,t.jsx)("span",{className:"text-[11px] text-slate-500 dark:text-slate-200",children:"Live highlight"})]}),(0,t.jsxs)("div",{className:"rounded-2xl bg-white text-slate-900 shadow-inner border border-slate-200 overflow-hidden dark:bg-white dark:text-slate-900 dark:border-slate-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-100 bg-slate-50 dark:bg-slate-50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-500 mb-1",children:"Rendered description"}),(0,t.jsx)("p",{className:"text-xs text-slate-600 m-0",children:"Mirrors your custom GPT instructions — headings, lists, disclaimers, and manuals stay structured."})]}),P&&(0,t.jsx)("span",{className:"px-3 py-1 rounded-full bg-amber-100 text-amber-700 text-[11px] font-semibold",children:"Preview only — sign in to persist"})]}),(0,t.jsx)("div",{className:"prose prose-slate max-w-none px-6 py-5 text-sm",children:D?(0,t.jsx)("article",{className:"prose-headings:scroll-mt-20 prose-h2:mt-6 prose-h3:mt-4 prose-ul:list-disc prose-li:marker:text-slate-400",dangerouslySetInnerHTML:{__html:z}}):(0,t.jsx)("div",{className:"text-slate-500 text-sm italic",children:"No description generated yet. Paste a URL above and run the pipeline."})})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"rounded-2xl bg-white border border-slate-200 shadow-sm p-4 space-y-3 dark:bg-slate-900/80 dark:border-slate-700/60",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:"SEO structure"}),(0,t.jsx)("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:"Driven by custom instructions"})]}),(0,t.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-slate-50 border border-slate-200 dark:bg-slate-950/60 dark:border-slate-700",children:[(0,t.jsx)("p",{className:"text-[11px] uppercase text-slate-500 mb-1 dark:text-slate-400",children:"H1"}),(0,t.jsx)("p",{className:"font-semibold text-slate-900 dark:text-slate-50",children:H?.h1??H?.name_best??"Not yet generated"})]}),(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-slate-50 border border-slate-200 dark:bg-slate-950/60 dark:border-slate-700",children:[(0,t.jsx)("p",{className:"text-[11px] uppercase text-slate-500 mb-1 dark:text-slate-400",children:"Page title"}),(0,t.jsx)("p",{className:"font-semibold text-slate-900 dark:text-slate-50",children:H?.pageTitle??H?.title??"Not yet generated"})]}),(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-slate-50 border border-slate-200 dark:bg-slate-950/60 dark:border-slate-700",children:[(0,t.jsx)("p",{className:"text-[11px] uppercase text-slate-500 mb-1 dark:text-slate-400",children:"Meta description"}),(0,t.jsx)("p",{className:"text-slate-800 leading-relaxed dark:text-slate-100",children:H?.metaDescription??H?.meta_description??"Not yet generated"})]}),(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-slate-50 border border-slate-200 dark:bg-slate-950/60 dark:border-slate-700",children:[(0,t.jsx)("p",{className:"text-[11px] uppercase text-slate-500 mb-1 dark:text-slate-400",children:"Short description"}),(0,t.jsx)("p",{className:"text-slate-800 dark:text-slate-100",children:H?.seoShortDescription??H?.seo_short_description??"Not yet generated"})]})]})]}),(0,t.jsxs)("div",{className:"rounded-2xl bg-white border border-slate-200 shadow-sm p-4 space-y-3 dark:bg-slate-900/80 dark:border-slate-700/60",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:"Feature bullets"}),(0,t.jsx)("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:"What the enforcer kept"})]}),Array.isArray(G)&&G.length>0?(0,t.jsx)("ul",{className:"list-disc list-inside space-y-1 text-xs text-slate-800 dark:text-slate-100",children:G.map((e,a)=>(0,t.jsx)("li",{children:e},a))}):(0,t.jsx)("p",{className:"text-slate-500 text-xs dark:text-slate-400",children:"No features captured yet. Generate SEO to see normalized bullets."}),B.length>0&&(0,t.jsxs)("div",{className:"mt-3 border-t border-slate-200 pt-3 dark:border-slate-700",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>v(e=>!e),className:"text-xs text-cyan-700 hover:text-cyan-600 underline underline-offset-4 dark:text-cyan-300 dark:hover:text-cyan-200",children:[N?"Hide":"Show"," parked extras (",B.length,")"]}),N&&(0,t.jsx)("pre",{className:"mt-2 p-3 rounded-lg bg-slate-900 text-[11px] text-slate-100 border border-slate-700 overflow-auto dark:bg-slate-950/70",children:JSON.stringify(Object.fromEntries(B),null,2)})]})]}),A&&l&&(0,t.jsxs)("div",{className:"rounded-2xl bg-white border border-slate-200 shadow-sm p-4 space-y-3 dark:bg-slate-900/80 dark:border-slate-700/60",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:"Source SEO (scraped)"}),(0,t.jsx)("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:"Live from ingestion"})]}),(0,t.jsx)("pre",{className:"bg-slate-900/95 border border-slate-800 rounded-lg p-3 text-[11px] text-slate-100 whitespace-pre-wrap break-words dark:bg-slate-950/70",children:JSON.stringify(A.normalized_payload??A,null,2)})]}),S&&(0,t.jsxs)("div",{className:"rounded-2xl bg-white border border-slate-200 shadow-sm p-4 space-y-3 dark:bg-slate-900/80 dark:border-slate-700/60",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:"Raw /api/v1/ingest response"}),I&&(0,t.jsx)("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:I})]}),(0,t.jsx)("pre",{className:"bg-slate-900/95 border border-slate-800 rounded-lg p-3 text-[11px] text-slate-100 whitespace-pre-wrap break-words dark:bg-slate-950/70",children:JSON.stringify(S,null,2)})]}),o&&!l&&(o.seo_payload||o.seoPayload)&&(0,t.jsxs)("div",{className:"rounded-2xl bg-white border border-slate-200 shadow-sm p-4 space-y-2 text-xs text-slate-800 dark:bg-slate-900/80 dark:border-slate-700/60 dark:text-slate-100",children:[(0,t.jsx)("h5",{className:"text-xs font-semibold text-slate-900 dark:text-slate-50",children:"Preview Generated SEO"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"H1:"})," ",(o.seo_payload??o.seoPayload)?.h1??""]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Title:"})," ",(o.seo_payload??o.seoPayload)?.title??""]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Meta:"})," ",(o.seo_payload??o.seoPayload)?.meta_description??(o.seo_payload??o.seoPayload)?.metaDescription??""]}),(0,t.jsx)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-950/70",dangerouslySetInnerHTML:{__html:o.description_html||o.descriptionHtml||"<em>No description generated</em>"}})]})]})]})]})]})}e.s(["default",()=>r])}]);