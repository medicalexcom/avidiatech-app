(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83060,e=>{"use strict";var s=e.i(43476);function i(){return(0,s.jsxs)("a",{href:"/dashboard",onClick:function(e){e.preventDefault();try{window.history.length>1?window.history.back():window.location.href="/dashboard"}catch{window.location.href="/dashboard"}},className:"inline-flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300 hover:underline",children:[(0,s.jsx)("span",{"aria-hidden":!0,children:"←"}),(0,s.jsx)("span",{children:"Back to dashboard"})]})}e.s(["default",()=>i])},61852,e=>{"use strict";var s=e.i(43476),i=e.i(71645);function l(){let[e,l]=(0,i.useState)(null),[t,a]=(0,i.useState)(!0),[n,d]=(0,i.useState)(!1);async function r(){d(!0);try{let e=await fetch("/api/billing/portal",{method:"POST"}),s=await e.json();e.ok&&s.url?window.open(s.url,"_blank"):alert(s?.error||"No billing portal available")}catch(e){console.error(e),alert("Failed to open billing portal")}finally{d(!1)}}if((0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/billing/summary"),s=await e.json();l(s||null)}catch(e){console.error(e)}finally{a(!1)}})()},[]),t)return(0,s.jsx)("div",{children:"Loading…"});if(!e)return(0,s.jsx)("div",{children:"Unable to load billing summary"});if(!e.isOwner)return(0,s.jsx)("div",{className:"max-w-4xl",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-900 border rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Billing"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:"Billing information is available to account owners only. Contact your organization owner to manage billing."})]})});let c=e.plan??"Starter",o=e.renewal??"—",h=e.usage?.ingests??{used:0,limit:0},x=e.usage?.translations??{used:0,limit:0};function m(e,s){return s?Math.min(100,Math.round(e/s*100)):0}return(0,s.jsx)("div",{className:"max-w-4xl",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-900 border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Subscription & Billing"}),(0,s.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Manage subscription, billing, and usage."})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:r,disabled:n,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:n?"Opening…":"Open Stripe Portal"})})]}),(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"col-span-1 border rounded p-4",children:[(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"Plan"}),(0,s.jsx)("div",{className:"text-xl font-semibold mt-1",children:c}),(0,s.jsxs)("div",{className:"text-sm text-slate-500 mt-2",children:["Renewal: ",o]})]}),(0,s.jsxs)("div",{className:"col-span-2 border rounded p-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Usage"}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,s.jsx)("div",{children:"Product ingests"}),(0,s.jsxs)("div",{children:[h.used," / ",h.limit]})]}),(0,s.jsx)("div",{className:"w-full bg-slate-100 dark:bg-slate-800 h-2 rounded mt-1",children:(0,s.jsx)("div",{style:{width:`${m(h.used,h.limit)}%`},className:"h-2 bg-indigo-600 rounded"})})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,s.jsx)("div",{children:"Translations"}),(0,s.jsxs)("div",{children:[x.used," / ",x.limit]})]}),(0,s.jsx)("div",{className:"w-full bg-slate-100 dark:bg-slate-800 h-2 rounded mt-1",children:(0,s.jsx)("div",{style:{width:`${m(x.used,x.limit)}%`},className:"h-2 bg-indigo-600 rounded"})})]})]})]})]})})}e.s(["default",()=>l])}]);