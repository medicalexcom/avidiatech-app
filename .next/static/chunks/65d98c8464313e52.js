(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,21781,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(98478);function l({bucket:e="imports",mappingPreset:s=null,onCreated:a}){return(0,t.jsx)(r.default,{bucket:e,onCreated:async e=>{if(a?.(e),e&&s)try{await fetch(`/api/v1/imports/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify({meta:{mappingPreset:s}})})}catch(e){}}})}var n=e.i(73635);function i({orgId:e,selectedId:a,onSelect:r}){let[l,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(!1),[c,x]=(0,s.useState)(!1),[m,u]=(0,s.useState)("bigcommerce"),[p,h]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),[v,w]=(0,s.useState)(""),[N,k]=(0,s.useState)(""),[y,S]=(0,s.useState)(""),[_,C]=(0,s.useState)(null),I=(0,n.useToast)();async function R(){if(e){d(!0),C(null);try{let t=await fetch(`/api/v1/integrations?orgId=${encodeURIComponent(e)}`),s=await t.json().catch(()=>null);t.ok&&s?.ok?i(s.integrations??[]):(C(s?.error??"Failed to load"),I.error(s?.error??"Failed to load connectors"))}catch(e){C(String(e?.message??e)),I.error(String(e?.message??e))}finally{d(!1)}}}async function $(){x(!0),C(null);try{let t={org_id:e,provider:m,name:p||m,config:{},secrets:{}};if("bigcommerce"===m)t.config={store_hash:g},t.secrets={access_token:f};else if("woocommerce"===m)t.config={},t.secrets={consumer_key:v,consumer_secret:N};else if("magento"===m)t.config={},t.secrets={api_token:y};else if("generic-api-key"===m)t.config={},t.secrets={api_key:y};else if("shopify"===m){let t=`/api/v1/integrations/oauth/shopify/start?orgId=${encodeURIComponent(e)}`;try{let e=await fetch(t),s=await e.json().catch(()=>null);s?.redirectUrl?window.location.href=s.redirectUrl:window.location.href=t}finally{x(!1)}return}let s=await fetch("/api/v1/integrations",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}),a=await s.json().catch(()=>null);if(!s.ok||!a?.ok){C(a?.error??"Create failed"),I.error(a?.error??"Create failed");return}I.success("Connector created"),await R(),h(""),b(""),j(""),w(""),k(""),S("")}catch(e){C(String(e?.message??e)),I.error(String(e?.message??e))}finally{x(!1)}}async function U(t){C(null);try{let s=await fetch(`/api/v1/integrations/${t}/sync`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({org_id:e})}),a=await s.json().catch(()=>null);if(!s.ok||!a?.ok){C(a?.error??"Sync failed"),I.error(a?.error??"Sync failed");return}I.success(`Sync started: ${a.jobId??a.id??"queued"}`),await R()}catch(e){C(String(e?.message??e)),I.error(String(e?.message??e))}}return(0,s.useEffect)(()=>{e&&R()},[e]),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold",children:"Connectors"}),(0,t.jsx)("div",{className:"mt-3 space-y-2",children:o?(0,t.jsx)("div",{children:"Loading…"}):l.map(e=>{let s=a&&a===e.id;return(0,t.jsxs)("div",{role:"button",tabIndex:0,onClick:()=>r?.(e.id),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),r?.(e.id))},className:`rounded border p-2 flex items-center justify-between cursor-pointer ${s?"ring-2 ring-sky-300 bg-sky-50":"hover:bg-slate-50"}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name??e.provider}),(0,t.jsxs)("div",{className:"text-xs text-slate-500",children:[e.provider," • ",e.status??"ready",e.last_synced_at?` • last: ${new Date(e.last_synced_at).toLocaleString()}`:""]}),e.last_error&&(0,t.jsxs)("div",{className:"text-xs text-rose-600 mt-1",children:["Last error: ",String(e.last_error)]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),U(e.id)},className:"px-2 py-1 rounded bg-sky-500 text-white text-xs",children:"Sync now"})})]},e.id)})}),(0,t.jsxs)("div",{className:"mt-4 rounded border p-3",children:[(0,t.jsx)("div",{className:"text-xs text-slate-500 mb-2",children:"Create connector"}),_&&(0,t.jsx)("div",{className:"text-xs text-rose-600 mb-2",children:_}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("label",{className:"text-xs",children:"Provider"}),(0,t.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"w-full rounded border px-2 py-1",children:[(0,t.jsx)("option",{value:"bigcommerce",children:"BigCommerce (API token)"}),(0,t.jsx)("option",{value:"shopify",children:"Shopify (OAuth)"}),(0,t.jsx)("option",{value:"woocommerce",children:"WooCommerce (consumer key/secret)"}),(0,t.jsx)("option",{value:"magento",children:"Magento (API token)"}),(0,t.jsx)("option",{value:"generic-api-key",children:"Generic API Key"})]})]}),(0,t.jsx)("input",{placeholder:"Connection name",value:p,onChange:e=>h(e.target.value),className:"w-full mb-2 px-2 py-1 border rounded"}),"bigcommerce"===m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{placeholder:"Store hash",value:g,onChange:e=>b(e.target.value),className:"w-full mb-2 px-2 py-1 border rounded"}),(0,t.jsx)("input",{placeholder:"Access token",value:f,onChange:e=>j(e.target.value),className:"w-full mb-2 px-2 py-1 border rounded"})]}),"woocommerce"===m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{placeholder:"Consumer Key",value:v,onChange:e=>w(e.target.value),className:"w-full mb-2 px-2 py-1 border rounded"}),(0,t.jsx)("input",{placeholder:"Consumer Secret",value:N,onChange:e=>k(e.target.value),className:"w-full mb-2 px-2 py-1 border rounded"})]}),("magento"===m||"generic-api-key"===m)&&(0,t.jsx)("input",{placeholder:"API token / key",value:y,onChange:e=>S(e.target.value),className:"w-full mb-2 px-2 py-1 border rounded"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:$,disabled:c,className:"px-3 py-1 bg-emerald-500 text-white rounded text-sm",children:c?"Creating…":"shopify"===m?"Start Shopify auth":"Create connector"}),(0,t.jsx)("button",{onClick:R,className:"px-3 py-1 bg-slate-50 border rounded text-sm",children:"Refresh"})]})]})]})}function o({open:e,runId:a,moduleIndex:r,onClose:l}){let[n,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(!1),[c,x]=(0,s.useState)(null);return((0,s.useEffect)(()=>{e&&(a?(d(!0),x(null),fetch(`/api/v1/pipeline/run/${encodeURIComponent(a)}/module/${encodeURIComponent(String(r))}/logs`).then(e=>e.json()).then(e=>{if(!e?.ok)throw Error(e?.error??"Failed to load logs");i(e.logs??[])}).catch(e=>x(String(e?.message??e))).finally(()=>d(!1))):x("pipelineRunId required"))},[e,a,r]),e)?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-2xl rounded bg-white p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold",children:["Module logs — run ",a?a.slice(0,8):"?","… module ",r]}),(0,t.jsx)("button",{onClick:l,className:"px-2 py-1",children:"Close"})]}),(0,t.jsxs)("div",{className:"mt-3",children:[o&&(0,t.jsx)("div",{children:"Loading logs…"}),c&&(0,t.jsx)("div",{className:"text-rose-600",children:c}),!o&&!c&&(0,t.jsx)("pre",{className:"max-h-[60vh] overflow-auto rounded border bg-black p-3 text-[12px] text-white",children:n.length?n.map((e,t)=>"string"==typeof e?`${t+1}: ${e}
`:JSON.stringify(e,null,2)+"\n").join(""):"No logs available."})]})]})}):null}function d({ingestionId:e,pipelineId:a,limit:r=6}){let[l,n]=(0,s.useState)([]),[i,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(null),[x,m]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{let t=!0;return c(null),m(!1),async function(){o(!0),n([]),c(null);let s=e?`?ingestionId=${encodeURIComponent(e)}`:a?`?pipelineId=${encodeURIComponent(a)}`:"",l=`/api/v1/pipeline/runs${s}`;try{let e=await fetch(l),s=await e.json().catch(()=>null);if(e.ok){let e=Array.isArray(s)?s:s?.runs??s?.data??[];t&&n((e??[]).slice(0,r))}else{let a=String(s?.error??s?.message??s??e.statusText??"");if(/ingestion_id|db_lookup_failed|column .* does not exist/i.test(a)){let e=await fetch("/api/v1/pipeline/runs"),s=await e.json().catch(()=>null);if(e.ok){let e=Array.isArray(s)?s:s?.runs??s?.data??[];t&&(n(e.slice(0,r)),m(!0))}else{let a=String(s?.error??s?.message??e.statusText??"");t&&c(`Failed to load recent runs: ${a}`)}}else t&&c(`Failed to load recent runs: ${a}`)}}catch(e){t&&c(String(e?.message??e))}finally{t&&o(!1)}}(),()=>{t=!1}},[e,a,r]),i)?(0,t.jsx)("div",{className:"space-y-2",children:[...Array(Math.min(r,3))].map((e,s)=>(0,t.jsx)("div",{className:"h-10 rounded-lg bg-slate-100 animate-pulse"},s))}):d?(0,t.jsxs)("div",{className:"rounded-md border border-rose-200 bg-rose-50 p-3 text-sm text-rose-800",children:[(0,t.jsx)("div",{className:"font-medium",children:"Recent runs unavailable"}),(0,t.jsx)("div",{className:"text-xs mt-1",children:d})]}):l&&0!==l.length?(0,t.jsxs)("div",{className:"space-y-2",children:[x?(0,t.jsx)("div",{className:"text-xs text-slate-500 italic",children:"Filtered query failed — showing recent runs (unfiltered)."}):null,l.map(e=>{let s=e?.id??e?.run_id??e?.pipeline_run_id??"",a=(e?.status??e?.state??"unknown").toString(),r=e?.ingestion_id??e?.ingestionId??e?.data?.ingestion_id??e?.data?.id??null,l=e?.created_at??e?.created??e?.ts??null;return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"truncate font-medium",children:[s?String(s).slice(0,10):"run",(0,t.jsxs)("span",{className:"ml-2 text-xs text-slate-500",children:["· ",a]})]}),(0,t.jsxs)("div",{className:"text-xs text-slate-500",children:["Ingestion: ",(0,t.jsx)("span",{className:"font-mono",children:r?String(r):"—"}),l?(0,t.jsxs)("span",{className:"ml-3",children:["Created: ",new Date(l).toLocaleString()]}):null]})]}),(0,t.jsx)("div",{className:"shrink-0 text-xs text-slate-500",children:(0,t.jsx)("a",{href:`/dashboard/import?ingestionId=${encodeURIComponent(String(r??""))}&pipelineRunId=${encodeURIComponent(String(s??""))}`,className:"text-xs text-slate-600 hover:underline",onClick:e=>{if(!r)return void e.preventDefault()},children:"View"})})]},s??Math.random())})]}):(0,t.jsxs)("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3 text-sm text-slate-700",children:[(0,t.jsx)("div",{className:"font-medium",children:"No recent runs"}),(0,t.jsx)("div",{className:"text-xs mt-1",children:"No pipeline runs were found yet."})]})}function c({provider:e,onSelect:a}){let[r,l]=(0,s.useState)([]),[n,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{!async function(){i(!0);try{let t=await fetch("/api/v1/mapping-presets"),s=await t.json();s.ok&&l((s.presets||[]).filter(t=>!e||t.provider===e))}catch(e){}finally{i(!1)}}()},[e]),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"mapping-preset",className:"block text-sm font-medium text-gray-700",children:"Mapping preset"}),(0,t.jsxs)("div",{className:"mt-1 flex gap-2 items-center",children:[(0,t.jsxs)("select",{id:"mapping-preset",onChange:e=>{let t=e.target.value;a(r.find(e=>e.id===t)??null)},className:"border rounded px-2 py-1",children:[(0,t.jsx)("option",{value:"",children:"-- Select preset --"}),r.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),n&&(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"Loading..."})]})]})}var x=e.i(8521),m=e.i(93582);function u(...e){return e.filter(Boolean).join(" ")}function p(e){let t=(e||"").toLowerCase();return"running"===t?"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-950/45 dark:text-amber-100 dark:border-amber-500/40":"failed"===t?"bg-rose-100 text-rose-800 border-rose-200 dark:bg-rose-950/45 dark:text-rose-100 dark:border-rose-500/40":"succeeded"===t||"completed"===t?"bg-emerald-100 text-emerald-800 border-emerald-200 dark:bg-emerald-950/45 dark:text-emerald-100 dark:border-emerald-500/40":"bg-slate-100 text-slate-700 border-slate-200 dark:bg-slate-900/60 dark:text-slate-200 dark:border-slate-700"}async function h(e,t){if(!e)return void t?.error?.("No job id");try{let s=await fetch(`/api/v1/imports/${encodeURIComponent(e)}/errors?format=csv`);if(!s.ok){let e=await s.json().catch(()=>null);t?.error?.(e?.error??"Failed to download failed rows");return}let a=await s.blob(),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=`failed-rows-${e}.csv`,l.click(),URL.revokeObjectURL(r),t?.success?.("Downloaded failed rows")}catch(e){t?.error?.(String(e?.message??e))}}let g=()=>(0,t.jsxs)("svg",{className:"animate-spin h-4 w-4 inline-block mr-2 align-middle",viewBox:"0 0 24 24","aria-hidden":!0,children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]});function b(){return(0,t.jsx)("div",{className:"h-12 rounded-2xl border border-slate-200 bg-slate-50/70 animate-pulse dark:border-slate-800 dark:bg-slate-950/45"})}function f(){let e=(0,a.useSearchParams)(),r=(0,a.useRouter)(),f=(0,n.useToast)(),j=e?.get("ingestionId")||"",v=e?.get("pipelineRunId")||"",[w,N]=(0,s.useState)(""),[k,y]=(0,s.useState)([]),[S,_]=(0,s.useState)(""),[C,I]=(0,s.useState)(null),[R,$]=(0,s.useState)(!1),[U,E]=(0,s.useState)(null),[T,O]=(0,s.useState)(j||""),[P,L]=(0,s.useState)("full"),[D,A]=(0,s.useState)(!1),[M,F]=(0,s.useState)(!1),[J,B]=(0,s.useState)(null),[q,K]=(0,s.useState)(v||""),[z,V]=(0,s.useState)(null),[G,H]=(0,s.useState)(null),[W,X]=(0,s.useState)(!1),[Q,Y]=(0,s.useState)(null),[Z,ee]=(0,s.useState)(null),[et,es]=(0,s.useState)(!1),[ea,er]=(0,s.useState)(null),[el,en]=(0,s.useState)(""),ei=s.default.useRef(null);(0,s.useEffect)(()=>{let e=setTimeout(()=>(function(){let e=ei.current;if(!e)return;let t=new Set(["connectors","create connector"]);e.querySelectorAll("h1,h2,h3,h4,h5,h6,div,span,p,label").forEach(e=>{let s=(e.textContent||"").trim().toLowerCase();t.has(s)&&(e.style.display="none")}),e.querySelectorAll(".shadow,.shadow-sm,.shadow-md,.shadow-lg").forEach(e=>{e.style.boxShadow="none"}),e.querySelectorAll(".bg-white").forEach(e=>{let t=e.tagName;"BUTTON"!==t&&"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&(e.style.background="transparent")}),e.querySelectorAll(".border").forEach(e=>{let t=e.tagName;"BUTTON"!==t&&"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&(e.style.borderColor="transparent")}),e.querySelectorAll("select").forEach(t=>{let s=t.parentElement,a=0;for(;s&&s!==e&&a<8;){let e=String(s.className||"");e.includes("border")&&(e.includes("rounded")||e.includes("shadow")||e.includes("bg-white"))&&(s.style.border="0",s.style.background="transparent",s.style.boxShadow="none",s.style.padding="0"),s=s.parentElement,a++}})})(),0);return()=>clearTimeout(e)},[w,k.length,S]);let eo=(0,s.useMemo)(()=>k.find(e=>e.id===S)??null,[k,S]);async function ed(){try{let e=await fetch("/api/v1/me"),t=await e.json().catch(()=>null);if(e.ok&&t?.ok&&t.org_id)return N(t.org_id),t.org_id;return N(""),""}catch{return N(""),""}}async function ec(){if(!w)return void y([]);try{let e=await fetch(`/api/v1/integrations?orgId=${encodeURIComponent(w)}`),t=await e.json().catch(()=>null);e.ok&&t?.ok?y(t.integrations??[]):y([])}catch{y([])}}async function ex(e){try{let t=await fetch(`/api/v1/integrations/${encodeURIComponent(e)}/test`,{method:"POST"}),s=await t.json().catch(()=>null);if(!t.ok||!s?.ok)return void f.error(`Test failed: ${s?.error??"unknown"}`);f.success("Connection test succeeded"),await ec()}catch(e){f.error(String(e?.message??e))}}async function em(e){if(!w)return void f.error("Org ID missing — set DEV_ORG_ID or wire session.");try{let t=await fetch(`/api/v1/integrations/${encodeURIComponent(e)}/sync`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({org_id:w})}),s=await t.json().catch(()=>null);if(!t.ok||!s?.ok)return void f.error(s?.error??"Sync failed");let a=s.jobId??s.id??"";O(a),f.success(`Sync started: ${a}`),a&&await eu(a),await ec()}catch(e){f.error(String(e?.message??e))}}async function eu(e){try{B(null);let t=await fetch(`/api/v1/ingest/${encodeURIComponent(e)}`),s=await t.json().catch(()=>null);if(!t.ok)throw Error(s?.error?.message||s?.error||`Ingest fetch failed: ${t.status}`);let a=s?.data??s;return B(a),a}catch(e){throw B(null),e}}async function ep(e){let t=await fetch(`/api/v1/pipeline/run/${encodeURIComponent(e)}`),s=await t.json().catch(()=>null);if(!t.ok)throw Error(s?.error?.message||s?.error||`Pipeline fetch failed: ${t.status}`);return s}async function eh(e,t=3e5,s=2e3){let a=Date.now();for(;Date.now()-a<t;){let t=await ep(e);V(t);let a=t?.run?.status;if("succeeded"===a||"failed"===a)return t;await function(e){return new Promise(t=>setTimeout(t,e))}(s)}throw Error("Pipeline did not complete within timeout")}async function eg(e,t){let s=(t??[]).find(e=>"import"===e.module_name);if(!s)return null;let a=await fetch(`/api/v1/pipeline/run/${encodeURIComponent(e)}/output/${s.module_index}`),r=await a.json().catch(()=>null);if(!a.ok)throw Error(r?.error?.message||r?.error||`Import artifact fetch failed: ${a.status}`);return H(r),r}async function eb(e){if(W)return;ee(null),Y(null),V(null),H(null);let t=(e??T).trim();if(!t)return void f.error("Enter an ingestionId first.");X(!0);try{f.info("Loading ingestion"),await eu(t),f.info("Starting pipeline run");let e=await fetch("/api/v1/pipeline/run",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({ingestionId:t,triggerModule:"import",steps:"import_only"===P?["import"]:["extract","seo","audit","import"],options:{import:{allowOverwriteExisting:D,mappingPreset:C?.id??C??void 0}}})}),s=await e.json().catch(()=>null);if(!e.ok)throw Error(s?.error?.message||s?.error||`Pipeline start failed: ${e.status}`);let a=String(s?.pipelineRunId??"");if(!a)throw Error("Pipeline start did not return pipelineRunId");K(a),r.push(`/dashboard/import?ingestionId=${encodeURIComponent(t)}&pipelineRunId=${encodeURIComponent(a)}`),f.info("Pipeline running");let l=await eh(a,3e5,2e3);f.info("Refreshing ingestion"),await eu(t),f.info("Loading import artifact"),await eg(a,l?.modules??[]),f.success("Import run completed")}catch(e){ee(String(e?.message||e)),f.error(String(e?.message||e))}finally{X(!1)}}(0,s.useEffect)(()=>{(async()=>{if(await ed()&&await ec(),j&&eu(j).catch(e=>ee(String(e?.message||e))),v)try{let e=await ep(v);V(e),K(v),await eg(v,e?.modules??[])}catch(e){ee(String(e?.message||e))}})()},[]);let ef=(0,s.useMemo)(()=>J?J?.data?.data?J.data.data:J?.data?J.data:J:null,[J]),ej=ef?.diagnostics?.import??null,ev=z?.run?.status??null,ew=(0,s.useMemo)(()=>{let e=new Map;for(let t of z?.modules??[])if(t.started_at&&t.finished_at){let s=new Date(t.finished_at).getTime()-new Date(t.started_at).getTime();!Number.isNaN(s)&&s>=0&&e.set(t.module_name,s)}return e},[z]),eN=(0,s.useMemo)(()=>{let e=z?.modules??[];return e.length?Math.round(e.filter(e=>["succeeded","failed","skipped"].includes(e.status)).length/e.length*100):0},[z]),ek="h-10 inline-flex items-center justify-center rounded-xl border border-slate-200 bg-white/70 px-3 text-sm text-slate-800 shadow-sm hover:bg-white dark:border-slate-800 dark:bg-slate-950/50 dark:text-slate-200 dark:hover:bg-slate-950",ey="h-10 inline-flex items-center justify-center rounded-xl px-4 text-sm font-semibold text-slate-950 shadow-sm transition bg-gradient-to-r from-cyan-400 via-sky-400 to-emerald-400 hover:opacity-95 hover:-translate-y-[1px] focus:outline-none focus:ring-2 focus:ring-cyan-500/30 disabled:opacity-60 disabled:shadow-none";return(0,t.jsxs)("main",{className:"relative min-h-screen overflow-hidden bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-slate-50",children:[(0,t.jsx)("style",{children:`
        .headline-grad {
          background-size: 220% 220%;
          animation: gshift 8s ease-in-out infinite;
        }
        @keyframes gshift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
      `}),(0,t.jsxs)("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[(0,t.jsx)("div",{className:"absolute -top-36 -left-28 h-[28rem] w-[28rem] rounded-full bg-cyan-300/22 blur-3xl dark:bg-cyan-500/14"}),(0,t.jsx)("div",{className:"absolute -top-40 right-[-10rem] h-[26rem] w-[26rem] rounded-full bg-fuchsia-300/14 blur-3xl dark:bg-fuchsia-500/10"}),(0,t.jsx)("div",{className:"absolute -bottom-52 right-[-12rem] h-[34rem] w-[34rem] rounded-full bg-emerald-300/16 blur-3xl dark:bg-emerald-500/10"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(248,250,252,0)_0,_rgba(248,250,252,0.92)_55%,_rgba(248,250,252,1)_100%)] dark:bg-[radial-gradient(circle_at_top,_rgba(15,23,42,0)_0,_rgba(15,23,42,0.92)_55%,_rgba(15,23,42,1)_100%)]"}),(0,t.jsx)("div",{className:"absolute inset-0 opacity-[0.035] dark:opacity-[0.07]",children:(0,t.jsx)("div",{className:"h-full w-full bg-[linear-gradient(to_right,#e5e7eb_1px,transparent_1px),linear-gradient(to_bottom,#e5e7eb_1px,transparent_1px)] bg-[size:46px_46px] dark:bg-[linear-gradient(to_right,#1e293b_1px,transparent_1px),linear-gradient(to_bottom,#1e293b_1px,transparent_1px)]"})})]}),(0,t.jsxs)("div",{className:"mx-auto max-w-7xl space-y-5 px-4 py-6 sm:px-6 lg:px-10 lg:py-8",children:[(0,t.jsxs)("section",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/90 px-3 py-1.5 text-[10px] font-medium uppercase tracking-[0.18em] text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-950/70 dark:text-slate-300",children:[(0,t.jsx)("span",{className:"inline-flex h-3 w-3 items-center justify-center rounded-full bg-slate-50 border border-cyan-200 dark:bg-slate-900 dark:border-cyan-400/30",children:(0,t.jsx)("span",{className:u("h-1.5 w-1.5 rounded-full",W?"bg-cyan-400 animate-pulse":"bg-slate-400")})}),"Data Intelligence · AvidiaImport",T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"h-3 w-px bg-slate-300/70 dark:bg-slate-700/70"}),(0,t.jsxs)("span",{className:"font-mono text-[10px]",children:[String(T).slice(0,8),"…"]})]}):null,q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"h-3 w-px bg-slate-300/70 dark:bg-slate-700/70"}),(0,t.jsxs)("span",{className:"font-mono text-[10px]",children:["run:",String(q).slice(0,8),"…"]})]}):null]}),(0,t.jsxs)("div",{className:"hidden sm:flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[(0,t.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-slate-300 dark:bg-slate-700"}),ev?`pipeline: ${ev}`:"ready"]})]}),(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:(0,t.jsxs)("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:["Status:"," ",(0,t.jsx)("span",{className:u("ml-2 inline-flex items-center rounded-full border px-2 py-0.5",p(ev??"idle")),children:ev??"idle"})]})})]}),(0,t.jsx)("section",{className:"rounded-3xl border border-slate-200 bg-white/92 shadow-[0_18px_45px_rgba(148,163,184,0.22)] backdrop-blur dark:border-slate-800 dark:bg-slate-950/55 dark:shadow-[0_18px_45px_rgba(15,23,42,0.75)]",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 p-4 lg:grid-cols-12 lg:gap-5 lg:p-5",children:[(0,t.jsx)("aside",{className:"lg:col-span-4",children:(0,t.jsxs)("div",{ref:ei,"data-connector-shell":!0,className:"rounded-3xl border border-slate-200 bg-gradient-to-b from-white/95 to-slate-50/70 p-4 shadow-[0_18px_45px_rgba(148,163,184,0.18)] dark:border-slate-800 dark:from-slate-950/70 dark:to-slate-950/40",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:"Stores & Connectors"}),(0,t.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Select a store, test, sync, or open details."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/70 px-3 py-1 text-[11px] text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-950/40 dark:text-slate-300",children:[(0,t.jsx)("span",{className:u("h-1.5 w-1.5 rounded-full",w?"bg-emerald-400":"bg-slate-300 dark:bg-slate-700")}),w?"org loaded":"org unknown"]}),(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/70 px-3 py-1 text-[11px] text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-950/40 dark:text-slate-300",children:[(0,t.jsx)("span",{className:"font-mono",children:k.length})," stores"]})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("div",{className:"rounded-2xl border border-slate-200/60 bg-white/50 p-3 backdrop-blur dark:border-slate-800/70 dark:bg-slate-950/30",children:(0,t.jsx)(i,{orgId:w,selectedId:S,onSelect:function(e){_(e),f?.info?.("Connector selected")}})}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2 text-[11px] text-slate-600 dark:text-slate-300",children:[(0,t.jsx)("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-white/60 px-3 py-1 dark:border-slate-800 dark:bg-slate-950/35",children:"SKU recommended for matching"}),(0,t.jsx)("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-white/60 px-3 py-1 dark:border-slate-800 dark:bg-slate-950/35",children:"Preview up to 50 rows"}),(0,t.jsx)("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-white/60 px-3 py-1 dark:border-slate-800 dark:bg-slate-950/35",children:"Max 5,000 rows / 50 columns"})]}),(0,t.jsxs)("div",{className:"mt-4 rounded-2xl border border-slate-200/60 bg-gradient-to-b from-white/70 to-white/40 p-3 dark:border-slate-800/70 dark:from-slate-950/35 dark:to-slate-950/20",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"text-[11px] font-medium uppercase tracking-[0.18em] text-slate-500 dark:text-slate-400",children:"Selected store"}),eo?(0,t.jsx)("span",{className:u("inline-flex items-center rounded-full border px-2 py-0.5 text-[11px]",p(eo.status)),children:eo.status??"unknown"}):null]}),eo?(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate font-semibold text-slate-900 dark:text-slate-50",children:eo.name??eo.provider}),(0,t.jsxs)("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:["Provider: ",(0,t.jsx)("span",{className:"font-medium",children:eo.provider})]}),(0,t.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Last synced: ",eo.last_synced_at?new Date(eo.last_synced_at).toLocaleString():"—"]})]}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[(0,t.jsx)("button",{onClick:()=>ex(eo.id),className:u(ek,"h-9 px-2 text-xs"),children:"Test"}),(0,t.jsx)("button",{onClick:()=>em(eo.id),className:u(ey,"h-9 px-3 text-xs"),children:"Sync"}),(0,t.jsx)("button",{onClick:()=>en(eo.id),className:u(ek,"h-9 px-2 text-xs"),children:"Details"})]}),(0,t.jsx)("div",{className:"mt-3 text-xs",children:"ready"===eo.status?(0,t.jsx)("span",{className:"text-emerald-700 dark:text-emerald-200",children:"Connected"}):"failed"===eo.status?(0,t.jsxs)("span",{className:"text-rose-700 dark:text-rose-200",children:["Failed — ",eo.last_error??"see details"]}):(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-300",children:"Not ready"})})]}):(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-600 dark:text-slate-300",children:"Select a store to enable actions."})]})]}),(0,t.jsx)("style",{children:`
                  [data-connector-shell] .shadow,
                  [data-connector-shell] .shadow-sm,
                  [data-connector-shell] .shadow-md,
                  [data-connector-shell] .shadow-lg { box-shadow: none !important; }

                  [data-connector-shell] .bg-white:not(button):not(input):not(select):not(textarea) {
                    background: transparent !important;
                  }
                  [data-connector-shell] .border:not(button):not(input):not(select):not(textarea) {
                    border-color: transparent !important;
                  }
                `})]})}),(0,t.jsxs)("div",{className:"lg:col-span-8 space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("h1",{className:"text-xl font-semibold leading-tight text-slate-900 dark:text-slate-50",children:["Upload &"," ",(0,t.jsx)("span",{className:u("bg-clip-text text-transparent headline-grad","bg-[linear-gradient(90deg,rgba(34,211,238,1),rgba(56,189,248,1),rgba(52,211,153,1),rgba(244,114,182,1),rgba(250,204,21,1))]"),children:"Run Import"})]}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Create an import job (upload or sync), then run your pipeline."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{let e=new Blob([["sku,title,description,price,inventory,weight,brand",...[["SKU-001","Sample product","Desc","19.99","10","0.5","Brand"]].map(e=>e.map(e=>`"${String(e).replace(/"/g,'""')}"`).join(","))].join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="import-sample.csv",s.click(),URL.revokeObjectURL(t),f?.info?.("Sample CSV downloaded")},className:u(ek,"h-9 px-3 text-xs"),children:"Download sample CSV"}),(0,t.jsx)("a",{href:"/imports",className:u(ek,"h-9 px-3 text-xs"),children:"Import history"})]})]}),(0,t.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/60 p-3 dark:border-slate-800 dark:bg-slate-950/35",children:(0,t.jsx)(l,{bucket:"imports",mappingPreset:C,onCreated:async e=>{e?(O(e),f.success(`Import job created: ${e}.`),M?await eb(e):eu(e).catch(()=>null),await ed(),await ec()):f.info("Import created.")}})}),(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white/70 p-3 dark:border-slate-800 dark:bg-slate-950/35",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-3 lg:grid-cols-12 lg:items-end",children:[(0,t.jsxs)("div",{className:"lg:col-span-7",children:[(0,t.jsx)("label",{className:"text-[11px] font-medium uppercase tracking-[0.18em] text-slate-500 dark:text-slate-400",children:"Ingestion ID / Job"}),(0,t.jsxs)("div",{className:"mt-1 grid grid-cols-12 gap-2",children:[(0,t.jsx)("div",{className:"col-span-9",children:(0,t.jsx)("input",{value:T,onChange:e=>O(e.target.value),className:"h-10 w-full rounded-xl border border-slate-300 bg-white/80 px-3 text-sm text-slate-900 placeholder:text-slate-400 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/25 dark:border-slate-700 dark:bg-slate-950/55 dark:text-slate-50 dark:placeholder:text-slate-500"})}),(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsx)("button",{onClick:()=>{if(!T)return f.error("No ingestion id to delete");er(T),es(!0)},className:u(ek,"w-full"),"aria-label":"Delete ingestion job",children:"Delete"})})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-5",children:[(0,t.jsx)("label",{className:"text-[11px] font-medium uppercase tracking-[0.18em] text-slate-500 dark:text-slate-400",children:"Optional: Sync from store"}),(0,t.jsxs)("div",{className:"mt-1 grid grid-cols-12 gap-2",children:[(0,t.jsx)("div",{className:"col-span-8",children:(0,t.jsxs)("select",{value:S,onChange:e=>_(e.target.value),className:u("h-10 rounded-xl border border-slate-300 bg-white/80 px-3 text-sm text-slate-900 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/25 dark:border-slate-700 dark:bg-slate-950/55 dark:text-slate-50","w-full"),children:[(0,t.jsx)("option",{value:"",children:"Select connector…"}),k.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name??e.provider},e.id))]})}),(0,t.jsx)("div",{className:"col-span-4",children:(0,t.jsx)("button",{onClick:()=>{S?em(S):f.error("Select a connector")},className:u(ey,"w-full"),children:"Sync"})})]})]}),(0,t.jsx)("div",{className:"lg:col-span-8",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-5 pt-1",children:[(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:D,onChange:e=>A(e.target.checked)}),(0,t.jsx)("span",{className:"text-xs text-slate-700 dark:text-slate-200",children:"Allow overwrite existing SKU"})]}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:M,onChange:e=>F(e.target.checked)}),(0,t.jsx)("span",{className:"text-xs text-slate-700 dark:text-slate-200",children:"Auto-run after upload"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)(c,{provider:eo?.provider,onSelect:e=>{I(e??null),f?.info?.("Mapping preset selected")}}),C?(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs dark:border-slate-800 dark:bg-slate-950/50",children:[(0,t.jsx)("span",{className:"max-w-[260px] truncate",children:C?.name??C?.id??String(C)}),(0,t.jsx)("button",{onClick:()=>{I(null),f?.info?.("Mapping preset cleared")},className:"rounded-full border border-slate-200 bg-white px-2 py-0.5 text-[11px] hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-950/60 dark:hover:bg-slate-950",children:"Clear"})]}):null]})]})}),(0,t.jsx)("div",{className:"lg:col-span-4",children:(0,t.jsx)("button",{onClick:()=>eb(),disabled:W,className:u(ey,"w-full"),"aria-label":"Run import",children:W?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{}),"Running…"]}):"Run Import"})})]}),Z?(0,t.jsx)("div",{className:"mt-3 rounded-2xl border border-rose-200 bg-rose-50 p-3 text-sm text-rose-800 dark:border-rose-500/40 dark:bg-rose-950/30 dark:text-rose-100",children:Z}):null]})]})]})}),(0,t.jsx)("section",{className:"rounded-3xl border border-slate-200 bg-white/92 shadow-[0_18px_45px_rgba(148,163,184,0.18)] backdrop-blur dark:border-slate-800 dark:bg-slate-950/55",children:(0,t.jsxs)("div",{className:"p-4 lg:p-5",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:"Live pipeline"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Progress, module status, logs, and output refs."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Progress: ",eN,"%"]}),(0,t.jsx)("div",{className:"h-2 w-44 overflow-hidden rounded-full bg-slate-200 dark:bg-slate-800",children:(0,t.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-cyan-400 via-sky-400 to-emerald-400",style:{width:`${eN}%`}})})]})]}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-4 lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Pipeline modules"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(z?.modules??[]).slice().sort((e,t)=>e.module_index-t.module_index).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-slate-50/60 p-3 dark:border-slate-800 dark:bg-slate-950/35",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"font-medium truncate",children:[e.module_index,". ",String(e.module_name)]}),(0,t.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:["output_ref: ",(0,t.jsx)("span",{className:"font-mono",children:e.output_ref??"—"})]})]}),(0,t.jsxs)("div",{className:"shrink-0 text-right",children:[(0,t.jsx)("div",{className:u("inline-flex items-center rounded-full border px-2 py-0.5 text-xs",p(e.status)),children:e.status}),(0,t.jsx)("div",{className:"text-xs mt-1 text-slate-600 dark:text-slate-300",children:function(e){if(null==e||Number.isNaN(e))return"—";if(e<1e3)return`${e}ms`;let t=Math.round(e/100)/10;return`${t}s`}(ew.get(e.module_name)??null)}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.module_index,void(!q?f.error("No pipeline run selected"):(E({runId:q,index:t}),$(!0)))},className:u(ek,"h-9 mt-2 px-2 text-xs"),children:"View logs"})]})]},`${e.module_index}-${e.module_name}`)),!(z?.modules??[]).length&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"No active run selected."}),(0,t.jsx)(b,{}),(0,t.jsx)(b,{})]})]}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(d,{ingestionId:T,pipelineId:q})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Import artifact"}),(0,t.jsx)("pre",{className:"max-h-[340px] overflow-auto rounded-2xl border border-slate-800 bg-slate-900/95 p-3 text-[11px] text-slate-100 dark:bg-slate-950/70",children:G?JSON.stringify(G,null,2):"Run an import to see artifact JSON."}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Download results"}),(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,t.jsx)("button",{onClick:()=>{var e;let t,s,a;return e=`import-result-${ef?.id??T??"unknown"}.json`,t=new Blob([JSON.stringify({ingestionId:ef?.id??T??null,pipelineRunId:q||null,diagnostics_import:ej??null,import_artifact:G??null},null,2)],{type:"application/json"}),s=URL.createObjectURL(t),void((a=document.createElement("a")).href=s,a.download=e,a.click(),URL.revokeObjectURL(s))},className:u("h-10 inline-flex items-center justify-center rounded-xl px-3 text-sm font-semibold text-white shadow-sm transition bg-slate-900 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-500/30 disabled:opacity-60 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-100","h-9 px-3 text-xs"),children:"Export JSON"}),(0,t.jsx)("button",{onClick:()=>h(T,f),className:u(ek,"h-9 px-3 text-xs"),children:"Download failed rows"}),(0,t.jsx)("a",{href:"/imports",className:u(ek,"h-9 px-3 text-xs"),children:"Import history"})]})]})]})]})]})}),(0,t.jsx)("section",{className:"rounded-3xl border border-slate-200 bg-white/92 backdrop-blur dark:border-slate-800 dark:bg-slate-950/55",children:(0,t.jsxs)("div",{className:"p-4 lg:p-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:"Ingestion (context)"}),(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Persisted diagnostics & raw payload"})]}),(0,t.jsx)("pre",{className:"mt-3 max-h-[360px] overflow-auto rounded-2xl border border-slate-800 bg-slate-900/95 p-3 text-[11px] text-slate-100 dark:bg-slate-950/70",children:ef?JSON.stringify(ef,null,2):"Load an ingestion to view persisted diagnostics."})]})})]}),U&&(0,t.jsx)(o,{open:R,runId:U.runId,moduleIndex:U.index,onClose:()=>$(!1)}),(0,t.jsx)(x.default,{integrationId:el,isOpen:!!el,onClose:()=>en("")}),(0,t.jsx)(m.ConfirmDialog,{open:et,onCancel:()=>es(!1),title:"Delete import job",description:`Delete import job ${ea}? This cannot be undone.`,onConfirm:async()=>{if(es(!1),ea)try{let e=await fetch(`/api/v1/imports/${encodeURIComponent(ea)}`,{method:"DELETE"}),t=await e.json().catch(()=>null);if(!e.ok||!t?.ok)return void f.error(t?.error??"Delete failed");f.success("Import deleted"),O(""),B(null),er(null)}catch(e){f.error(String(e?.message??e))}}})]})}e.s(["default",()=>f],21781)}]);