(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99146,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(27085),i=e.i(18566);function a(){let{isLoaded:e,isSignedIn:a}=(0,r.useUser)(),l=(0,i.useRouter)(),[n,o]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),[d,m]=(0,s.useState)("starter");async function h(){if(e){if(!a)return void l.push("/sign-in?redirect=/trial-setup");o(!0),u(null);try{let e=await fetch("/api/checkout/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:d})}),t=await e.json();if(!e.ok||!t?.url)throw Error(t?.error||"Failed to create checkout session");window.location.href=t.url}catch(e){u(e.message||"Unknown error"),console.error("startCheckout error",e)}finally{o(!1)}}}return e?(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"max-w-md w-full p-8 bg-white rounded shadow",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Start trial"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:"Start your free trial â€” complete subscription to unlock premium features."}),c&&(0,t.jsx)("div",{className:"mt-4 text-red-600",children:c}),a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"block text-sm",children:"Choose plan"}),(0,t.jsxs)("select",{value:d,onChange:e=>m(e.target.value),className:"mt-2",children:[(0,t.jsx)("option",{value:"starter",children:"Starter"}),(0,t.jsx)("option",{value:"growth",children:"Growth"}),(0,t.jsx)("option",{value:"pro",children:"Pro"})]})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)("button",{onClick:h,disabled:n,className:"btn-primary",children:n?"Starting...":"Start free trial"})})]}):(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("p",{className:"text-sm",children:"You must sign in to start a trial."}),(0,t.jsx)("button",{className:"btn-primary mt-2",onClick:()=>l.push("/sign-in?redirect=/trial-setup"),disabled:!e,children:"Sign in / Sign up"})]})]})}):null}e.s(["default",()=>a])}]);