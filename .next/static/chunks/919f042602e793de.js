(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22834,e=>{"use strict";var t=e.i(43476),a=e.i(71645);function s(){let[e,s]=(0,a.useState)([]),[l,n]=(0,a.useState)(!1),[i,r]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[o,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{d&&(async()=>{let e=await fetch(`/api/v1/api-keys?tenant_id=${encodeURIComponent(d)}`);s((await e.json()).keys||[])})()},[d]);let h=async()=>{if(!i||!d)return;n(!0);let e=await fetch("/api/v1/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_id:d,name:i})}),t=await e.json();n(!1),t.key&&m(t.key);let a=await fetch(`/api/v1/api-keys?tenant_id=${encodeURIComponent(d)}`);s((await a.json()).keys||[]),r("")},p=async e=>{await fetch("/api/v1/api-keys",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});let t=await fetch(`/api/v1/api-keys?tenant_id=${encodeURIComponent(d)}`);s((await t.json()).keys||[])};return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"API Keys"}),(0,t.jsx)("p",{className:"mb-4 text-sm text-gray-600",children:"Manage programmatic access to your AvidiaTech tenant.  Only owners and admins can create or revoke keys."}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Tenant ID",className:"border rounded px-2 py-1 mr-2 text-sm"}),(0,t.jsx)("input",{type:"text",value:i,onChange:e=>r(e.target.value),placeholder:"Key name",className:"border rounded px-2 py-1 mr-2 text-sm"}),(0,t.jsx)("button",{onClick:h,disabled:!d||!i||l,className:"bg-blue-600 hover:bg-blue-700 text-white text-sm px-3 py-1 rounded",children:l?"Creating…":"Create key"})]}),o&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-gray-800",children:[(0,t.jsx)("p",{className:"font-semibold mb-1",children:"New key generated"}),(0,t.jsx)("p",{className:"break-all",children:(0,t.jsx)("code",{children:o})}),(0,t.jsx)("p",{className:"text-red-600 mt-1",children:"This is the only time you’ll see the full key. Store it securely."})]}),(0,t.jsxs)("table",{className:"min-w-full text-sm border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b text-left",children:[(0,t.jsx)("th",{className:"py-2",children:"Name"}),(0,t.jsx)("th",{className:"py-2",children:"Prefix"}),(0,t.jsx)("th",{className:"py-2",children:"Created"}),(0,t.jsx)("th",{className:"py-2",children:"Revoked"}),(0,t.jsx)("th",{className:"py-2"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-2",children:e.name}),(0,t.jsx)("td",{className:"py-2",children:e.prefix}),(0,t.jsx)("td",{className:"py-2",children:e.created_at?.slice(0,10)}),(0,t.jsx)("td",{className:"py-2",children:e.revoked_at?e.revoked_at.slice(0,10):"-"}),(0,t.jsx)("td",{className:"py-2",children:!e.revoked_at&&(0,t.jsx)("button",{onClick:()=>p(e.id),className:"text-red-600 hover:underline",children:"Revoke"})})]},e.id))})]})]})}e.s(["default",()=>s])}]);