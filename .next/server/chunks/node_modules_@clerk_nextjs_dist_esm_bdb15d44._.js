module.exports=[7218,e=>{"use strict";e.i(78417);var t=e.i(51564);e.i(51783);var r=e.i(79509),n=e.i(57594),s=e.i(86883),a=e.i(78295),i=e.i(73271);let o={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401};Object.values(o);let u="NEXT_HTTP_ERROR_FALLBACK";function l(){let e=Error(u);throw e.digest=`${u};${o.UNAUTHORIZED}`,e}var c=e.i(63177);let d=e=>{var r,n;return!!e.headers.get(c.constants.Headers.NextUrl)&&!(e.headers.get(c.constants.Headers.NextUrl)&&((null==(r=e.headers.get(t.constants.Headers.Accept))?void 0:r.includes("text/x-component"))||(null==(n=e.headers.get(t.constants.Headers.ContentType))?void 0:n.includes("multipart/form-data"))||e.headers.get(c.constants.Headers.NextAction)))||h()},h=()=>{let e=globalThis.fetch;if(!("__nextPatched"in e&&!0===e.__nextPatched))return!1;let{page:t,pagePath:r}=e.__nextGetStaticStore().getStore()||{};return!!(r||t)},g=e=>!!e.headers.get(c.constants.Headers.NextjsData);var p=e.i(13832),y=e.i(78538),T=e.i(15484);let k=async o=>{var u;e.r(23502);let l=await (0,T.buildRequestLike)(),c=async()=>{if(y.isNextWithUnstableServerActions)return[];try{let t=await e.A(29652).then(e=>e.hasSrcAppDir());return[`Your Middleware exists at ./${t?"src/":""}middleware.(ts|js)`]}catch{return[]}},d=await (0,s.createAsyncGetAuth)({debugLoggerName:"auth()",noAuthStatusMessage:(0,a.authAuthHeaderMissing)("auth",await c())})(l,{treatPendingAsSignedOut:null==o?void 0:o.treatPendingAsSignedOut,acceptsToken:null!=(u=null==o?void 0:o.acceptsToken)?u:t.TokenType.SessionToken}),h=(0,i.getAuthKeyFromRequest)(l,"ClerkUrl"),g=(...e)=>{let{returnBackUrl:s}=e[0]||{},a=(0,t.createClerkRequest)(l),o=a.clerkUrl.searchParams.get(t.constants.QueryParameters.DevBrowser)||a.cookies.get(t.constants.Cookies.DevBrowser),u=(0,i.getHeader)(l,t.constants.Headers.ClerkRequestData),c=(0,p.decryptClerkRequestData)(u);return[(0,t.createRedirect)({redirectAdapter:r.redirect,devBrowserToken:o,baseUrl:a.clerkUrl.toString(),publishableKey:c.publishableKey||n.PUBLISHABLE_KEY,signInUrl:c.signInUrl||n.SIGN_IN_URL,signUpUrl:c.signUpUrl||n.SIGN_UP_URL,sessionStatus:d.tokenType===t.TokenType.SessionToken?d.sessionStatus:null}),null===s?"":s||(null==h?void 0:h.toString())]};return d.tokenType===t.TokenType.SessionToken?Object.assign(d,{redirectToSignIn:(e={})=>{let[t,r]=g(e);return t.redirectToSignIn({returnBackUrl:r})},redirectToSignUp:(e={})=>{let[t,r]=g(e);return t.redirectToSignUp({returnBackUrl:r})}}):d};k.protect=async(...n)=>{var s,a;e.r(23502);let i=await (0,T.buildRequestLike)(),o=(null==(s=null==n?void 0:n[0])?void 0:s.token)||(null==(a=null==n?void 0:n[1])?void 0:a.token)||t.TokenType.SessionToken,u=await k({acceptsToken:o});return(function(e){let{redirectToSignIn:r,authObject:n,redirect:s,notFound:a,request:i,unauthorized:o}=e;return async(...e)=>{var u,l,c,h,p,y,T,k;let A=(e=>{if(e&&!e.unauthenticatedUrl&&!e.unauthorizedUrl&&!e.token&&(1!==Object.keys(e).length||!("token"in e)))return e})(e[0]),S=(null==(u=e[0])?void 0:u.unauthenticatedUrl)||(null==(l=e[1])?void 0:l.unauthenticatedUrl),m=(null==(c=e[0])?void 0:c.unauthorizedUrl)||(null==(h=e[1])?void 0:h.unauthorizedUrl),f=(null==(p=e[0])?void 0:p.token)||(null==(y=e[1])?void 0:y.token)||t.TokenType.SessionToken,v=()=>n.tokenType!==t.TokenType.SessionToken?o():m?s(m):a();if(!(0,t.isTokenTypeAccepted)(n.tokenType,f))return v();if(n.tokenType!==t.TokenType.SessionToken)return n.isAuthenticated?n:v();if("pending"===n.sessionStatus||!n.userId){return S?s(S):"document"===(T=i).headers.get(t.constants.Headers.SecFetchDest)||"iframe"===T.headers.get(t.constants.Headers.SecFetchDest)||(null==(k=T.headers.get(t.constants.Headers.Accept))?void 0:k.includes("text/html"))||d(T)||g(T)?r():a()}return A?"function"==typeof A?A(n.has)?n:v():n.has(A)?n:v():n}})({request:i,authObject:u,redirectToSignIn:u.redirectToSignIn,notFound:r.notFound,redirect:r.redirect,unauthorized:l})(...n)},e.s(["auth",()=>k],7218)},86883,e=>{"use strict";e.i(78417);var t=e.i(51564);e.i(40726);var r=e.i(62790),n=e.i(347);let s=e=>{if(!e||"string"!=typeof e)return e;try{return(e||"").replace(/^(sk_(live|test)_)(.+?)(.{3})$/,"$1*********$4")}catch{return""}},a=e=>(Array.isArray(e)?e:[e]).map(e=>"string"==typeof e?s(e):JSON.stringify(Object.fromEntries(Object.entries(e).map(([e,t])=>[e,s(t)])),null,2)).join(", "),i=(e,t)=>(...r)=>{let s=("string"==typeof e?()=>{let t=[],r=!1;return{enable:()=>{r=!0},debug:(...e)=>{r&&t.push(e.map(e=>"function"==typeof e?e():e))},commit:()=>{if(r){var s,i;for(let r of(console.log((s=e,`[clerk debug start: ${s}]`)),t)){let e=a(r);e=e.split("\n").map(e=>`  ${e}`).join("\n"),process.env.VERCEL&&(e=function(e,t){let r=new TextEncoder,n=new TextDecoder("utf-8"),s=r.encode(e).slice(0,4096);return n.decode(s).replace(/\uFFFD/g,"")}(e,4096)),console.log(e)}console.log((i=e,`[clerk debug end: ${i}] (@clerk/nextjs=6.36.2,next=${n.default.version},timestamp=${Math.round(new Date().getTime()/1e3)})`))}}}}:e)(),i=t(s);try{let e=i(...r);if("object"==typeof e&&"then"in e&&"function"==typeof e.then)return e.then(e=>(s.commit(),e)).catch(e=>{throw s.commit(),e});return s.commit(),e}catch(e){throw s.commit(),e}};var o=e.i(78538),u=e.i(39184),l=e.i(10698),c=e.i(52119);function d(e){let t=JSON.stringify(e),r=new TextEncoder().encode(t);return l.base64url.stringify(r,{pad:!1})}async function h(e,t,r){if(!r.algorithm)throw Error("No algorithm specified");let n=new TextEncoder,s=(0,l.getCryptoAlgorithm)(r.algorithm);if(!s)return{errors:[new c.SignJWTError(`Unsupported algorithm ${r.algorithm}`)]};let a=await (0,l.importKey)(t,s,"sign"),i=r.header||{typ:"JWT"};i.alg=r.algorithm,e.iat=Math.floor(Date.now()/1e3);let o=d(i),u=d(e),h=`${o}.${u}`;try{let e=await l.runtime.crypto.subtle.sign(s,a,n.encode(h));return{data:`${h}.${l.base64url.stringify(new Uint8Array(e),{pad:!1})}`}}catch(e){return{errors:[new c.SignJWTError(e?.message)]}}}e.i(1618),(0,u.withLegacyReturn)(l.verifyJwt);var g=(0,u.withLegacySyncReturn)(l.decodeJwt);(0,u.withLegacyReturn)(h),(0,u.withLegacyReturn)(l.hasValidSignature);var p=e.i(57594),y=e.i(73271),T=e.i(13832);let k=e=>({authStatus:(0,y.getAuthKeyFromRequest)(e,"AuthStatus"),authToken:(0,y.getAuthKeyFromRequest)(e,"AuthToken"),authMessage:(0,y.getAuthKeyFromRequest)(e,"AuthMessage"),authReason:(0,y.getAuthKeyFromRequest)(e,"AuthReason"),authSignature:(0,y.getAuthKeyFromRequest)(e,"AuthSignature")}),A=(e,r,n=!0)=>{let s=(0,y.getHeader)(e,t.constants.Headers.ClerkRequestData),a=(0,T.decryptClerkRequestData)(s);return{secretKey:(null==r?void 0:r.secretKey)||a.secretKey||p.SECRET_KEY,publishableKey:a.publishableKey||p.PUBLISHABLE_KEY,apiUrl:p.API_URL,apiVersion:p.API_VERSION,authStatus:(0,y.getAuthKeyFromRequest)(e,"AuthStatus"),authMessage:(0,y.getAuthKeyFromRequest)(e,"AuthMessage"),authReason:(0,y.getAuthKeyFromRequest)(e,"AuthReason"),treatPendingAsSignedOut:n}},S=(e,{treatPendingAsSignedOut:r=!0,...n}={})=>{var s,a;let{authStatus:i,authMessage:o,authReason:u,authToken:l,authSignature:c}=k(e);null==(s=n.logger)||s.debug("headers",{authStatus:i,authMessage:o,authReason:u});let d=A(e,n,r);if(!(0,t.isTokenTypeAccepted)(t.TokenType.SessionToken,n.acceptsToken||t.TokenType.SessionToken))return(0,t.signedOutAuthObject)(d);if(i&&i===t.AuthStatus.SignedIn){(0,T.assertTokenSignature)(l,d.secretKey,c);let e=g(l);return null==(a=n.logger)||a.debug("jwt",e.raw),(0,t.getAuthObjectFromJwt)(e,d)}return(0,t.signedOutAuthObject)(d)};var m=e.i(78295);let f=({debugLoggerName:n,noAuthStatusMessage:s})=>i(n,n=>async(a,i)=>{if((0,r.isTruthy)((0,y.getHeader)(a,t.constants.Headers.EnableDebug))&&n.enable(),!(0,y.detectClerkMiddleware)(a)){o.isNextWithUnstableServerActions&&(0,T.assertAuthStatus)(a,s);let t=await e.A(29652).then(e=>e.suggestMiddlewareLocation()).catch(()=>void 0);if(t)throw Error(t);(0,T.assertAuthStatus)(a,s)}return((e,r={})=>((e,r={})=>{var n,s;let{authStatus:a,authMessage:i,authReason:o}=k(e);null==(n=r.logger)||n.debug("headers",{authStatus:a,authMessage:i,authReason:o});let u=(0,y.getHeader)(e,t.constants.Headers.ClerkRequestData),l=(0,T.decryptClerkRequestData)(u),c=null==(s=(0,y.getHeader)(e,t.constants.Headers.Authorization))?void 0:s.replace("Bearer ",""),d=r.acceptsToken||t.TokenType.SessionToken,h=A(e,r),g=((e,r,n,s)=>{let a=e&&(0,t.isMachineTokenByPrefix)(e),i=n===t.TokenType.SessionToken||Array.isArray(n)&&1===n.length&&n[0]===t.TokenType.SessionToken;if(a&&r&&!i){let a=(0,t.getAuthObjectForAcceptedToken)({authObject:{...r,debug:()=>s},acceptsToken:n});return{...a,getToken:()=>a.isAuthenticated?Promise.resolve(e):Promise.resolve(null),has:()=>!1}}return null})(c,l.machineAuthObject,d,h);return g||(c&&Array.isArray(d)&&!d.includes(t.TokenType.SessionToken)?(0,t.invalidTokenAuthObject)():S(e,r))})(e,{...r,logger:n,acceptsToken:null==r?void 0:r.acceptsToken}))(a,{...i,logger:n,acceptsToken:null==i?void 0:i.acceptsToken})}),v=(({debugLoggerName:e,noAuthStatusMessage:n})=>i(e,e=>(s,a)=>((0,r.isTruthy)((0,y.getHeader)(s,t.constants.Headers.EnableDebug))&&e.enable(),(0,T.assertAuthStatus)(s,n),((t,r={})=>S(t,{...r,logger:e,acceptsToken:null==r?void 0:r.acceptsToken}))(s,{...a,logger:e,acceptsToken:null==a?void 0:a.acceptsToken}))))({debugLoggerName:"getAuth()",noAuthStatusMessage:(0,m.getAuthAuthHeaderMissing)()});e.s(["createAsyncGetAuth",()=>f,"getAuth",()=>v],86883)},15484,e=>{"use strict";var t=e.i(89171);let r=e=>{if(!(e instanceof Error)||!("message"in e))return!1;let{message:t}=e,r=t.toLowerCase(),n=r.includes("dynamic server usage"),s=r.includes("this page needs to bail out of prerendering");return/Route .*? needs to bail out of prerendering at this point because it used .*?./.test(t)||n||s};async function n(){try{let{headers:r}=await e.A(6878),n=await r();return new t.NextRequest("https://placeholder.com",{headers:n})}catch(e){if(e&&r(e))throw e;throw Error(`Clerk: auth(), currentUser() and clerkClient(), are only supported in App Router (/app directory).
If you're using /pages, try getAuth() instead.
Original error: ${e}`)}}e.s(["buildRequestLike",()=>n,"isPrerenderingBailout",()=>r])}];

//# sourceMappingURL=node_modules_%40clerk_nextjs_dist_esm_bdb15d44._.js.map