module.exports=[90314,e=>{"use strict";e.s([],8874),e.i(8874);var t=e.i(96143),r=e.i(10343);e.s(["FunctionRegion",()=>r.FunctionRegion,"FunctionsClient",()=>t.FunctionsClient,"FunctionsError",()=>r.FunctionsError,"FunctionsFetchError",()=>r.FunctionsFetchError,"FunctionsHttpError",()=>r.FunctionsHttpError,"FunctionsRelayError",()=>r.FunctionsRelayError],90314)},82715,(e,t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});var s=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},a=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!=(t=e.shouldThrowOnError)&&t,this.signal=e.signal,this.isMaybeSingle=null!=(r=e.isMaybeSingle)&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let a=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,a,n,i;let o=null,h=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==r.method){let t=await e.text();""===t||(h="text/csv"===r.headers.get("Accept")||r.headers.get("Accept")&&(null==(n=r.headers.get("Accept"))?void 0:n.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}let s=null==(t=r.headers.get("Prefer"))?void 0:t.match(/count=(exact|planned|estimated)/),i=null==(a=e.headers.get("content-range"))?void 0:a.split("/");s&&i&&i.length>1&&(l=parseInt(i[1])),r.isMaybeSingle&&"GET"===r.method&&Array.isArray(h)&&(h.length>1?(o={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,l=null,c=406,u="Not Acceptable"):h=1===h.length?h[0]:null)}else{let t=await e.text();try{o=JSON.parse(t),Array.isArray(o)&&404===e.status&&(h=[],o=null,c=200,u="OK")}catch(r){404===e.status&&""===t?(c=204,u="No Content"):o={message:t}}if(o&&r.isMaybeSingle&&(null==o||null==(i=o.details)?void 0:i.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&r.shouldThrowOnError)throw new s(o)}return{error:o,data:h,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(a=a.catch(e=>{var t,r,s,a,n,i;let o="",h=null==e?void 0:e.cause;if(h){let t=null!=(r=null==h?void 0:h.message)?r:"",i=null!=(s=null==h?void 0:h.code)?s:"";o=`${null!=(a=null==e?void 0:e.name)?a:"FetchError"}: ${null==e?void 0:e.message}

Caused by: ${null!=(n=null==h?void 0:h.name)?n:"Error"}: ${t}`,i&&(o+=` (${i})`),(null==h?void 0:h.stack)&&(o+=`
${h.stack}`)}else o=null!=(i=null==e?void 0:e.stack)?i:"";return{error:{message:`${null!=(t=null==e?void 0:e.name)?t:"FetchError"}: ${null==e?void 0:e.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},n=class extends a{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){let n=a?`${a}.order`:"order",i=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){let a=void 0===s?"offset":`${s}.offset`,n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(n,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:n="text"}={}){var i;let o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),h=null!=(i=this.headers.get("Accept"))?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${h}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};let i=RegExp("[,()]");var o=class extends n{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&i.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&i.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let a="";"plain"===s?a="pl":"phrase"===s?a="ph":"websearch"===s&&(a="w");let n=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},h=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,t){let{head:r=!1,count:s}=null!=t?t:{},a=!1,n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",n),s&&this.headers.append("Prefer",`count=${s}`),new o({method:r?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new o({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(s=this.fetch)?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var n;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new o({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(n=this.fetch)?n:fetch})}update(e,{count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new o({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(r=this.fetch)?r:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new o({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!=(t=this.fetch)?t:fetch})}},l=class e{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){if(!e||"string"!=typeof e||""===e.trim())throw Error("Invalid relation name: relation must be a non-empty string.");return new h(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:a}={}){var n;let i,h,l=new URL(`${this.url}/rpc/${e}`);r||s?(i=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(i="POST",h=t);let c=new Headers(this.headers);return a&&c.set("Prefer",`count=${a}`),new o({method:i,url:l,headers:c,schema:this.schemaName,body:h,fetch:null!=(n=this.fetch)?n:fetch})}};r.PostgrestBuilder=a,r.PostgrestClient=l,r.PostgrestError=s,r.PostgrestFilterBuilder=o,r.PostgrestQueryBuilder=h,r.PostgrestTransformBuilder=n,r.default={PostgrestClient:l,PostgrestQueryBuilder:h,PostgrestFilterBuilder:o,PostgrestTransformBuilder:n,PostgrestBuilder:a,PostgrestError:s}},5511,e=>{"use strict";e.i(55633);var t=e.i(26468),r=e.i(84400),s=e.i(54174),a=e.i(44413);e.s(["REALTIME_CHANNEL_STATES",()=>r.REALTIME_CHANNEL_STATES,"REALTIME_LISTEN_TYPES",()=>r.REALTIME_LISTEN_TYPES,"REALTIME_POSTGRES_CHANGES_LISTEN_EVENT",()=>r.REALTIME_POSTGRES_CHANGES_LISTEN_EVENT,"REALTIME_PRESENCE_LISTEN_EVENTS",()=>s.REALTIME_PRESENCE_LISTEN_EVENTS,"REALTIME_SUBSCRIBE_STATES",()=>r.REALTIME_SUBSCRIBE_STATES,"RealtimeChannel",()=>r.default,"RealtimeClient",()=>t.default,"RealtimePresence",()=>s.default,"WebSocketFactory",()=>a.default])},46114,(e,t,r)=>{"use strict";var s=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};async function a(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}function n(e){return e.join("\x1f")}var i=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:n(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){let r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${n(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${n(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${n(e.namespace)}`}),!0}catch(e){if(e instanceof s&&404===e.status)return!1;throw e}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(e){if(e instanceof s&&409===e.status)return;throw e}}};function o(e){return e.join("\x1f")}var h=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${o(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${o(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){let r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${o(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${o(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${o(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${o(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(e){if(e instanceof s&&404===e.status)return!1;throw e}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof s&&409===r.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},l=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=function(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:o,headers:h}){let l=function(e,t,r){let s=new URL(t,e);if(r)for(let[e,t]of Object.entries(r))void 0!==t&&s.searchParams.set(e,t);return s.toString()}(e.baseUrl,n,i),c=await a(e.auth),u=await t(l,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...c,...h},body:o?JSON.stringify(o):void 0}),d=await u.text(),p=(u.headers.get("content-type")||"").includes("application/json"),f=p&&d?JSON.parse(d):d;if(!u.ok){let e=p?f:void 0,t=e?.error;throw new s(t?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:t?.type,icebergCode:t?.code,details:e})}return{status:u.status,headers:u.headers,data:f}}}}({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new i(this.client,t),this.tableOps=new h(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},c=/^decimal\s*\(\s*(\d+)\s*,\s*(\d+)\s*\)$/,u=/^fixed\s*\[\s*(\d+)\s*\]$/;function d(e){let t=e.match(c);return t?{precision:parseInt(t[1],10),scale:parseInt(t[2],10)}:null}function p(e){let t=e.match(u);return t?{length:parseInt(t[1],10)}:null}r.IcebergError=s,r.IcebergRestCatalog=l,r.getCurrentSchema=function(e){return e.schemas.find(t=>t["schema-id"]===e["current-schema-id"])},r.isDecimalType=function(e){return c.test(e)},r.isFixedType=function(e){return u.test(e)},r.parseDecimalType=d,r.parseFixedType=p,r.typesEqual=function(e,t){let r=d(e),s=d(t);if(r&&s)return r.precision===s.precision&&r.scale===s.scale;let a=p(e),n=p(t);return a&&n?a.length===n.length:e===t}},72593,(e,t,r)=>{let s,a=e.r(46114);var n,i=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function o(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}var h=class extends i{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},l=class extends i{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};let c=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),u=e=>{if(Array.isArray(e))return e.map(e=>u(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,r])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=u(r)}),t};function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){!function(e,t,r){var s;(s=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=d(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==d(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let m=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null==(t=e.error)?void 0:t.message)||JSON.stringify(e)},y=async(e,t,r)=>{e instanceof await Response&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{let s=e.status||500,a=(null==r?void 0:r.statusCode)||s+"";t(new h(m(r),s,a))}).catch(e=>{t(new l(m(e),e))}):t(new l(m(e),e))};async function w(e,t,r,s,a,n){return new Promise((i,o)=>{let h;e(r,(h={method:t,headers:(null==s?void 0:s.headers)||{}},"GET"===t||!n?h:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(h.headers=f({"Content-Type":"application/json"},null==s?void 0:s.headers),h.body=JSON.stringify(n)):h.body=n,(null==s?void 0:s.duplex)&&(h.duplex=s.duplex),f(f({},h),a)))).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>y(e,o,s))})}async function g(e,t,r,s){return w(e,"GET",t,r,s)}async function b(e,t,r,s,a){return w(e,"POST",t,s,a,r)}async function E(e,t,r,s,a){return w(e,"PUT",t,s,a,r)}async function v(e,t,r,s){return w(e,"HEAD",t,f(f({},r),{},{noResolveJson:!0}),s)}async function T(e,t,r,s,a){return w(e,"DELETE",t,s,a,r)}var $=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}};s=Symbol.toStringTag;var O=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[s]="BlobDownloadBuilder",this.promise=null}asStream(){return new $(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await (await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}};let S={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},P={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var k=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=c(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,s){try{let a,n=f(f({},P),s),i=f(f({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)}),o=n.metadata;"undefined"!=typeof Blob&&r instanceof Blob?((a=new FormData).append("cacheControl",n.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?((a=r).has("cacheControl")||a.append("cacheControl",n.cacheControl),o&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(o))):(a=r,i["cache-control"]=`max-age=${n.cacheControl}`,i["content-type"]=n.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o))),("undefined"!=typeof ReadableStream&&a instanceof ReadableStream||a&&"object"==typeof a&&"pipe"in a&&"function"==typeof a.pipe)&&!n.duplex&&(n.duplex="half")),(null==s?void 0:s.headers)&&(i=f(f({},i),s.headers));let h=this._removeEmptyFolders(t),l=this._getFinalPath(h),c=await ("PUT"==e?E:b)(this.fetch,`${this.url}/object/${l}`,a,f({headers:i},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:h,id:c.Id,fullPath:c.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){let a=this._removeEmptyFolders(e),n=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${n}`);i.searchParams.set("token",t);try{let e,t=f({upsert:P.upsert},s),n=f(f({},this.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType),{data:{path:a,fullPath:(await E(this.fetch,i.toString(),e,{headers:n})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async createSignedUploadUrl(e,t){try{let r=this._getFinalPath(e),s=f({},this.headers);(null==t?void 0:t.upsert)&&(s["x-upsert"]="true");let a=await b(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),n=new URL(this.url+a.url),o=n.searchParams.get("token");if(!o)throw new i("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:o},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){try{return{data:await b(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async copy(e,t,r){try{return{data:{path:(await b(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async createSignedUrl(e,t,r){try{let s=this._getFinalPath(e),a=await b(this.fetch,`${this.url}/object/sign/${s}`,f({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers}),n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:a={signedUrl:encodeURI(`${this.url}${a.signedURL}${n}`)},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async createSignedUrls(e,t,r){var s=this;try{let a=await b(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:a.map(e=>f(f({},e),{},{signedUrl:e.signedURL?encodeURI(`${s.url}${e.signedURL}${n}`):null})),error:null}}catch(e){if(s.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}download(e,t){let r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=s?`?${s}`:"",n=this._getFinalPath(e);return new O(()=>g(this.fetch,`${this.url}/${r}/${n}${a}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}async info(e){let t=this._getFinalPath(e);try{return{data:u(await g(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async exists(e){let t=this._getFinalPath(e);try{return await v(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e)&&e instanceof l){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}}getPublicUrl(e,t){let r=this._getFinalPath(e),s=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&s.push(a);let n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&s.push(i);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${r}${o}`)}}}async remove(e){try{return{data:await T(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async list(e,t,r){try{let s=f(f(f({},S),t),{},{prefix:e||""});return{data:await b(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async listV2(e,t){try{let r=f({},e);return{data:await b(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};let A="2.89.0",x={"X-Client-Info":`storage-js/${A}`};var j=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const a=new URL(e);(null==s?void 0:s.useNewHostname)&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=f(f({},x),t),this.fetch=c(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){try{let t=this.listBucketOptionsToQueryString(e);return{data:await g(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async getBucket(e){try{return{data:await g(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async createBucket(e,t={public:!1}){try{return{data:await b(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async updateBucket(e,t){try{return{data:await E(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async emptyBucket(e){try{return{data:await b(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await T(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},C=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=f(f({},x),t),this.fetch=c(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){try{return{data:await b(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async listBuckets(e){try{let t=new URLSearchParams;(null==e?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:await g(this.fetch,s,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await T(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}}from(e){var t=this;if(!(!(!e||"string"!=typeof e||0===e.length||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))throw new i("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let r=new a.IcebergRestCatalog({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(e,t){let r=e[t];return"function"!=typeof r?r:async(...t)=>{try{return{data:await r.apply(e,t),error:null}}catch(e){if(s)throw e;return{data:null,error:e}}}}})}};let N={"X-Client-Info":`storage-js/${A}`,"Content-Type":"application/json"};var I=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function R(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}var _=class extends I{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},B=class extends I{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};let F=((n={}).InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded",n),U=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),V=e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},L=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),D=async(e,t,r)=>{if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==r?void 0:r.noResolveJson)){let r=e.status||500;"function"==typeof e.json?e.json().then(e=>{let s=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new _(L(e),r,s))}).catch(()=>{t(new _(e.statusText||`HTTP ${r} error`,r,r+""))}):t(new _(e.statusText||`HTTP ${r} error`,r,r+""))}else t(new B(L(e),e))};async function M(e,t,r,s,a,n){return new Promise((i,o)=>{let h;e(r,(h={method:t,headers:(null==s?void 0:s.headers)||{}},"GET"===t||!n?h:(V(n)?(h.headers=f({"Content-Type":"application/json"},null==s?void 0:s.headers),h.body=JSON.stringify(n)):h.body=n,f(f({},h),a)))).then(e=>{if(!e.ok)throw e;if(null==s?void 0:s.noResolveJson)return e;let t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>D(e,o,s))})}async function G(e,t,r,s,a){return M(e,"POST",t,s,a,r)}var H=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=f(f({},N),t),this.fetch=U(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){try{return{data:await G(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}async getIndex(e,t){try{return{data:await G(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}async listIndexes(e){try{return{data:await G(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}async deleteIndex(e,t){try{return{data:await G(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}},q=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=f(f({},N),t),this.fetch=U(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){try{if(e.vectors.length<1||e.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:await G(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}async getVectors(e){try{return{data:await G(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}async listVectors(e){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await G(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}async queryVectors(e){try{return{data:await G(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}async deleteVectors(e){try{if(e.keys.length<1||e.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:await G(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}},K=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=f(f({},N),t),this.fetch=U(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){try{return{data:await G(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}async getBucket(e){try{return{data:await G(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}async listBuckets(e={}){try{return{data:await G(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await G(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}}},J=class extends K{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new z(this.url,this.headers,e,this.fetch)}async createBucket(e){return super.createBucket.call(this,e)}async getBucket(e){return super.getBucket.call(this,e)}async listBuckets(e={}){return super.listBuckets.call(this,e)}async deleteBucket(e){return super.deleteBucket.call(this,e)}},z=class extends H{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}async createIndex(e){return super.createIndex.call(this,f(f({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(e={}){return super.listIndexes.call(this,f(f({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return super.getIndex.call(this,this.vectorBucketName,e)}async deleteIndex(e){return super.deleteIndex.call(this,this.vectorBucketName,e)}index(e){return new W(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},W=class extends q{constructor(e,t,r,s,a){super(e,t,a),this.vectorBucketName=r,this.indexName=s}async putVectors(e){return super.putVectors.call(this,f(f({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async getVectors(e){return super.getVectors.call(this,f(f({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async listVectors(e={}){return super.listVectors.call(this,f(f({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async queryVectors(e){return super.queryVectors.call(this,f(f({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async deleteVectors(e){return super.deleteVectors.call(this,f(f({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}},Q=class extends j{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new k(this.url,this.headers,e,this.fetch)}get vectors(){return new J(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new C(this.url+"/iceberg",this.headers,this.fetch)}};r.StorageAnalyticsClient=C,r.StorageApiError=h,r.StorageClient=Q,r.StorageError=i,r.StorageUnknownError=l,r.StorageVectorsApiError=_,r.StorageVectorsClient=J,r.StorageVectorsError=I,r.StorageVectorsErrorCode=F,r.StorageVectorsUnknownError=B,r.VectorBucketApi=K,r.VectorBucketScope=z,r.VectorDataApi=q,r.VectorIndexApi=H,r.VectorIndexScope=W,r.isPlainObject=V,r.isStorageError=o,r.isStorageVectorsError=R,r.normalizeToFloat32=e=>Array.from(new Float32Array(e)),r.resolveFetch=U,r.resolveResponse=()=>Response,r.validateVectorDimension=(e,t)=>{if(void 0!==t&&e.float32.length!==t)throw Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)}},51555,e=>{"use strict";e.i(19564);var t=e.i(15439),r=e.i(6477),s=e.i(83575),a=e.i(76241),n=e.i(62746),i=e.i(35963),o=e.i(82791);e.s(["AuthAdminApi",()=>s.default,"AuthApiError",()=>i.AuthApiError,"AuthClient",()=>a.default,"AuthError",()=>i.AuthError,"AuthImplicitGrantRedirectError",()=>i.AuthImplicitGrantRedirectError,"AuthInvalidCredentialsError",()=>i.AuthInvalidCredentialsError,"AuthInvalidJwtError",()=>i.AuthInvalidJwtError,"AuthInvalidTokenResponseError",()=>i.AuthInvalidTokenResponseError,"AuthPKCECodeVerifierMissingError",()=>i.AuthPKCECodeVerifierMissingError,"AuthPKCEGrantCodeExchangeError",()=>i.AuthPKCEGrantCodeExchangeError,"AuthRetryableFetchError",()=>i.AuthRetryableFetchError,"AuthSessionMissingError",()=>i.AuthSessionMissingError,"AuthUnknownError",()=>i.AuthUnknownError,"AuthWeakPasswordError",()=>i.AuthWeakPasswordError,"CustomAuthError",()=>i.CustomAuthError,"GoTrueAdminApi",()=>t.default,"GoTrueClient",()=>r.default,"NavigatorLockAcquireTimeoutError",()=>o.NavigatorLockAcquireTimeoutError,"SIGN_OUT_SCOPES",()=>n.SIGN_OUT_SCOPES,"isAuthApiError",()=>i.isAuthApiError,"isAuthError",()=>i.isAuthError,"isAuthImplicitGrantRedirectError",()=>i.isAuthImplicitGrantRedirectError,"isAuthPKCECodeVerifierMissingError",()=>i.isAuthPKCECodeVerifierMissingError,"isAuthRetryableFetchError",()=>i.isAuthRetryableFetchError,"isAuthSessionMissingError",()=>i.isAuthSessionMissingError,"isAuthWeakPasswordError",()=>i.isAuthWeakPasswordError,"lockInternals",()=>o.internals,"navigatorLock",()=>o.navigatorLock,"processLock",()=>o.processLock])},91020,(e,t,r)=>{let s=e.r(90314),a=e.r(82715),n=e.r(5511),i=e.r(72593),o=e.r(51555),h="";h="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let l={headers:{"X-Client-Info":`supabase-js-${h}/2.89.0`}},c={schema:"public"},u={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},d={};function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){!function(e,t,r){var s;(s=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=p(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==p(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=class extends o.AuthClient{constructor(e){super(e)}},w=class{constructor(e,t,r){var s,n,o;this.supabaseUrl=e,this.supabaseKey=t;const h=function(e){let t=null==e?void 0:e.trim();if(!t)throw Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t.endsWith("/")?t:t+"/")}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const p=`sb-${h.hostname.split(".")[0]}-auth-token`,f=function(e,t){var r,s;let{db:a,auth:n,realtime:i,global:o}=e,{db:h,auth:l,realtime:c,global:u}=t,d={db:m(m({},h),a),auth:m(m({},l),n),realtime:m(m({},c),i),storage:{},global:m(m(m({},u),o),{},{headers:m(m({},null!=(r=null==u?void 0:u.headers)?r:{}),null!=(s=null==o?void 0:o.headers)?s:{})}),accessToken:async()=>""};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!=r?r:{},{db:c,realtime:d,auth:m(m({},u),{},{storageKey:p}),global:l});this.storageKey=null!=(s=f.auth.storageKey)?s:"",this.headers=null!=(n=f.global.headers)?n:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(o=f.auth)?o:{},this.headers,f.global.fetch),this.fetch=((e,t,r)=>{let s=r?(...e)=>r(...e):(...e)=>fetch(...e),a=Headers;return async(r,n)=>{var i;let o=null!=(i=await t())?i:e,h=new a(null==n?void 0:n.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${o}`),s(r,m(m({},n),{},{headers:h}))}})(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(m({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new a.PostgrestClient(new URL("rest/v1",h).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new i.StorageClient(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new s.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return null!=(e=null==(t=r.session)?void 0:t.access_token)?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:n,flowType:i,lock:o,debug:h,throwOnError:l},c,u){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new y({url:this.authUrl.href,headers:m(m({},d),c),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,flowType:i,lock:o,debug:h,throwOnError:l,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new n.RealtimeClient(this.realtimeUrl.href,m(m({},e),{},{params:m(m({},{apikey:this.supabaseKey}),null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}};(function(){if("undefined"==typeof process)return!1;let e=process.version;if(null==e)return!1;let t=e.match(/^v(\d+)\./);return!!t&&18>=parseInt(t[1],10)})()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217"),Object.defineProperty(r,"FunctionRegion",{enumerable:!0,get:function(){return s.FunctionRegion}}),Object.defineProperty(r,"FunctionsError",{enumerable:!0,get:function(){return s.FunctionsError}}),Object.defineProperty(r,"FunctionsFetchError",{enumerable:!0,get:function(){return s.FunctionsFetchError}}),Object.defineProperty(r,"FunctionsHttpError",{enumerable:!0,get:function(){return s.FunctionsHttpError}}),Object.defineProperty(r,"FunctionsRelayError",{enumerable:!0,get:function(){return s.FunctionsRelayError}}),Object.defineProperty(r,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}}),r.SupabaseClient=w,r.createClient=(e,t,r)=>new w(e,t,r),Object.keys(o).forEach(function(e){"default"===e||Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})}),Object.keys(n).forEach(function(e){"default"===e||Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})})}];

//# sourceMappingURL=node_modules_1bdd0de0._.js.map