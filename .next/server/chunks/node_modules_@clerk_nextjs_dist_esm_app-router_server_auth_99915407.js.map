{"version":3,"sources":["../../../node_modules/%40clerk/backend/dist/jwt/index.mjs","../../../node_modules/%40clerk/nextjs/dist/esm/utils/debugLogger.js","../../../node_modules/%40clerk/nextjs/dist/esm/utils/logFormatter.js","../../../node_modules/%40clerk/nextjs/dist/esm/server/nextErrors.js","../../../node_modules/%40clerk/nextjs/dist/esm/app-router/server/auth.js","../../../node_modules/%40clerk/nextjs/dist/esm/server/nextFetcher.js","../../../node_modules/%40clerk/nextjs/dist/esm/server/createGetAuth.js","../../../node_modules/%40clerk/nextjs/dist/esm/server/protect.js","../../../node_modules/%40clerk/nextjs/dist/esm/server/data/getAuthDataFromRequest.js"],"sourcesContent":["import {\n  withLegacyReturn,\n  withLegacySyncReturn\n} from \"../chunk-P263NW7Z.mjs\";\nimport {\n  base64url,\n  decodeJwt,\n  getCryptoAlgorithm,\n  hasValidSignature,\n  importKey,\n  runtime,\n  verifyJwt\n} from \"../chunk-7X3P2E3X.mjs\";\nimport {\n  SignJWTError\n} from \"../chunk-TCIXZLLW.mjs\";\nimport \"../chunk-RPS7XK5K.mjs\";\n\n// src/jwt/signJwt.ts\nfunction encodeJwtData(value) {\n  const stringified = JSON.stringify(value);\n  const encoder = new TextEncoder();\n  const encoded = encoder.encode(stringified);\n  return base64url.stringify(encoded, { pad: false });\n}\nasync function signJwt(payload, key, options) {\n  if (!options.algorithm) {\n    throw new Error(\"No algorithm specified\");\n  }\n  const encoder = new TextEncoder();\n  const algorithm = getCryptoAlgorithm(options.algorithm);\n  if (!algorithm) {\n    return {\n      errors: [new SignJWTError(`Unsupported algorithm ${options.algorithm}`)]\n    };\n  }\n  const cryptoKey = await importKey(key, algorithm, \"sign\");\n  const header = options.header || { typ: \"JWT\" };\n  header.alg = options.algorithm;\n  payload.iat = Math.floor(Date.now() / 1e3);\n  const encodedHeader = encodeJwtData(header);\n  const encodedPayload = encodeJwtData(payload);\n  const firstPart = `${encodedHeader}.${encodedPayload}`;\n  try {\n    const signature = await runtime.crypto.subtle.sign(algorithm, cryptoKey, encoder.encode(firstPart));\n    const encodedSignature = `${firstPart}.${base64url.stringify(new Uint8Array(signature), { pad: false })}`;\n    return { data: encodedSignature };\n  } catch (error) {\n    return { errors: [new SignJWTError(error?.message)] };\n  }\n}\n\n// src/jwt/index.ts\nvar verifyJwt2 = withLegacyReturn(verifyJwt);\nvar decodeJwt2 = withLegacySyncReturn(decodeJwt);\nvar signJwt2 = withLegacyReturn(signJwt);\nvar hasValidSignature2 = withLegacyReturn(hasValidSignature);\nexport {\n  decodeJwt2 as decodeJwt,\n  hasValidSignature2 as hasValidSignature,\n  signJwt2 as signJwt,\n  verifyJwt2 as verifyJwt\n};\n//# sourceMappingURL=index.mjs.map","import \"../chunk-BUSYA2B4.js\";\nimport nextPkg from \"next/package.json\";\nimport { logFormatter } from \"./logFormatter\";\nconst createDebugLogger = (name, formatter) => () => {\n  const entries = [];\n  let isEnabled = false;\n  return {\n    enable: () => {\n      isEnabled = true;\n    },\n    debug: (...args) => {\n      if (isEnabled) {\n        entries.push(args.map((arg) => typeof arg === \"function\" ? arg() : arg));\n      }\n    },\n    commit: () => {\n      if (isEnabled) {\n        console.log(debugLogHeader(name));\n        for (const log of entries) {\n          let output = formatter(log);\n          output = output.split(\"\\n\").map((l) => `  ${l}`).join(\"\\n\");\n          if (process.env.VERCEL) {\n            output = truncate(output, 4096);\n          }\n          console.log(output);\n        }\n        console.log(debugLogFooter(name));\n      }\n    }\n  };\n};\nconst withLogger = (loggerFactoryOrName, handlerCtor) => {\n  return ((...args) => {\n    const factory = typeof loggerFactoryOrName === \"string\" ? createDebugLogger(loggerFactoryOrName, logFormatter) : loggerFactoryOrName;\n    const logger = factory();\n    const handler = handlerCtor(logger);\n    try {\n      const res = handler(...args);\n      if (typeof res === \"object\" && \"then\" in res && typeof res.then === \"function\") {\n        return res.then((val) => {\n          logger.commit();\n          return val;\n        }).catch((err) => {\n          logger.commit();\n          throw err;\n        });\n      }\n      logger.commit();\n      return res;\n    } catch (err) {\n      logger.commit();\n      throw err;\n    }\n  });\n};\nfunction debugLogHeader(name) {\n  return `[clerk debug start: ${name}]`;\n}\nfunction debugLogFooter(name) {\n  return `[clerk debug end: ${name}] (@clerk/nextjs=${\"6.36.2\"},next=${nextPkg.version},timestamp=${Math.round((/* @__PURE__ */ new Date()).getTime() / 1e3)})`;\n}\nfunction truncate(str, maxLength) {\n  const encoder = new TextEncoder();\n  const decoder = new TextDecoder(\"utf-8\");\n  const encodedString = encoder.encode(str);\n  const truncatedString = encodedString.slice(0, maxLength);\n  return decoder.decode(truncatedString).replace(/\\uFFFD/g, \"\");\n}\nexport {\n  createDebugLogger,\n  withLogger\n};\n//# sourceMappingURL=debugLogger.js.map","import \"../chunk-BUSYA2B4.js\";\nconst maskSecretKey = (str) => {\n  if (!str || typeof str !== \"string\") {\n    return str;\n  }\n  try {\n    return (str || \"\").replace(/^(sk_(live|test)_)(.+?)(.{3})$/, \"$1*********$4\");\n  } catch {\n    return \"\";\n  }\n};\nconst logFormatter = (entry) => {\n  return (Array.isArray(entry) ? entry : [entry]).map((entry2) => {\n    if (typeof entry2 === \"string\") {\n      return maskSecretKey(entry2);\n    }\n    const masked = Object.fromEntries(Object.entries(entry2).map(([k, v]) => [k, maskSecretKey(v)]));\n    return JSON.stringify(masked, null, 2);\n  }).join(\", \");\n};\nexport {\n  logFormatter\n};\n//# sourceMappingURL=logFormatter.js.map","import \"../chunk-BUSYA2B4.js\";\nconst CONTROL_FLOW_ERROR = {\n  REDIRECT_TO_URL: \"CLERK_PROTECT_REDIRECT_TO_URL\",\n  REDIRECT_TO_SIGN_IN: \"CLERK_PROTECT_REDIRECT_TO_SIGN_IN\",\n  REDIRECT_TO_SIGN_UP: \"CLERK_PROTECT_REDIRECT_TO_SIGN_UP\"\n};\nconst LEGACY_NOT_FOUND_ERROR_CODE = \"NEXT_NOT_FOUND\";\nfunction isLegacyNextjsNotFoundError(error) {\n  if (typeof error !== \"object\" || error === null || !(\"digest\" in error)) {\n    return false;\n  }\n  return error.digest === LEGACY_NOT_FOUND_ERROR_CODE;\n}\nconst HTTPAccessErrorStatusCodes = {\n  NOT_FOUND: 404,\n  FORBIDDEN: 403,\n  UNAUTHORIZED: 401\n};\nconst ALLOWED_CODES = new Set(Object.values(HTTPAccessErrorStatusCodes));\nconst HTTP_ERROR_FALLBACK_ERROR_CODE = \"NEXT_HTTP_ERROR_FALLBACK\";\nfunction isHTTPAccessFallbackError(error) {\n  if (typeof error !== \"object\" || error === null || !(\"digest\" in error) || typeof error.digest !== \"string\") {\n    return false;\n  }\n  const [prefix, httpStatus] = error.digest.split(\";\");\n  return prefix === HTTP_ERROR_FALLBACK_ERROR_CODE && ALLOWED_CODES.has(Number(httpStatus));\n}\nfunction whichHTTPAccessFallbackError(error) {\n  if (!isHTTPAccessFallbackError(error)) {\n    return void 0;\n  }\n  const [, httpStatus] = error.digest.split(\";\");\n  return Number(httpStatus);\n}\nfunction isNextjsNotFoundError(error) {\n  return isLegacyNextjsNotFoundError(error) || // Checks for the error thrown from `notFound()` for canary versions of next@15\n  whichHTTPAccessFallbackError(error) === HTTPAccessErrorStatusCodes.NOT_FOUND;\n}\nconst REDIRECT_ERROR_CODE = \"NEXT_REDIRECT\";\nfunction nextjsRedirectError(url, extra, type = \"replace\", statusCode = 307) {\n  const error = new Error(REDIRECT_ERROR_CODE);\n  error.digest = `${REDIRECT_ERROR_CODE};${type};${url};${statusCode};`;\n  error.clerk_digest = CONTROL_FLOW_ERROR.REDIRECT_TO_URL;\n  Object.assign(error, extra);\n  throw error;\n}\nfunction buildReturnBackUrl(url, returnBackUrl) {\n  return returnBackUrl === null ? \"\" : returnBackUrl || url;\n}\nfunction redirectToSignInError(url, returnBackUrl) {\n  nextjsRedirectError(url, {\n    clerk_digest: CONTROL_FLOW_ERROR.REDIRECT_TO_SIGN_IN,\n    returnBackUrl: buildReturnBackUrl(url, returnBackUrl)\n  });\n}\nfunction redirectToSignUpError(url, returnBackUrl) {\n  nextjsRedirectError(url, {\n    clerk_digest: CONTROL_FLOW_ERROR.REDIRECT_TO_SIGN_UP,\n    returnBackUrl: buildReturnBackUrl(url, returnBackUrl)\n  });\n}\nfunction isNextjsRedirectError(error) {\n  if (typeof error !== \"object\" || error === null || !(\"digest\" in error) || typeof error.digest !== \"string\") {\n    return false;\n  }\n  const digest = error.digest.split(\";\");\n  const [errorCode, type] = digest;\n  const destination = digest.slice(2, -2).join(\";\");\n  const status = digest.at(-2);\n  const statusCode = Number(status);\n  return errorCode === REDIRECT_ERROR_CODE && (type === \"replace\" || type === \"push\") && typeof destination === \"string\" && !isNaN(statusCode) && statusCode === 307;\n}\nfunction isRedirectToSignInError(error) {\n  if (isNextjsRedirectError(error) && \"clerk_digest\" in error) {\n    return error.clerk_digest === CONTROL_FLOW_ERROR.REDIRECT_TO_SIGN_IN;\n  }\n  return false;\n}\nfunction isRedirectToSignUpError(error) {\n  if (isNextjsRedirectError(error) && \"clerk_digest\" in error) {\n    return error.clerk_digest === CONTROL_FLOW_ERROR.REDIRECT_TO_SIGN_UP;\n  }\n  return false;\n}\nfunction isNextjsUnauthorizedError(error) {\n  return whichHTTPAccessFallbackError(error) === HTTPAccessErrorStatusCodes.UNAUTHORIZED;\n}\nfunction unauthorized() {\n  const error = new Error(HTTP_ERROR_FALLBACK_ERROR_CODE);\n  error.digest = `${HTTP_ERROR_FALLBACK_ERROR_CODE};${HTTPAccessErrorStatusCodes.UNAUTHORIZED}`;\n  throw error;\n}\nexport {\n  HTTP_ERROR_FALLBACK_ERROR_CODE,\n  isHTTPAccessFallbackError,\n  isLegacyNextjsNotFoundError,\n  isNextjsNotFoundError,\n  isNextjsRedirectError,\n  isNextjsUnauthorizedError,\n  isRedirectToSignInError,\n  isRedirectToSignUpError,\n  nextjsRedirectError,\n  redirectToSignInError,\n  redirectToSignUpError,\n  unauthorized,\n  whichHTTPAccessFallbackError\n};\n//# sourceMappingURL=nextErrors.js.map","import \"../../chunk-BUSYA2B4.js\";\nimport { constants, createClerkRequest, createRedirect, TokenType } from \"@clerk/backend/internal\";\nimport { notFound, redirect } from \"next/navigation\";\nimport { PUBLISHABLE_KEY, SIGN_IN_URL, SIGN_UP_URL } from \"../../server/constants\";\nimport { createAsyncGetAuth } from \"../../server/createGetAuth\";\nimport { authAuthHeaderMissing } from \"../../server/errors\";\nimport { getAuthKeyFromRequest, getHeader } from \"../../server/headers-utils\";\nimport { unauthorized } from \"../../server/nextErrors\";\nimport { createProtect } from \"../../server/protect\";\nimport { decryptClerkRequestData } from \"../../server/utils\";\nimport { isNextWithUnstableServerActions } from \"../../utils/sdk-versions\";\nimport { buildRequestLike } from \"./utils\";\nconst auth = (async (options) => {\n  var _a;\n  require(\"server-only\");\n  const request = await buildRequestLike();\n  const stepsBasedOnSrcDirectory = async () => {\n    if (isNextWithUnstableServerActions) {\n      return [];\n    }\n    try {\n      const isSrcAppDir = await import(\"../../server/fs/middleware-location.js\").then((m) => m.hasSrcAppDir());\n      return [`Your Middleware exists at ./${isSrcAppDir ? \"src/\" : \"\"}middleware.(ts|js)`];\n    } catch {\n      return [];\n    }\n  };\n  const authObject = await createAsyncGetAuth({\n    debugLoggerName: \"auth()\",\n    noAuthStatusMessage: authAuthHeaderMissing(\"auth\", await stepsBasedOnSrcDirectory())\n  })(request, {\n    treatPendingAsSignedOut: options == null ? void 0 : options.treatPendingAsSignedOut,\n    acceptsToken: (_a = options == null ? void 0 : options.acceptsToken) != null ? _a : TokenType.SessionToken\n  });\n  const clerkUrl = getAuthKeyFromRequest(request, \"ClerkUrl\");\n  const createRedirectForRequest = (...args) => {\n    const { returnBackUrl } = args[0] || {};\n    const clerkRequest = createClerkRequest(request);\n    const devBrowserToken = clerkRequest.clerkUrl.searchParams.get(constants.QueryParameters.DevBrowser) || clerkRequest.cookies.get(constants.Cookies.DevBrowser);\n    const encryptedRequestData = getHeader(request, constants.Headers.ClerkRequestData);\n    const decryptedRequestData = decryptClerkRequestData(encryptedRequestData);\n    return [\n      createRedirect({\n        redirectAdapter: redirect,\n        devBrowserToken,\n        baseUrl: clerkRequest.clerkUrl.toString(),\n        publishableKey: decryptedRequestData.publishableKey || PUBLISHABLE_KEY,\n        signInUrl: decryptedRequestData.signInUrl || SIGN_IN_URL,\n        signUpUrl: decryptedRequestData.signUpUrl || SIGN_UP_URL,\n        sessionStatus: authObject.tokenType === TokenType.SessionToken ? authObject.sessionStatus : null\n      }),\n      returnBackUrl === null ? \"\" : returnBackUrl || (clerkUrl == null ? void 0 : clerkUrl.toString())\n    ];\n  };\n  const redirectToSignIn = (opts = {}) => {\n    const [r, returnBackUrl] = createRedirectForRequest(opts);\n    return r.redirectToSignIn({\n      returnBackUrl\n    });\n  };\n  const redirectToSignUp = (opts = {}) => {\n    const [r, returnBackUrl] = createRedirectForRequest(opts);\n    return r.redirectToSignUp({\n      returnBackUrl\n    });\n  };\n  if (authObject.tokenType === TokenType.SessionToken) {\n    return Object.assign(authObject, { redirectToSignIn, redirectToSignUp });\n  }\n  return authObject;\n});\nauth.protect = async (...args) => {\n  var _a, _b;\n  require(\"server-only\");\n  const request = await buildRequestLike();\n  const requestedToken = ((_a = args == null ? void 0 : args[0]) == null ? void 0 : _a.token) || ((_b = args == null ? void 0 : args[1]) == null ? void 0 : _b.token) || TokenType.SessionToken;\n  const authObject = await auth({ acceptsToken: requestedToken });\n  const protect = createProtect({\n    request,\n    authObject,\n    redirectToSignIn: authObject.redirectToSignIn,\n    notFound,\n    redirect,\n    unauthorized\n  });\n  return protect(...args);\n};\nexport {\n  auth\n};\n//# sourceMappingURL=auth.js.map","import \"../chunk-BUSYA2B4.js\";\nfunction isNextFetcher(fetch) {\n  return \"__nextPatched\" in fetch && fetch.__nextPatched === true;\n}\nexport {\n  isNextFetcher\n};\n//# sourceMappingURL=nextFetcher.js.map","import \"../chunk-BUSYA2B4.js\";\nimport { constants } from \"@clerk/backend/internal\";\nimport { isTruthy } from \"@clerk/shared/underscore\";\nimport { withLogger } from \"../utils/debugLogger\";\nimport { isNextWithUnstableServerActions } from \"../utils/sdk-versions\";\nimport {\n  getAuthDataFromRequest as getAuthDataFromRequestOriginal,\n  getSessionAuthDataFromRequest as getSessionAuthDataFromRequestOriginal\n} from \"./data/getAuthDataFromRequest\";\nimport { getAuthAuthHeaderMissing } from \"./errors\";\nimport { detectClerkMiddleware, getHeader } from \"./headers-utils\";\nimport { assertAuthStatus } from \"./utils\";\nconst createAsyncGetAuth = ({\n  debugLoggerName,\n  noAuthStatusMessage\n}) => withLogger(debugLoggerName, (logger) => {\n  return async (req, opts) => {\n    if (isTruthy(getHeader(req, constants.Headers.EnableDebug))) {\n      logger.enable();\n    }\n    if (!detectClerkMiddleware(req)) {\n      if (isNextWithUnstableServerActions) {\n        assertAuthStatus(req, noAuthStatusMessage);\n      }\n      const missConfiguredMiddlewareLocation = await import(\"./fs/middleware-location.js\").then((m) => m.suggestMiddlewareLocation()).catch(() => void 0);\n      if (missConfiguredMiddlewareLocation) {\n        throw new Error(missConfiguredMiddlewareLocation);\n      }\n      assertAuthStatus(req, noAuthStatusMessage);\n    }\n    const getAuthDataFromRequest = (req2, opts2 = {}) => {\n      return getAuthDataFromRequestOriginal(req2, { ...opts2, logger, acceptsToken: opts2 == null ? void 0 : opts2.acceptsToken });\n    };\n    return getAuthDataFromRequest(req, { ...opts, logger, acceptsToken: opts == null ? void 0 : opts.acceptsToken });\n  };\n});\nconst createSyncGetAuth = ({\n  debugLoggerName,\n  noAuthStatusMessage\n}) => withLogger(debugLoggerName, (logger) => {\n  return (req, opts) => {\n    if (isTruthy(getHeader(req, constants.Headers.EnableDebug))) {\n      logger.enable();\n    }\n    assertAuthStatus(req, noAuthStatusMessage);\n    const getAuthDataFromRequest = (req2, opts2 = {}) => {\n      return getSessionAuthDataFromRequestOriginal(req2, { ...opts2, logger, acceptsToken: opts2 == null ? void 0 : opts2.acceptsToken });\n    };\n    return getAuthDataFromRequest(req, { ...opts, logger, acceptsToken: opts == null ? void 0 : opts.acceptsToken });\n  };\n});\nconst getAuth = createSyncGetAuth({\n  debugLoggerName: \"getAuth()\",\n  noAuthStatusMessage: getAuthAuthHeaderMissing()\n});\nexport {\n  createAsyncGetAuth,\n  createSyncGetAuth,\n  getAuth\n};\n//# sourceMappingURL=createGetAuth.js.map","import \"../chunk-BUSYA2B4.js\";\nimport { constants, isTokenTypeAccepted, TokenType } from \"@clerk/backend/internal\";\nimport { constants as nextConstants } from \"../constants\";\nimport { isNextFetcher } from \"./nextFetcher\";\nfunction createProtect(opts) {\n  const { redirectToSignIn, authObject, redirect, notFound, request, unauthorized } = opts;\n  return (async (...args) => {\n    var _a, _b, _c, _d, _e, _f;\n    const paramsOrFunction = getAuthorizationParams(args[0]);\n    const unauthenticatedUrl = ((_a = args[0]) == null ? void 0 : _a.unauthenticatedUrl) || ((_b = args[1]) == null ? void 0 : _b.unauthenticatedUrl);\n    const unauthorizedUrl = ((_c = args[0]) == null ? void 0 : _c.unauthorizedUrl) || ((_d = args[1]) == null ? void 0 : _d.unauthorizedUrl);\n    const requestedToken = ((_e = args[0]) == null ? void 0 : _e.token) || ((_f = args[1]) == null ? void 0 : _f.token) || TokenType.SessionToken;\n    const handleUnauthenticated = () => {\n      if (unauthenticatedUrl) {\n        return redirect(unauthenticatedUrl);\n      }\n      if (isPageRequest(request)) {\n        return redirectToSignIn();\n      }\n      return notFound();\n    };\n    const handleUnauthorized = () => {\n      if (authObject.tokenType !== TokenType.SessionToken) {\n        return unauthorized();\n      }\n      if (unauthorizedUrl) {\n        return redirect(unauthorizedUrl);\n      }\n      return notFound();\n    };\n    if (!isTokenTypeAccepted(authObject.tokenType, requestedToken)) {\n      return handleUnauthorized();\n    }\n    if (authObject.tokenType !== TokenType.SessionToken) {\n      if (!authObject.isAuthenticated) {\n        return handleUnauthorized();\n      }\n      return authObject;\n    }\n    if (authObject.sessionStatus === \"pending\") {\n      return handleUnauthenticated();\n    }\n    if (!authObject.userId) {\n      return handleUnauthenticated();\n    }\n    if (!paramsOrFunction) {\n      return authObject;\n    }\n    if (typeof paramsOrFunction === \"function\") {\n      if (paramsOrFunction(authObject.has)) {\n        return authObject;\n      }\n      return handleUnauthorized();\n    }\n    if (authObject.has(paramsOrFunction)) {\n      return authObject;\n    }\n    return handleUnauthorized();\n  });\n}\nconst getAuthorizationParams = (arg) => {\n  if (!arg) {\n    return void 0;\n  }\n  if (arg.unauthenticatedUrl || arg.unauthorizedUrl || arg.token) {\n    return void 0;\n  }\n  if (Object.keys(arg).length === 1 && \"token\" in arg) {\n    return void 0;\n  }\n  return arg;\n};\nconst isServerActionRequest = (req) => {\n  var _a, _b;\n  return !!req.headers.get(nextConstants.Headers.NextUrl) && (((_a = req.headers.get(constants.Headers.Accept)) == null ? void 0 : _a.includes(\"text/x-component\")) || ((_b = req.headers.get(constants.Headers.ContentType)) == null ? void 0 : _b.includes(\"multipart/form-data\")) || !!req.headers.get(nextConstants.Headers.NextAction));\n};\nconst isPageRequest = (req) => {\n  var _a;\n  return req.headers.get(constants.Headers.SecFetchDest) === \"document\" || req.headers.get(constants.Headers.SecFetchDest) === \"iframe\" || ((_a = req.headers.get(constants.Headers.Accept)) == null ? void 0 : _a.includes(\"text/html\")) || isAppRouterInternalNavigation(req) || isPagesRouterInternalNavigation(req);\n};\nconst isAppRouterInternalNavigation = (req) => !!req.headers.get(nextConstants.Headers.NextUrl) && !isServerActionRequest(req) || isPagePathAvailable();\nconst isPagePathAvailable = () => {\n  const __fetch = globalThis.fetch;\n  if (!isNextFetcher(__fetch)) {\n    return false;\n  }\n  const { page, pagePath } = __fetch.__nextGetStaticStore().getStore() || {};\n  return Boolean(\n    // available on next@14\n    pagePath || // available on next@15\n    page\n  );\n};\nconst isPagesRouterInternalNavigation = (req) => !!req.headers.get(nextConstants.Headers.NextjsData);\nexport {\n  createProtect\n};\n//# sourceMappingURL=protect.js.map","import \"../../chunk-BUSYA2B4.js\";\nimport {\n  AuthStatus,\n  constants,\n  getAuthObjectForAcceptedToken,\n  getAuthObjectFromJwt,\n  invalidTokenAuthObject,\n  isMachineTokenByPrefix,\n  isTokenTypeAccepted,\n  signedOutAuthObject,\n  TokenType\n} from \"@clerk/backend/internal\";\nimport { decodeJwt } from \"@clerk/backend/jwt\";\nimport { API_URL, API_VERSION, PUBLISHABLE_KEY, SECRET_KEY } from \"../constants\";\nimport { getAuthKeyFromRequest, getHeader } from \"../headers-utils\";\nimport { assertTokenSignature, decryptClerkRequestData } from \"../utils\";\nconst getAuthHeaders = (req) => {\n  return {\n    authStatus: getAuthKeyFromRequest(req, \"AuthStatus\"),\n    authToken: getAuthKeyFromRequest(req, \"AuthToken\"),\n    authMessage: getAuthKeyFromRequest(req, \"AuthMessage\"),\n    authReason: getAuthKeyFromRequest(req, \"AuthReason\"),\n    authSignature: getAuthKeyFromRequest(req, \"AuthSignature\")\n  };\n};\nconst createAuthOptions = (req, opts, treatPendingAsSignedOut = true) => {\n  const encryptedRequestData = getHeader(req, constants.Headers.ClerkRequestData);\n  const decryptedRequestData = decryptClerkRequestData(encryptedRequestData);\n  return {\n    secretKey: (opts == null ? void 0 : opts.secretKey) || decryptedRequestData.secretKey || SECRET_KEY,\n    publishableKey: decryptedRequestData.publishableKey || PUBLISHABLE_KEY,\n    apiUrl: API_URL,\n    apiVersion: API_VERSION,\n    authStatus: getAuthKeyFromRequest(req, \"AuthStatus\"),\n    authMessage: getAuthKeyFromRequest(req, \"AuthMessage\"),\n    authReason: getAuthKeyFromRequest(req, \"AuthReason\"),\n    treatPendingAsSignedOut\n  };\n};\nconst getSessionAuthDataFromRequest = (req, { treatPendingAsSignedOut = true, ...opts } = {}) => {\n  var _a, _b;\n  const { authStatus, authMessage, authReason, authToken, authSignature } = getAuthHeaders(req);\n  (_a = opts.logger) == null ? void 0 : _a.debug(\"headers\", { authStatus, authMessage, authReason });\n  const options = createAuthOptions(req, opts, treatPendingAsSignedOut);\n  if (!isTokenTypeAccepted(TokenType.SessionToken, opts.acceptsToken || TokenType.SessionToken)) {\n    return signedOutAuthObject(options);\n  }\n  let authObject;\n  if (!authStatus || authStatus !== AuthStatus.SignedIn) {\n    authObject = signedOutAuthObject(options);\n  } else {\n    assertTokenSignature(authToken, options.secretKey, authSignature);\n    const jwt = decodeJwt(authToken);\n    (_b = opts.logger) == null ? void 0 : _b.debug(\"jwt\", jwt.raw);\n    return getAuthObjectFromJwt(jwt, options);\n  }\n  return authObject;\n};\nconst getAuthDataFromRequest = (req, opts = {}) => {\n  var _a, _b;\n  const { authStatus, authMessage, authReason } = getAuthHeaders(req);\n  (_a = opts.logger) == null ? void 0 : _a.debug(\"headers\", { authStatus, authMessage, authReason });\n  const encryptedRequestData = getHeader(req, constants.Headers.ClerkRequestData);\n  const decryptedRequestData = decryptClerkRequestData(encryptedRequestData);\n  const bearerToken = (_b = getHeader(req, constants.Headers.Authorization)) == null ? void 0 : _b.replace(\"Bearer \", \"\");\n  const acceptsToken = opts.acceptsToken || TokenType.SessionToken;\n  const options = createAuthOptions(req, opts);\n  const machineAuthObject = handleMachineToken(\n    bearerToken,\n    decryptedRequestData.machineAuthObject,\n    acceptsToken,\n    options\n  );\n  if (machineAuthObject) {\n    return machineAuthObject;\n  }\n  if (bearerToken && Array.isArray(acceptsToken) && !acceptsToken.includes(TokenType.SessionToken)) {\n    return invalidTokenAuthObject();\n  }\n  return getSessionAuthDataFromRequest(req, opts);\n};\nconst handleMachineToken = (bearerToken, rawAuthObject, acceptsToken, options) => {\n  const hasMachineToken = bearerToken && isMachineTokenByPrefix(bearerToken);\n  const acceptsOnlySessionToken = acceptsToken === TokenType.SessionToken || Array.isArray(acceptsToken) && acceptsToken.length === 1 && acceptsToken[0] === TokenType.SessionToken;\n  if (hasMachineToken && rawAuthObject && !acceptsOnlySessionToken) {\n    const authObject = getAuthObjectForAcceptedToken({\n      authObject: {\n        ...rawAuthObject,\n        debug: () => options\n      },\n      acceptsToken\n    });\n    return {\n      ...authObject,\n      getToken: () => authObject.isAuthenticated ? Promise.resolve(bearerToken) : Promise.resolve(null),\n      has: () => false\n    };\n  }\n  return null;\n};\nexport {\n  getAuthDataFromRequest,\n  getSessionAuthDataFromRequest\n};\n//# sourceMappingURL=getAuthDataFromRequest.js.map"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8]}