module.exports=[74967,a=>{"use strict";var b=a.i(87924);function c(){return(0,b.jsxs)("a",{href:"/dashboard",onClick:function(a){a.preventDefault();try{window.history.length>1?window.history.back():window.location.href="/dashboard"}catch{window.location.href="/dashboard"}},className:"inline-flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300 hover:underline",children:[(0,b.jsx)("span",{"aria-hidden":!0,children:"←"}),(0,b.jsx)("span",{children:"Back to dashboard"})]})}a.s(["default",()=>c])},21714,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let[a,d]=(0,c.useState)(null),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(!1);async function i(){h(!0);try{let a=await fetch("/api/billing/portal",{method:"POST"}),b=await a.json();a.ok&&b.url?window.open(b.url,"_blank"):alert(b?.error||"No billing portal available")}catch(a){console.error(a),alert("Failed to open billing portal")}finally{h(!1)}}if((0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/billing/summary"),b=await a.json();d(b||null)}catch(a){console.error(a)}finally{f(!1)}})()},[]),e)return(0,b.jsx)("div",{children:"Loading…"});if(!a)return(0,b.jsx)("div",{children:"Unable to load billing summary"});if(!a.isOwner)return(0,b.jsx)("div",{className:"max-w-4xl",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-slate-900 border rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Billing"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:"Billing information is available to account owners only. Contact your organization owner to manage billing."})]})});let j=a.plan??"Starter",k=a.renewal??"—",l=a.usage?.ingests??{used:0,limit:0},m=a.usage?.translations??{used:0,limit:0};function n(a,b){return b?Math.min(100,Math.round(a/b*100)):0}return(0,b.jsx)("div",{className:"max-w-4xl",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-slate-900 border rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Subscription & Billing"}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Manage subscription, billing, and usage."})]}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{onClick:i,disabled:g,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:g?"Opening…":"Open Stripe Portal"})})]}),(0,b.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"col-span-1 border rounded p-4",children:[(0,b.jsx)("div",{className:"text-xs text-slate-500",children:"Plan"}),(0,b.jsx)("div",{className:"text-xl font-semibold mt-1",children:j}),(0,b.jsxs)("div",{className:"text-sm text-slate-500 mt-2",children:["Renewal: ",k]})]}),(0,b.jsxs)("div",{className:"col-span-2 border rounded p-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:"Usage"}),(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("div",{children:"Product ingests"}),(0,b.jsxs)("div",{children:[l.used," / ",l.limit]})]}),(0,b.jsx)("div",{className:"w-full bg-slate-100 dark:bg-slate-800 h-2 rounded mt-1",children:(0,b.jsx)("div",{style:{width:`${n(l.used,l.limit)}%`},className:"h-2 bg-indigo-600 rounded"})})]}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("div",{children:"Translations"}),(0,b.jsxs)("div",{children:[m.used," / ",m.limit]})]}),(0,b.jsx)("div",{className:"w-full bg-slate-100 dark:bg-slate-800 h-2 rounded mt-1",children:(0,b.jsx)("div",{style:{width:`${n(m.used,m.limit)}%`},className:"h-2 bg-indigo-600 rounded"})})]})]})]})]})})}a.s(["default",()=>d])}];

//# sourceMappingURL=src_components_bfc5130e._.js.map