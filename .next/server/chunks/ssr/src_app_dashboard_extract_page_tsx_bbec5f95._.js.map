{"version":3,"sources":["../../../../src/app/dashboard/extract/page.tsx","../../../../src/components/TabsShell.tsx","../../../../src/components/JsonViewer.tsx","../../../../src/hooks/useIngestRow.ts","../../../../src/components/ExtractHeader.tsx"],"sourcesContent":["// src/app/dashboard/extract/page.tsx\n\"use client\";\n\nimport React, { useState, useMemo, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport TabsShell from \"@/components/TabsShell\";\nimport JsonViewer from \"@/components/JsonViewer\";\nimport { useIngestRow } from \"@/hooks/useIngestRow\";\nimport ExtractHeader from \"@/components/ExtractHeader\";\n\n/**\n * AvidiaExtract page (client)\n *\n * Premium layout goals (consistent with other module pages):\n * - Inputs are immediately accessible under the hero heading + paragraph (Import-style)\n * - Results live on the left (human canvas), JSON viewer on the right (no extra inner Y-scroll)\n * - No auto-scrollIntoView behavior (prevents ‚Äústuck under header‚Äù + paralysis feeling)\n * - No page-level overflow clipping; avoid sticky maxHeight tricks that create ‚Äúfake footer space‚Äù\n */\n\nexport const dynamic = \"force-dynamic\";\n\nfunction cx(...parts: Array<string | false | null | undefined>) {\n  return parts.filter(Boolean).join(\" \");\n}\n\nexport default function ExtractPage() {\n  const router = useRouter();\n\n  // submission / job state\n  const [jobId, setJobId] = useState<string | null>(null);\n  const [jobUrl, setJobUrl] = useState<string | null>(null);\n  const { row, loading: rowLoading, error: rowError } = useIngestRow(jobId, 1500);\n\n  // preview state when the synchronous GET returns extraction immediately\n  const [preview, setPreview] = useState<any | null>(null);\n  const [previewError, setPreviewError] = useState<string | null>(null);\n  const [previewLoading, setPreviewLoading] = useState(false);\n\n  function extractPayload(source: any | null | undefined) {\n    if (!source) return null;\n    const base = source.data ?? source;\n    return base.normalized_payload ?? base;\n  }\n\n  const payload = useMemo(() => {\n    if (preview) return extractPayload(preview);\n    if (row) return extractPayload(row);\n    return null;\n  }, [preview, row]);\n\n  const name = payload?.name_best ?? payload?.name_raw ?? payload?.name;\n  const featuresHtml =\n    payload?.features_html ?? payload?.features_structured ?? payload?.features_raw;\n  const pdfUrls = payload?.pdf_manual_urls ?? payload?.pdfs ?? payload?.manuals ?? [];\n  const images = payload?.images ?? [];\n  const quality = payload?.quality_score;\n  const needsReview = payload?.needs_review;\n\n  function onJobCreated(id: string, url: string) {\n    setJobId(String(id));\n    setJobUrl(url);\n    setPreview(null);\n    setPreviewError(null);\n    // No auto-scroll here: keeps the page feeling responsive and avoids ‚Äúhidden under header‚Äù.\n  }\n\n  useEffect(() => {\n    if (!jobId || !jobUrl) return;\n\n    let mounted = true;\n\n    (async () => {\n      setPreviewLoading(true);\n      setPreviewError(null);\n\n      try {\n        const target = `/api/v1/ingest/${encodeURIComponent(jobId)}?url=${encodeURIComponent(\n          jobUrl\n        )}`;\n\n        const res = await fetch(target, {\n          method: \"GET\",\n          credentials: \"same-origin\",\n          headers: { Accept: \"application/json\" },\n        });\n\n        const text = await res.text().catch(() => \"\");\n        if (!mounted) return;\n\n        if (!res.ok) {\n          let message = `preview fetch failed (${res.status})`;\n          try {\n            const j = JSON.parse(text || \"{}\");\n            message = j?.error || message;\n          } catch {\n            // keep default message\n          }\n          setPreviewError(message);\n          setPreviewLoading(false);\n          return;\n        }\n\n        try {\n          const j = JSON.parse(text || \"{}\");\n          setPreview(j);\n        } catch {\n          setPreviewError(\"Preview returned non-JSON response\");\n        }\n      } catch (err: any) {\n        if (!mounted) return;\n        setPreviewError(String(err?.message || err));\n      } finally {\n        if (mounted) setPreviewLoading(false);\n      }\n    })();\n\n    return () => {\n      mounted = false;\n    };\n  }, [jobId, jobUrl]);\n\n  const jsonViewerData = useMemo(() => {\n    if (preview) return extractPayload(preview) ?? preview;\n    if (row) return extractPayload(row) ?? row;\n    return {};\n  }, [preview, row]);\n\n  const ingestionStatus = row?.status ?? (preview ? \"preview-only\" : null);\n\n  const statusDot =\n    rowLoading || previewLoading\n      ? \"bg-amber-400 animate-pulse\"\n      : payload\n      ? \"bg-emerald-500 dark:bg-emerald-400\"\n      : \"bg-slate-400\";\n\n  const statusText =\n    rowLoading || previewLoading\n      ? \"Fetching extraction preview‚Ä¶\"\n      : payload\n      ? \"Extraction ready\"\n      : \"Awaiting first URL\";\n\n  return (\n    <main className=\"relative min-h-screen bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-slate-50\">\n      {/* BACKGROUND: layered gradients + subtle grid */}\n      <div className=\"pointer-events-none absolute inset-0\">\n        <div className=\"absolute -top-40 -left-32 h-96 w-96 rounded-full bg-cyan-300/25 blur-3xl dark:bg-cyan-500/18\" />\n        <div className=\"absolute -bottom-44 right-[-10rem] h-[28rem] w-[28rem] rounded-full bg-violet-300/25 blur-3xl dark:bg-violet-500/16\" />\n        <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(248,250,252,0)_0,_rgba(248,250,252,0.92)_58%,_rgba(248,250,252,1)_100%)] dark:bg-[radial-gradient(circle_at_top,_rgba(15,23,42,0)_0,_rgba(15,23,42,0.92)_58%,_rgba(15,23,42,1)_100%)]\" />\n        <div className=\"absolute inset-0 opacity-[0.045] dark:opacity-[0.065]\">\n          <div className=\"h-full w-full bg-[linear-gradient(to_right,#e5e7eb_1px,transparent_1px),linear-gradient(to_bottom,#e5e7eb_1px,transparent_1px)] bg-[size:46px_46px] dark:bg-[linear-gradient(to_right,#1e293b_1px,transparent_1px),linear-gradient(to_bottom,#1e293b_1px,transparent_1px)]\" />\n        </div>\n      </div>\n\n      <div className=\"relative mx-auto max-w-7xl space-y-6 px-4 pt-4 pb-8 lg:px-8 lg:pt-6 lg:pb-10\">\n        {/* HERO (inputs visible immediately) */}\n        <section className=\"rounded-[28px] bg-gradient-to-r from-cyan-200/60 via-sky-200/35 to-emerald-200/60 p-[1px] shadow-2xl shadow-slate-200/70 dark:from-cyan-500/22 dark:via-sky-500/14 dark:to-emerald-500/22 dark:shadow-slate-950/70\">\n          <div className=\"rounded-[27px] border border-white/50 bg-white/75 p-4 backdrop-blur-xl dark:border-slate-800/60 dark:bg-slate-950/52 lg:p-5\">\n            {/* top strip */}\n            <div className=\"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between\">\n              <div className=\"flex flex-wrap items-center gap-2\">\n                <div className=\"inline-flex items-center gap-2 rounded-full border border-cyan-400/60 bg-white/80 px-3 py-1.5 text-[11px] font-medium uppercase tracking-[0.18em] text-cyan-800 shadow-sm dark:border-cyan-500/45 dark:bg-slate-950/55 dark:text-cyan-100\">\n                  <span className=\"inline-flex h-4 w-4 items-center justify-center rounded-full border border-cyan-400/60 bg-slate-100 dark:bg-slate-900\">\n                    <span className=\"h-2 w-2 animate-pulse rounded-full bg-cyan-500 dark:bg-cyan-400\" />\n                  </span>\n                  AvidiaTech ‚Ä¢ AvidiaExtract\n                </div>\n\n                <span className=\"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-1.5 text-[11px] text-slate-600 shadow-sm dark:border-slate-700/70 dark:bg-slate-950/55 dark:text-slate-300\">\n                  <span className=\"h-1.5 w-1.5 rounded-full bg-emerald-500 dark:bg-emerald-400\" />\n                  Ingest engine ‚Ä¢ JSON-first\n                </span>\n\n                {ingestionStatus && (\n                  <span className=\"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-1.5 text-[11px] text-slate-600 shadow-sm dark:border-slate-700/70 dark:bg-slate-950/55 dark:text-slate-300\">\n                    Status:\n                    <span className=\"font-mono text-[10px] uppercase text-cyan-700 dark:text-cyan-200\">\n                      {ingestionStatus}\n                    </span>\n                  </span>\n                )}\n              </div>\n\n              <div className=\"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-1.5 text-[11px] text-slate-600 shadow-sm dark:border-slate-700/70 dark:bg-slate-950/55 dark:text-slate-300\">\n                <span className={cx(\"h-1.5 w-1.5 rounded-full\", statusDot)} />\n                <span>{statusText}</span>\n              </div>\n            </div>\n\n            {/* hero body */}\n            <div className=\"mt-4 grid gap-4 lg:grid-cols-[minmax(0,1.15fr),minmax(0,0.85fr)] lg:items-start\">\n              {/* LEFT: headline + input card directly under it */}\n              <div className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <h1 className=\"text-2xl font-semibold leading-tight text-slate-900 lg:text-3xl dark:text-slate-50\">\n                    Extract everything from a{\" \"}\n                    <span className=\"bg-gradient-to-r from-cyan-500 via-sky-500 to-emerald-400 bg-clip-text text-transparent dark:from-cyan-300 dark:via-sky-400 dark:to-emerald-300\">\n                      single manufacturer URL\n                    </span>{\" \"}\n                    ‚Äî as clean, normalized JSON.\n                  </h1>\n                  <p className=\"max-w-2xl text-sm text-slate-600 dark:text-slate-300\">\n                    Paste any product URL. AvidiaExtract hits your ingest engine, strips noise,\n                    standardizes specs, and streams back a JSON-first view that plugs into SEO,\n                    Describe, and any ecommerce stack.\n                  </p>\n                </div>\n\n                {/* Input card (primary action) */}\n                <div className=\"rounded-2xl border border-slate-200 bg-white/85 p-4 shadow-xl shadow-slate-200/60 dark:border-slate-700/70 dark:bg-slate-950/60 dark:shadow-slate-950/70\">\n                  <div className=\"flex items-start justify-between gap-3\">\n                    <div>\n                      <p className=\"text-[11px] font-medium uppercase tracking-[0.2em] text-slate-500 dark:text-slate-400\">\n                        Extract launcher\n                      </p>\n                      <p className=\"text-[11px] text-slate-500 dark:text-slate-400\">\n                        Submit a manufacturer URL; AvidiaExtract handles the rest.\n                      </p>\n                    </div>\n\n                    {jobId && (\n                      <div className=\"text-right\">\n                        <p className=\"text-[11px] text-slate-500 dark:text-slate-400\">\n                          Current job\n                        </p>\n                        <p className=\"font-mono text-[10px] text-cyan-700 dark:text-cyan-200\">\n                          {jobId.slice(0, 10)}‚Ä¶\n                        </p>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"mt-3\">\n                    <ExtractHeader onJobCreated={onJobCreated} />\n                  </div>\n\n                  <div className=\"mt-3 flex flex-wrap items-center justify-between gap-2\">\n                    <p className=\"text-[10px] text-slate-500 dark:text-slate-500\">\n                      Streams into the extraction canvas and JSON viewer below.\n                    </p>\n                    <div className=\"inline-flex items-center gap-1.5 rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-[10px] text-slate-600 shadow-sm dark:border-slate-700/70 dark:bg-slate-900/50 dark:text-slate-300\">\n                      <span className={cx(\"h-1.5 w-1.5 rounded-full\", statusDot)} />\n                      {rowLoading || previewLoading ? \"Pipeline running‚Ä¶\" : \"Idle\"}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* RIGHT: tight guidance stack */}\n              <div className=\"flex flex-col gap-3\">\n                <div className=\"rounded-2xl border border-slate-200 bg-white/80 px-4 py-4 text-[11px] text-slate-700 shadow-sm dark:border-slate-700/70 dark:bg-slate-950/50 dark:text-slate-100\">\n                  <p className=\"mb-2 text-[11px] font-medium uppercase tracking-[0.2em] text-slate-500 dark:text-slate-400\">\n                    Quick start\n                  </p>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-start gap-2\">\n                      <div className=\"mt-[1px] flex h-6 w-6 items-center justify-center rounded-lg border border-cyan-400/55 bg-cyan-500/10 text-[12px] font-semibold text-cyan-700 dark:border-cyan-400/40 dark:bg-cyan-500/15 dark:text-cyan-200\">\n                        1\n                      </div>\n                      <div className=\"min-w-0\">\n                        <p className=\"font-semibold text-slate-900 dark:text-slate-50\">\n                          Step 1\n                        </p>\n                        <p className=\"text-[11px] text-slate-600 dark:text-slate-300\">\n                          Paste a URL and submit.\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-2\">\n                      <div className=\"mt-[1px] flex h-6 w-6 items-center justify-center rounded-lg border border-emerald-400/55 bg-emerald-500/10 text-[12px] font-semibold text-emerald-700 dark:border-emerald-400/40 dark:bg-emerald-500/15 dark:text-emerald-200\">\n                        2\n                      </div>\n                      <div className=\"min-w-0\">\n                        <p className=\"font-semibold text-slate-900 dark:text-slate-50\">\n                          Step 2\n                        </p>\n                        <p className=\"text-[11px] text-slate-600 dark:text-slate-300\">\n                          Review the canvas + JSON viewer in real time.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"rounded-2xl border border-cyan-200 bg-white/80 px-4 py-4 text-[11px] text-slate-700 shadow-sm dark:border-cyan-500/30 dark:bg-slate-950/50 dark:text-slate-100\">\n                  <p className=\"mb-1 font-semibold uppercase tracking-[0.18em] text-cyan-700 dark:text-cyan-200\">\n                    Example extraction\n                  </p>\n                  <p className=\"leading-relaxed\">\n                    Unified JSON with name, brand, attributes, features, manuals, images, and\n                    normalized specs ‚Äî ready for any downstream module.\n                  </p>\n                </div>\n\n                <div className=\"rounded-2xl border border-emerald-200 bg-white/80 px-4 py-4 text-[11px] text-slate-700 shadow-sm dark:border-emerald-400/30 dark:bg-slate-950/50 dark:text-slate-100\">\n                  <p className=\"mb-1 font-semibold text-emerald-700 dark:text-emerald-300\">\n                    Feeds the stack\n                  </p>\n                  <ul className=\"list-inside list-disc space-y-1\">\n                    <li>AvidiaDescribe for copy-first flows</li>\n                    <li>AvidiaSEO for URL-first SEO pages</li>\n                    <li>Any external store / PIM as JSON</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n\n            {/* bottom mini value props */}\n            <div className=\"mt-4 grid gap-3 lg:grid-cols-3\">\n              <div className=\"inline-flex items-start gap-2 rounded-2xl border border-slate-200 bg-white/80 px-3 py-3 text-[11px] text-slate-700 shadow-sm dark:border-slate-700/70 dark:bg-slate-950/50 dark:text-slate-50\">\n                <div className=\"mt-[2px] flex h-5 w-5 items-center justify-center rounded-lg border border-cyan-400/70 bg-cyan-500/10 text-[12px] text-cyan-700 dark:bg-cyan-500/15 dark:text-cyan-200\">\n                  1\n                </div>\n                <div>\n                  <p className=\"font-semibold\">Opinionated normalization</p>\n                  <p className=\"text-[10px] text-slate-500 dark:text-slate-400\">\n                    Predictable schema for specs, manuals, images, and attributes.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"inline-flex items-start gap-2 rounded-2xl border border-slate-200 bg-white/80 px-3 py-3 text-[11px] text-slate-700 shadow-sm dark:border-slate-700/70 dark:bg-slate-950/50 dark:text-slate-50\">\n                <div className=\"mt-[2px] flex h-5 w-5 items-center justify-center rounded-lg border border-sky-400/70 bg-sky-500/10 text-[12px] text-sky-700 dark:bg-sky-500/15 dark:text-sky-200\">\n                  2\n                </div>\n                <div>\n                  <p className=\"font-semibold\">Debuggable end-to-end</p>\n                  <p className=\"text-[10px] text-slate-500 dark:text-slate-400\">\n                    Canvas, tabs, and JSON viewer reflect the same job state.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"inline-flex items-start gap-2 rounded-2xl border border-slate-200 bg-white/80 px-3 py-3 text-[11px] text-slate-700 shadow-sm dark:border-slate-700/70 dark:bg-slate-950/50 dark:text-slate-50\">\n                <div className=\"mt-[2px] flex h-5 w-5 items-center justify-center rounded-lg border border-emerald-400/70 bg-emerald-500/10 text-[12px] text-emerald-700 dark:bg-emerald-500/15 dark:text-emerald-200\">\n                  3\n                </div>\n                <div>\n                  <p className=\"font-semibold\">Built for downstream</p>\n                  <p className=\"text-[10px] text-slate-500 dark:text-slate-400\">\n                    Reuse ingestionId with SEO, Describe, and any exporter.\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        {/* WORKSPACE: Left = canvas (results), Right = JSON (no extra inner Y-scroll) */}\n        <section className=\"grid grid-cols-1 gap-6 lg:grid-cols-[minmax(0,1.6fr),minmax(0,1.1fr)]\">\n          {/* LEFT */}\n          <section className=\"flex flex-col gap-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-2xl shadow-slate-200/70 lg:p-5 dark:border-slate-700/70 dark:bg-slate-900/90 dark:shadow-slate-950/80\">\n            <div className=\"flex items-start justify-between gap-4\">\n              <div>\n                <h2 className=\"text-sm font-semibold text-slate-900 dark:text-slate-50\">\n                  Extraction canvas\n                </h2>\n                <p className=\"mt-1 max-w-xl text-[11px] text-slate-600 dark:text-slate-400\">\n                  A human-readable view of the current extraction. Preview reflects the ingest engine\n                  directly; Tabs under this section expose raw and normalized variants from your DB.\n                </p>\n              </div>\n\n              {jobId && (\n                <div className=\"ml-auto flex flex-col items-end gap-1\">\n                  <button\n                    onClick={() =>\n                      router.push(`/dashboard/seo?ingestionId=${encodeURIComponent(jobId)}`)\n                    }\n                    className=\"inline-flex items-center gap-1.5 rounded-lg bg-cyan-500 px-3 py-2 text-xs font-semibold text-slate-50 shadow-lg shadow-cyan-500/30 transition-transform hover:-translate-y-[1px] hover:bg-cyan-400 dark:text-slate-950\"\n                  >\n                    <span>Send to AvidiaSEO</span>\n                    <span className=\"text-[13px]\">‚Üó</span>\n                  </button>\n                  <p className=\"text-[10px] text-slate-500 dark:text-slate-500\">\n                    Reuses this ingestionId downstream.\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {/* Status strip */}\n            <div className=\"flex flex-wrap items-center gap-2 text-[11px]\">\n              <div className=\"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5 text-slate-600 shadow-sm dark:border-slate-700 dark:bg-slate-950/70 dark:text-slate-300\">\n                <span className={cx(\"h-1.5 w-1.5 rounded-full\", statusDot)} />\n                <span>{statusText}</span>\n              </div>\n\n              {rowError && (\n                <span className=\"inline-flex items-center gap-2 rounded-full border border-rose-300 bg-rose-50 px-3 py-1.5 text-rose-700 shadow-sm dark:border-rose-500/40 dark:bg-rose-950/70 dark:text-rose-100\">\n                  <span className=\"h-1.5 w-1.5 rounded-full bg-rose-500 dark:bg-rose-400\" />\n                  DB error: {String(rowError)}\n                </span>\n              )}\n\n              {previewError && !previewLoading && (\n                <span className=\"inline-flex items-center gap-2 rounded-full border border-amber-300 bg-amber-50 px-3 py-1.5 text-amber-700 shadow-sm dark:border-amber-500/40 dark:bg-amber-950/70 dark:text-amber-100\">\n                  <span className=\"h-1.5 w-1.5 rounded-full bg-amber-400\" />\n                  Preview: {previewError}\n                </span>\n              )}\n            </div>\n\n            {/* Preview card */}\n            <div className=\"mt-1\">\n              {previewLoading ? (\n                <div className=\"flex items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700 shadow-sm dark:border-slate-700 dark:bg-slate-950/70 dark:text-slate-300\">\n                  <div className=\"h-8 w-8 animate-spin rounded-full border-2 border-cyan-400/50 border-t-transparent\" />\n                  <div>\n                    <p className=\"font-medium text-slate-900 dark:text-slate-100\">\n                      Loading preview from ingest engine‚Ä¶\n                    </p>\n                    <p className=\"text-[11px] text-slate-500 dark:text-slate-400\">\n                      Tabs and JSON viewer update as soon as it returns.\n                    </p>\n                  </div>\n                </div>\n              ) : previewError && !payload ? (\n                <div className=\"rounded-2xl border border-amber-300 bg-amber-50 p-4 text-sm text-amber-800 shadow-sm dark:border-amber-500/40 dark:bg-amber-950/55 dark:text-amber-50\">\n                  Preview error: {previewError}\n                </div>\n              ) : payload ? (\n                <div className=\"rounded-2xl border border-slate-200 bg-slate-50 p-4 shadow-sm dark:border-slate-700 dark:bg-slate-950/70\">\n                  <h3 className=\"text-xl font-semibold text-slate-900 dark:text-slate-50\">\n                    {name ?? \"Untitled extraction\"}\n                  </h3>\n\n                  <div className=\"mt-2 flex flex-wrap gap-3 text-[11px] text-slate-600 dark:text-slate-300\">\n                    {quality !== undefined && (\n                      <span className=\"inline-flex items-center gap-1 rounded-full border border-emerald-300 bg-emerald-50 px-2.5 py-1 text-emerald-700 shadow-sm dark:border-emerald-400/40 dark:bg-slate-900/70 dark:text-emerald-100\">\n                        <span className=\"h-1.5 w-1.5 rounded-full bg-emerald-500 dark:bg-emerald-400\" />\n                        Quality score: <span className=\"font-semibold\">{quality}</span>\n                      </span>\n                    )}\n                    {needsReview !== undefined && (\n                      <span className=\"inline-flex items-center gap-1 rounded-full border border-amber-300 bg-amber-50 px-2.5 py-1 text-amber-700 shadow-sm dark:border-amber-400/40 dark:bg-slate-900/70 dark:text-amber-100\">\n                        <span className=\"h-1.5 w-1.5 rounded-full bg-amber-400\" />\n                        Needs manual review:{\" \"}\n                        <span className=\"font-semibold\">{String(Boolean(needsReview))}</span>\n                      </span>\n                    )}\n                  </div>\n\n                  {/* Features */}\n                  <div className=\"mt-4\">\n                    <p className=\"text-xs font-semibold text-slate-900 dark:text-slate-100\">\n                      Features (preview)\n                    </p>\n                    {Array.isArray(featuresHtml) ? (\n                      <ul className=\"mt-2 space-y-1 text-xs text-slate-700 dark:text-slate-200\">\n                        {featuresHtml.slice(0, 10).map((f: any, i: number) => (\n                          <li key={i} className=\"list-inside list-disc\">\n                            {typeof f === \"string\" ? f : JSON.stringify(f)}\n                          </li>\n                        ))}\n                        {featuresHtml.length > 10 && (\n                          <li className=\"text-slate-400\">‚Ä¶truncated</li>\n                        )}\n                      </ul>\n                    ) : typeof featuresHtml === \"string\" ? (\n                      <p className=\"mt-2 text-xs text-slate-700 dark:text-slate-200\">\n                        {featuresHtml}\n                      </p>\n                    ) : (\n                      <p className=\"mt-2 text-xs text-slate-400 dark:text-slate-500\">\n                        No features extracted yet.\n                      </p>\n                    )}\n                  </div>\n\n                  {/* Images */}\n                  <div className=\"mt-4\">\n                    <p className=\"mb-1 text-xs font-semibold text-slate-900 dark:text-slate-100\">\n                      Images\n                    </p>\n                    <div className=\"mt-2 grid grid-cols-3 gap-2 sm:grid-cols-4\">\n                      {Array.isArray(images) && images.length > 0 ? (\n                        images.slice(0, 8).map((img: any, i: number) => (\n                          // eslint-disable-next-line @next/next/no-img-element\n                          <img\n                            key={i}\n                            src={img?.url ?? img}\n                            alt={`img-${i}`}\n                            className=\"h-20 w-full rounded-lg border border-slate-200 bg-slate-100 object-cover dark:border-slate-700 dark:bg-slate-900\"\n                          />\n                        ))\n                      ) : (\n                        <div className=\"col-span-full text-xs text-slate-400 dark:text-slate-500\">\n                          No images detected.\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Manuals / PDFs */}\n                  <div className=\"mt-4\">\n                    <p className=\"mb-1 text-xs font-semibold text-slate-900 dark:text-slate-100\">\n                      Manuals &amp; PDFs\n                    </p>\n                    <div className=\"mt-1 flex flex-wrap gap-2\">\n                      {Array.isArray(pdfUrls) && pdfUrls.length > 0 ? (\n                        pdfUrls.slice(0, 8).map((u: string, i: number) => (\n                          <a\n                            key={i}\n                            href={u}\n                            target=\"_blank\"\n                            rel=\"noreferrer\"\n                            className=\"inline-flex items-center gap-1 rounded-full border border-cyan-300 bg-cyan-50 px-3 py-1.5 text-[11px] text-cyan-800 shadow-sm hover:border-cyan-400 hover:text-cyan-900 dark:border-cyan-400/40 dark:bg-slate-900/70 dark:text-cyan-200 dark:hover:border-cyan-300\"\n                          >\n                            <span className=\"text-[13px]\">üìÑ</span>\n                            <span>PDF {i + 1}</span>\n                          </a>\n                        ))\n                      ) : (\n                        <span className=\"ml-1 text-xs text-slate-400 dark:text-slate-500\">\n                          No manuals or PDFs found.\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-4 text-sm text-slate-500 shadow-sm dark:border-slate-700 dark:bg-slate-950/55 dark:text-slate-400\">\n                  Submit a product URL using the Extract launcher above. AvidiaExtract will display a\n                  human-friendly preview here and a full JSON view on the right.\n                </div>\n              )}\n            </div>\n\n            {/* TabsShell */}\n            <div id=\"extract-results\" className=\"mt-2\">\n              <div className=\"mb-2\">\n                <p className=\"text-xs font-semibold text-slate-900 dark:text-slate-100\">\n                  Ingest row &amp; raw views\n                </p>\n                <p className=\"text-[11px] text-slate-500 dark:text-slate-400\">\n                  Tabs expose different slices of the same ingest row (normalized, raw HTML, logs,\n                  etc) to help you debug.\n                </p>\n              </div>\n              <TabsShell job={row} loading={rowLoading} error={rowError} noDataMessage=\"Submit a URL to extract raw data\" />\n            </div>\n          </section>\n\n          {/* RIGHT (no forced inner Y scroll; keep it clean + consistent) */}\n          <aside className=\"rounded-3xl border border-slate-200 bg-white p-4 shadow-2xl shadow-slate-200/80 lg:p-5 dark:border-slate-700/70 dark:bg-slate-900/95 dark:shadow-slate-950/80\">\n            <div className=\"flex items-start justify-between gap-3\">\n              <div>\n                <h2 className=\"text-sm font-semibold text-slate-900 dark:text-slate-50\">\n                  Normalized JSON viewer\n                </h2>\n                <p className=\"mt-1 text-[11px] text-slate-500 dark:text-slate-400\">\n                  The exact payload your automations consume. Preferentially shows the normalized\n                  preview; falls back to the DB row when needed.\n                </p>\n              </div>\n              <div className=\"text-right text-[11px] text-slate-500 dark:text-slate-400\">\n                <div>\n                  {jobId ? (\n                    <>\n                      Job:{\" \"}\n                      <span className=\"font-mono text-[10px] text-cyan-700 dark:text-cyan-200\">\n                        {jobId.slice(0, 10)}‚Ä¶\n                      </span>\n                    </>\n                  ) : (\n                    \"No job yet\"\n                  )}\n                </div>\n                <div className=\"mt-1\">{row?.status ? `Status: ${row.status}` : \"\"}</div>\n              </div>\n            </div>\n\n            <div className=\"mt-4 rounded-2xl border border-slate-200 bg-slate-50 dark:border-slate-700 dark:bg-slate-950/70\">\n              <div className=\"flex items-center justify-between border-b border-slate-200 px-3 py-2 text-[11px] dark:border-slate-800\">\n                <span className=\"uppercase tracking-[0.18em] text-slate-500 dark:text-slate-400\">\n                  Payload explorer\n                </span>\n                <span className=\"text-[10px] text-slate-500 dark:text-slate-500\">\n                  {preview ? \"Preview ‚Ä¢ normalized\" : row ? \"DB row ‚Ä¢ normalized\" : \"Awaiting first extraction\"}\n                </span>\n              </div>\n\n              {/* No forced Y scroll here ‚Äî let the page scroll naturally. */}\n              <div className=\"p-2\">\n                <JsonViewer data={jsonViewerData} loading={!row && !!jobId && !preview} />\n              </div>\n            </div>\n          </aside>\n        </section>\n      </div>\n    </main>\n  );\n}\n","\"use client\";\n\nimport React from \"react\";\n\ntype TabsShellProps = {\n  job: any;\n  loading?: boolean;\n  error?: any;\n  noDataMessage?: string;\n};\n\n/**\n * TabsShell for the Extract page.\n *\n * Responsibility:\n * - Show deeper / technical details that complement the high-level preview:\n *   - Source SEO (scraped only, NOT AvidiaSEO)\n *   - Specs\n *   - Variants\n *   - Raw JSON / payload\n *   - Diagnostics\n *\n * The high-level \"preview\" card above this component owns:\n *   - Overview / description\n *   - Features\n *   - Images\n *   - Manuals / PDFs\n *\n * That separation avoids duplicate content on the screen.\n */\nexport default function TabsShell({\n  job,\n  loading,\n  error,\n  noDataMessage,\n}: TabsShellProps) {\n  const payload = job?.normalized_payload || job?.raw_payload || job || null;\n\n  const hasSourceSeo = !!payload?.source_seo;\n  const hasSpecs =\n    !!payload?.specs_json || !!payload?.specs || !!payload?.specs_payload;\n  const hasVariants =\n    Array.isArray(payload?.variants) && payload.variants.length > 0;\n\n  const rawJsonSource =\n    payload?.normalized_payload ??\n    payload?.raw_payload ??\n    payload ??\n    null;\n  const hasRaw = !!rawJsonSource;\n\n  const diagnostics = job?.diagnostics || payload?.diagnostics || null;\n  const hasDiagnostics =\n    diagnostics && Object.keys(diagnostics).length > 0;\n\n  // Handle outer states\n  if (!job && !loading) {\n    return <div>{noDataMessage}</div>;\n  }\n\n  if (loading && !job) {\n    return <div>Waiting for engine to complete‚Ä¶</div>;\n  }\n\n  if (error) {\n    return <div style={{ color: \"crimson\" }}>{String(error)}</div>;\n  }\n\n  // Build tab model (only advanced / non-duplicated sections)\n  const TAB_SOURCE_SEO = \"source_seo\";\n  const TAB_SPECS = \"specs\";\n  const TAB_VARIANTS = \"variants\";\n  const TAB_RAW = \"raw\";\n  const TAB_DIAGNOSTICS = \"diagnostics\";\n\n  const tabs = [\n    { id: TAB_SOURCE_SEO, label: \"Source SEO\", enabled: hasSourceSeo },\n    { id: TAB_SPECS, label: \"Specs\", enabled: hasSpecs },\n    { id: TAB_VARIANTS, label: \"Variants\", enabled: hasVariants },\n    { id: TAB_RAW, label: \"Raw JSON\", enabled: hasRaw },\n    { id: TAB_DIAGNOSTICS, label: \"Diagnostics\", enabled: true },\n  ] as const;\n\n  // Pick initial tab: first enabled, otherwise Raw, otherwise Diagnostics.\n  const firstEnabled =\n    tabs.find((t) => t.enabled)?.id || TAB_RAW || TAB_DIAGNOSTICS;\n\n  const [activeTab, setActiveTab] =\n    React.useState<string>(firstEnabled);\n\n  // When job changes, reset to first enabled tab\n  React.useEffect(() => {\n    const nextFirst =\n      tabs.find((t) => t.enabled)?.id || TAB_RAW || TAB_DIAGNOSTICS;\n    setActiveTab(nextFirst);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [hasSourceSeo, hasSpecs, hasVariants, hasRaw]);\n\n  return (\n    <div className=\"mt-4\">\n      {/* Tab headers */}\n      <div className=\"mb-3 flex flex-wrap gap-2\">\n        {tabs.map((tab) => {\n          const isActive = activeTab === tab.id;\n          const baseClasses =\n            \"px-3 py-1.5 text-sm rounded border transition-colors\";\n          const activeClasses =\n            \"bg-slate-900 text-white border-slate-900\";\n          const inactiveClasses = tab.enabled\n            ? \"bg-white text-slate-700 border-slate-300 hover:bg-slate-100\"\n            : \"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed\";\n\n          return (\n            <button\n              key={tab.id}\n              type=\"button\"\n              disabled={!tab.enabled}\n              onClick={() => tab.enabled && setActiveTab(tab.id)}\n              className={`${baseClasses} ${\n                isActive ? activeClasses : inactiveClasses\n              }`}\n            >\n              {tab.label}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Tab content */}\n      <div className=\"border rounded-md p-3 bg-slate-50 text-sm overflow-x-auto\">\n        {activeTab === TAB_SOURCE_SEO && (\n          <SourceSeoPanel payload={payload} hasSourceSeo={hasSourceSeo} />\n        )}\n\n        {activeTab === TAB_SPECS && (\n          <SpecsPanel payload={payload} hasSpecs={hasSpecs} />\n        )}\n\n        {activeTab === TAB_VARIANTS && (\n          <VariantsPanel payload={payload} hasVariants={hasVariants} />\n        )}\n\n        {activeTab === TAB_RAW && (\n          <RawPanel rawJsonSource={rawJsonSource} hasRaw={hasRaw} />\n        )}\n\n        {activeTab === TAB_DIAGNOSTICS && (\n          <DiagnosticsPanel diagnostics={diagnostics} />\n        )}\n      </div>\n    </div>\n  );\n}\n\n/** Source SEO: scraped only, never AvidiaSEO output */\nfunction SourceSeoPanel({\n  payload,\n  hasSourceSeo,\n}: {\n  payload: any;\n  hasSourceSeo: boolean;\n}) {\n  if (!hasSourceSeo) {\n    return (\n      <div className=\"text-slate-500\">\n        No scraped SEO fields were found on the source site.\n      </div>\n    );\n  }\n\n  const seo = payload.source_seo || {};\n\n  return (\n    <div className=\"space-y-2\">\n      <table className=\"w-full text-sm border-collapse\">\n        <tbody>\n          <SeoRow label=\"Source H1\" value={seo.source_h1} />\n          <SeoRow label=\"Title Tag\" value={seo.source_title_tag} />\n          <SeoRow\n            label=\"Meta Description\"\n            value={seo.source_meta_description}\n          />\n          <SeoRow label=\"Canonical\" value={seo.canonical} />\n          <SeoRow label=\"OG Title\" value={seo.og_title} />\n          <SeoRow\n            label=\"OG Description\"\n            value={seo.og_description}\n          />\n        </tbody>\n      </table>\n      <p className=\"mt-2 text-xs text-slate-600\">\n        These SEO fields were extracted from the source website. They\n        are{\" \"}\n        <strong>not generated or optimized by AvidiaTech</strong>.\n      </p>\n    </div>\n  );\n}\n\nfunction SeoRow({ label, value }: { label: string; value: any }) {\n  return (\n    <tr className=\"border-b last:border-none border-slate-200\">\n      <td className=\"font-semibold p-1.5 align-top w-40 text-slate-700\">\n        {label}\n      </td>\n      <td className=\"p-1.5 text-slate-800\">\n        {value ?? <span className=\"text-slate-400\">-</span>}\n      </td>\n    </tr>\n  );\n}\n\n/** Specs panel */\nfunction SpecsPanel({\n  payload,\n  hasSpecs,\n}: {\n  payload: any;\n  hasSpecs: boolean;\n}) {\n  if (!hasSpecs) {\n    return (\n      <div className=\"text-slate-500\">\n        Specs not present in this extraction.\n      </div>\n    );\n  }\n\n  const specsPayload =\n    payload.specs_json || payload.specs || payload.specs_payload;\n\n  return (\n    <pre className=\"bg-slate-900 text-slate-50 p-3 rounded text-xs whitespace-pre-wrap break-words\">\n      {JSON.stringify(specsPayload, null, 2)}\n    </pre>\n  );\n}\n\n/** Variants panel */\nfunction VariantsPanel({\n  payload,\n  hasVariants,\n}: {\n  payload: any;\n  hasVariants: boolean;\n}) {\n  if (!hasVariants) {\n    return (\n      <div className=\"text-slate-500\">\n        No variants detected for this product.\n      </div>\n    );\n  }\n\n  return (\n    <pre className=\"bg-slate-900 text-slate-50 p-3 rounded text-xs whitespace-pre-wrap break-words\">\n      {JSON.stringify(payload.variants, null, 2)}\n    </pre>\n  );\n}\n\n/** Raw JSON / payload panel */\nfunction RawPanel({\n  rawJsonSource,\n  hasRaw,\n}: {\n  rawJsonSource: any;\n  hasRaw: boolean;\n}) {\n  if (!hasRaw) {\n    return (\n      <div className=\"text-slate-500\">\n        No raw payload available for this job.\n      </div>\n    );\n  }\n\n  return (\n    <pre className=\"bg-slate-900 text-slate-50 p-3 rounded text-xs whitespace-pre-wrap break-words\">\n      {JSON.stringify(rawJsonSource, null, 2)}\n    </pre>\n  );\n}\n\n/** Diagnostics panel */\nfunction DiagnosticsPanel({ diagnostics }: { diagnostics: any }) {\n  if (!diagnostics || Object.keys(diagnostics).length === 0) {\n    return (\n      <div className=\"text-slate-500\">\n        No diagnostics were recorded for this extraction.\n      </div>\n    );\n  }\n\n  return (\n    <pre className=\"bg-amber-950 text-amber-50 p-3 rounded text-xs whitespace-pre-wrap break-words\">\n      {JSON.stringify(diagnostics, null, 2)}\n    </pre>\n  );\n}\n","\"use client\";\n\nimport React from \"react\";\n\ntype JsonViewerProps = {\n  data: unknown;\n  loading?: boolean;\n  /** how many levels should be expanded by default (when no filter) */\n  collapsedLevels?: number;\n};\n\n/**\n * Smart, human-friendly JSON viewer inspired by jsonformatter.org:\n *\n * - Auto-focuses on the \"useful\" root:\n *   - If shape is { ok, data: { normalized_payload } } => shows data.normalized_payload\n *   - Else if shape is { ok, data } => shows data\n *   - Else uses the provided object as-is.\n *\n * - Toolbar:\n *   - Shows which root is currently displayed (\"Root: data.normalized_payload\")\n *   - Search box to highlight matching keys/values (expands all nodes when searching)\n *   - Toggle to show the full envelope (raw response) vs focused root.\n *   - \"Copy JSON\" button to copy currently visible JSON.\n *   - \"Download JSON\" button to download currently visible JSON as a .json file.\n *\n * - Tree:\n *   - Collapsible objects/arrays with ‚ñæ/‚ñ∏ arrows\n *   - Indented, monospaced, with colored primitives\n *   - Object/array previews: \"{ 12 keys }\", \"[ 6 items ]\"\n */\nexport default function JsonViewer({\n  data,\n  loading,\n  collapsedLevels = 1,\n}: JsonViewerProps) {\n  const [expanded, setExpanded] = React.useState<Record<string, boolean>>({});\n  const [filter, setFilter] = React.useState(\"\");\n  const [showEnvelope, setShowEnvelope] = React.useState(false);\n  const [copied, setCopied] = React.useState(false);\n\n  const { displayRoot, rootLabel, envelope } = React.useMemo(\n    () => getDisplayRoot(data),\n    [data]\n  );\n\n  const effectiveData = showEnvelope && envelope ? envelope : displayRoot;\n  const effectiveLabel = showEnvelope && envelope ? \"full response\" : rootLabel;\n\n  const hasData =\n    effectiveData !== null &&\n    effectiveData !== undefined &&\n    !(typeof effectiveData === \"object\" &&\n      effectiveData !== null &&\n      Object.keys(effectiveData as any).length === 0);\n\n  const toggle = (path: string) => {\n    setExpanded((prev) => ({\n      ...prev,\n      [path]: !prev[path],\n    }));\n  };\n\n  const normalizedFilter = filter.trim().toLowerCase();\n\n  // Reset \"Copied\" label when data root changes\n  React.useEffect(() => {\n    setCopied(false);\n  }, [effectiveData]);\n\n  const handleCopy = React.useCallback(() => {\n    try {\n      const text = JSON.stringify(effectiveData as any, null, 2);\n      if (typeof navigator !== \"undefined\" && navigator.clipboard) {\n        navigator.clipboard.writeText(text);\n        setCopied(true);\n        setTimeout(() => setCopied(false), 1500);\n      }\n    } catch {\n      // ignore\n    }\n  }, [effectiveData]);\n\n  const handleDownload = React.useCallback(() => {\n    try {\n      const text = JSON.stringify(effectiveData as any, null, 2);\n      const blob = new Blob([text], { type: \"application/json\" });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = \"ingestion.json\";\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    } catch {\n      // ignore\n    }\n  }, [effectiveData]);\n\n  if (loading) {\n    return (\n      <div className=\"text-xs text-neutral-300\">\n        Loading JSON‚Ä¶\n      </div>\n    );\n  }\n\n  if (!hasData) {\n    return (\n      <div className=\"text-xs text-neutral-400\">\n        No JSON data available.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"text-xs text-neutral-50\">\n      {/* Toolbar */}\n      <div className=\"flex items-center justify-between gap-2 mb-2\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-[10px] uppercase tracking-wide text-neutral-400\">\n            Root\n          </span>\n          <code className=\"px-1.5 py-0.5 rounded bg-neutral-800 border border-neutral-700 text-[11px]\">\n            {effectiveLabel}\n          </code>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <input\n            type=\"text\"\n            value={filter}\n            onChange={(e) => setFilter(e.target.value)}\n            placeholder=\"Search key or value\"\n            className=\"bg-neutral-900 border border-neutral-700 rounded px-2 py-1 text-[11px] text-neutral-100 placeholder:text-neutral-500 focus:outline-none focus:ring-1 focus:ring-sky-500\"\n          />\n          {envelope && (\n            <button\n              type=\"button\"\n              onClick={() => setShowEnvelope((v) => !v)}\n              className={`px-2 py-1 rounded text-[11px] border ${\n                showEnvelope\n                  ? \"bg-neutral-200 text-neutral-900 border-neutral-300\"\n                  : \"bg-neutral-900 text-neutral-100 border-neutral-700 hover:bg-neutral-800\"\n              }`}\n            >\n              {showEnvelope ? \"Focused view\" : \"Full response\"}\n            </button>\n          )}\n          <button\n            type=\"button\"\n            onClick={handleCopy}\n            className=\"px-2 py-1 rounded text-[11px] border bg-neutral-900 text-neutral-100 border-neutral-700 hover:bg-neutral-800\"\n          >\n            {copied ? \"Copied\" : \"Copy JSON\"}\n          </button>\n          <button\n            type=\"button\"\n            onClick={handleDownload}\n            className=\"px-2 py-1 rounded text-[11px] border bg-neutral-900 text-neutral-100 border-neutral-700 hover:bg-neutral-800\"\n          >\n            Download JSON\n          </button>\n        </div>\n      </div>\n\n      {/* Tree */}\n      <div className=\"bg-neutral-900/60 border border-neutral-700 rounded-md p-3 font-mono overflow-auto max-h-[460px]\">\n        <JsonNode\n          name={undefined}\n          value={effectiveData}\n          path=\"$\"\n          level={0}\n          expandedState={expanded}\n          toggle={toggle}\n          defaultExpandedLevels={collapsedLevels}\n          filter={normalizedFilter}\n        />\n      </div>\n    </div>\n  );\n}\n\ntype JsonNodeProps = {\n  name?: string;\n  value: unknown;\n  path: string;\n  level: number;\n  expandedState: Record<string, boolean>;\n  toggle: (path: string) => void;\n  defaultExpandedLevels: number;\n  filter: string;\n};\n\nfunction JsonNode({\n  name,\n  value,\n  path,\n  level,\n  expandedState,\n  toggle,\n  defaultExpandedLevels,\n  filter,\n}: JsonNodeProps) {\n  const type = getType(value);\n  const isComplex = type === \"object\" || type === \"array\";\n\n  const indent = level * 14; // px\n\n  // When searching, expand all complex nodes so matches are visible.\n  const isExpanded =\n    expandedState[path] ??\n    (filter ? true : level < defaultExpandedLevels);\n\n  const label = name !== undefined ? name : undefined;\n\n  const filterMatch = filter\n    ? matchesFilter(label, value, filter)\n    : false;\n\n  const handleToggle = () => {\n    if (!isComplex) return;\n    toggle(path);\n  };\n\n  if (!isComplex) {\n    return (\n      <div\n        style={{ paddingLeft: indent }}\n        className={`leading-5 ${\n          filter && filterMatch ? \"bg-amber-900/60\" : \"\"\n        }`}\n      >\n        {label !== undefined && (\n          <span className=\"text-sky-300 mr-1\">\n            {JSON.stringify(label)}:\n          </span>\n        )}\n        <Primitive value={value} />\n      </div>\n    );\n  }\n\n  // Object / array with explicit tuple typing to satisfy TS\n  const entries: [string, unknown][] =\n    type === \"object\"\n      ? Object.entries(value as Record<string, unknown>)\n      : (value as unknown[]).map(\n          (v, i) => [String(i), v] as [string, unknown]\n        );\n\n  const bracketOpen = type === \"object\" ? \"{\" : \"[\";\n  const bracketClose = type === \"object\" ? \"}\" : \"]\";\n  const summary =\n    type === \"object\"\n      ? `${entries.length} key${entries.length === 1 ? \"\" : \"s\"}`\n      : `${entries.length} item${entries.length === 1 ? \"\" : \"s\"}`;\n\n  return (\n    <div className=\"leading-5\">\n      {/* Header line */}\n      <div\n        style={{ paddingLeft: indent }}\n        className={`cursor-pointer select-none flex items-start gap-1 rounded-sm ${\n          filter && filterMatch\n            ? \"bg-amber-900/60\"\n            : \"hover:bg-neutral-800/60\"\n        }`}\n        onClick={handleToggle}\n      >\n        <span className=\"mt-[1px] text-neutral-400\">\n          {isExpanded ? \"‚ñæ\" : \"‚ñ∏\"}\n        </span>\n\n        <div>\n          {label !== undefined && (\n            <span className=\"text-sky-300 mr-1\">\n              {JSON.stringify(label)}:\n            </span>\n          )}\n          <span className=\"text-neutral-300\">{bracketOpen}</span>\n          <span className=\"ml-1 text-[11px] text-neutral-500\">\n            {summary}\n          </span>\n          <span className=\"text-neutral-300\">\n            {!isExpanded && entries.length > 0 ? \" ‚Ä¶\" : \"\"}\n            {entries.length === 0 && bracketClose}\n          </span>\n        </div>\n      </div>\n\n      {/* Children */}\n      {isExpanded && entries.length > 0 && (\n        <div>\n          {entries.map(([key, val], idx) => {\n            const k = key as string;\n            const v = val;\n            const childPath = `${path}.${k}`;\n            const isLast = idx === entries.length - 1;\n            return (\n              <div key={childPath}>\n                <JsonNode\n                  name={type === \"array\" ? undefined : k}\n                  value={v}\n                  path={childPath}\n                  level={level + 1}\n                  expandedState={expandedState}\n                  toggle={toggle}\n                  defaultExpandedLevels={defaultExpandedLevels}\n                  filter={filter}\n                />\n                {!isLast && (\n                  <span\n                    style={{\n                      paddingLeft: (level + 1) * 14,\n                    }}\n                    className=\"text-neutral-500\"\n                  >\n                    ,\n                  </span>\n                )}\n              </div>\n            );\n          })}\n          <div\n            style={{ paddingLeft: indent }}\n            className=\"text-neutral-300\"\n          >\n            {bracketClose}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction Primitive({ value }: { value: unknown }) {\n  const type = getType(value);\n\n  if (value === null) {\n    return <span className=\"text-amber-300\">null</span>;\n  }\n\n  if (type === \"string\") {\n    return (\n      <span className=\"text-emerald-300\">\n        {JSON.stringify(value)}\n      </span>\n    );\n  }\n\n  if (type === \"number\") {\n    return (\n      <span className=\"text-orange-300\">\n        {String(value)}\n      </span>\n    );\n  }\n\n  if (type === \"boolean\") {\n    return (\n      <span className=\"text-indigo-300\">\n        {String(value)}\n      </span>\n    );\n  }\n\n  return (\n    <span className=\"text-neutral-300\">\n      {JSON.stringify(value)}\n    </span>\n  );\n}\n\nfunction getType(\n  value: unknown\n):\n  | \"null\"\n  | \"string\"\n  | \"number\"\n  | \"boolean\"\n  | \"object\"\n  | \"array\"\n  | \"other\" {\n  if (value === null) return \"null\";\n  if (Array.isArray(value)) return \"array\";\n  const t = typeof value;\n  if (t === \"string\") return \"string\";\n  if (t === \"number\") return \"number\";\n  if (t === \"boolean\") return \"boolean\";\n  if (t === \"object\") return \"object\";\n  return \"other\";\n}\n\n/**\n * Decide what to show as the \"root\" for readability.\n * - If data is { ok, data: { normalized_payload } }, prefer normalized_payload.\n * - Else if data is { ok, data }, prefer data.\n * - Else show the object as-is.\n */\nfunction getDisplayRoot(value: unknown): {\n  displayRoot: unknown;\n  rootLabel: string;\n  envelope: unknown | null;\n} {\n  if (value && typeof value === \"object\" && !Array.isArray(value)) {\n    const obj = value as any;\n    if (\"data\" in obj && obj.data && typeof obj.data === \"object\") {\n      const data = obj.data;\n      if (\"normalized_payload\" in data && data.normalized_payload) {\n        return {\n          displayRoot: data.normalized_payload,\n          rootLabel: \"data.normalized_payload\",\n          envelope: value,\n        };\n      }\n      return {\n        displayRoot: data,\n        rootLabel: \"data\",\n        envelope: value,\n      };\n    }\n  }\n\n  return {\n    displayRoot: value,\n    rootLabel: \"root\",\n    envelope: null,\n  };\n}\n\n/** Filter: does this node match the search term? */\nfunction matchesFilter(\n  name: string | undefined,\n  value: unknown,\n  filter: string\n): boolean {\n  if (!filter) return false;\n\n  const needle = filter.toLowerCase();\n\n  if (name && name.toLowerCase().includes(needle)) {\n    return true;\n  }\n\n  if (value === null || value === undefined) return false;\n\n  if (\n    typeof value === \"string\" ||\n    typeof value === \"number\" ||\n    typeof value === \"boolean\"\n  ) {\n    return String(value).toLowerCase().includes(needle);\n  }\n\n  // Buried / nested values: stringify to search within\n  try {\n    const asString = JSON.stringify(value);\n    return asString.toLowerCase().includes(needle);\n  } catch {\n    return false;\n  }\n}\n","import { useEffect, useState } from \"react\";\n\n/**\n * Poll GET /api/v1/ingest/:id and return { row, loading, error }.\n * Use this for the Extract dual-pane UI.\n */\nexport function useIngestRow(jobId: string | null, intervalMs = 1500) {\n  const [row, setRow] = useState<any | null>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!jobId) {\n      setRow(null);\n      setLoading(false);\n      setError(null);\n      return;\n    }\n\n    let mounted = true;\n    let timer: number | undefined;\n\n    const fetchRow = async () => {\n      setLoading(true);\n      try {\n        const res = await fetch(`/api/v1/ingest/${encodeURIComponent(jobId)}`);\n        if (!res.ok) {\n          const txt = await res.text().catch(() => \"\");\n          throw new Error(`status fetch failed: ${res.status} ${txt}`);\n        }\n        const json = await res.json();\n        const data = json?.job ? json.job : json;\n        if (!mounted) return;\n        setRow(data);\n        setError(null);\n        setLoading(false);\n        if (!data.status || data.status === \"pending\") timer = window.setTimeout(fetchRow, intervalMs);\n      } catch (err: any) {\n        if (!mounted) return;\n        setError(String(err?.message || err));\n        setLoading(false);\n        timer = window.setTimeout(fetchRow, intervalMs * 2);\n      }\n    };\n\n    fetchRow();\n\n    return () => {\n      mounted = false;\n      if (timer) window.clearTimeout(timer);\n    };\n  }, [jobId, intervalMs]);\n\n  return { row, loading, error };\n}\n","\"use client\";\nimport React, { useState } from \"react\";\n\n/**\n * Header: URL input + Extract button.\n *\n * Updated (2025-12):\n * - Remove old module toggles (SEO/specs/docs/variants). These caused invalid ingest jobs\n *   (includeSeo=true with includeSpecs=false), which breaks strict compliance downstream.\n * - Server now always runs a full extract with specs enabled.\n */\nexport default function ExtractHeader({\n  onJobCreated,\n}: {\n  onJobCreated: (jobId: string, url: string) => void;\n}) {\n  const [url, setUrl] = useState(\"\");\n  const [exportType, setExportType] = useState<\"JSON\" | \"Shopify\" | \"BigCommerce\">(\n    \"JSON\"\n  );\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState<string | null>(null);\n\n  async function submit() {\n    if (!url) {\n      setErr(\"Please enter a URL\");\n      return;\n    }\n    setErr(null);\n    setLoading(true);\n    try {\n      const body: any = {\n        url,\n        export_type: exportType,\n        correlationId: `corr_${Date.now()}`,\n        fullExtract: true, // always full extract now\n      };\n\n      // include Clerk cookies/session so the server sees an authenticated user\n      const res = await fetch(\"/api/v1/ingest\", {\n        method: \"POST\",\n        credentials: \"same-origin\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify(body),\n      });\n\n      const json = await res.json().catch(() => null);\n\n      if (!res.ok) {\n        const message =\n          json?.error || json?.message || `Ingest failed (${res.status})`;\n        setErr(message);\n        return;\n      }\n\n      const id = json?.jobId || json?.job_id || json?.id;\n      if (id) {\n        onJobCreated(String(id), url);\n      } else {\n        setErr(\"Ingest succeeded but no job id returned\");\n      }\n    } catch (err: any) {\n      setErr(String(err?.message || err));\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\", gap: 12 }}>\n      <div style={{ display: \"flex\", gap: 8 }}>\n        <input\n          aria-label=\"Product URL to ingest\"\n          value={url}\n          onChange={(e) => setUrl(e.target.value)}\n          placeholder=\"https://manufacturer.com/product/xyz\"\n          style={{\n            flex: 1,\n            padding: \"8px 12px\",\n            borderRadius: 6,\n            border: \"1px solid #d1d5db\",\n          }}\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\") submit();\n          }}\n        />\n        <button\n          onClick={submit}\n          disabled={loading}\n          style={{\n            padding: \"8px 14px\",\n            background: \"#2563eb\",\n            color: \"white\",\n            borderRadius: 6,\n          }}\n        >\n          {loading ? \"Extracting‚Ä¶\" : \"Extract Product\"}\n        </button>\n      </div>\n\n      <div style={{ display: \"flex\", gap: 12, alignItems: \"center\", flexWrap: \"wrap\" }}>\n        <select\n          value={exportType}\n          onChange={(e) => setExportType(e.target.value as any)}\n          style={{ marginLeft: \"auto\", padding: 6 }}\n        >\n          <option value=\"JSON\">JSON</option>\n          <option value=\"Shopify\">Shopify</option>\n          <option value=\"BigCommerce\">BigCommerce</option>\n        </select>\n      </div>\n\n      {err && <div style={{ color: \"crimson\" }}>{err}</div>}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}