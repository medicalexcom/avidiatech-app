{"version":3,"sources":["../../../../src/app/sign-in/%5B%5B...index%5D%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { SignIn } from \"@clerk/nextjs\";\nimport { useSearchParams } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\n\nexport default function SignInPage() {\n  const params = useSearchParams();\n  const redirect = params?.get(\"redirect\") ?? params?.get(\"redirect_url\") ?? \"/dashboard\";\n\n  const [clerkFailed, setClerkFailed] = useState(false);\n  const [clerkErrorText, setClerkErrorText] = useState<string | null>(null);\n\n  function hasClerkUI(): boolean {\n    if (typeof document === \"undefined\") return false;\n    const selectors = [\n      \"[data-clerk-modal]\",\n      \".clerk-modal\",\n      \".clerk-sign-in\",\n      \".clerk-root\",\n      \"#__clerk_root\",\n      \"form[action*=\\\"/sign-in\\\"]\",\n      \"input[name=\\\"identifier\\\"]\",\n      \"input[name=\\\"email\\\"]\",\n    ];\n    return selectors.some((sel) => !!document.querySelector(sel));\n  }\n\n  useEffect(() => {\n    const t = setTimeout(async () => {\n      if (hasClerkUI()) return;\n      setClerkFailed(true);\n      try {\n        const frontendApi = process.env.NEXT_PUBLIC_CLERK_FRONTEND_API || \"\";\n        const url = `https://${frontendApi}/v1/client`;\n        const res = await fetch(url);\n        const text = await res.text();\n        setClerkErrorText(`status:${res.status} body: ${text}`);\n      } catch (e: any) {\n        setClerkErrorText(String(e));\n      }\n    }, 4000);\n\n    return () => clearTimeout(t);\n  }, []);\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-gray-50 px-4 py-12\">\n      <div className=\"w-full max-w-md rounded-2xl bg-white p-8 shadow\">\n        {!clerkFailed ? (\n          <SignIn routing=\"path\" path=\"/sign-in\" signUpUrl=\"/sign-up\" afterSignInUrl={redirect} />\n        ) : (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-lg font-semibold\">Sign in</h2>\n            <p className=\"text-sm text-slate-600\">We couldn't load the sign-in widget. You can try one of the options below:</p>\n            <div className=\"flex flex-col gap-2\">\n              <a href=\"/sign-up\" className=\"inline-flex items-center justify-center rounded-lg bg-blue-500 px-4 py-2 text-sm font-semibold text-white\">\n                Create an account\n              </a>\n              <a href=\"/\" className=\"inline-flex items-center justify-center rounded-lg border px-4 py-2 text-sm font-medium\">\n                Back to home\n              </a>\n              <button onClick={() => location.reload()} className=\"inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm border\">\n                Retry loading\n              </button>\n            </div>\n            <div className=\"mt-3 text-xs text-slate-500\">\n              <p>If this persists, please check the browser console or paste the Clerk error below for help:</p>\n              <pre className=\"mt-2 overflow-auto rounded bg-gray-100 p-2 text-xs text-red-600\">{clerkErrorText ?? \"No detailed error captured yet.\"}</pre>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,eAAA,AAAe,IACxB,EAAW,GAAQ,IAAI,aAAe,GAAQ,IAAI,iBAAmB,aAErE,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAmCpE,MAlBA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAI,WAAW,UACnB,IAAI,CAhBN,AAAwB,aAApB,AAAiC,AAgBjB,OAhBT,AAAiC,UAWrC,AAVW,CAChB,qBACA,eACA,iBACA,cACA,gBACA,2BACA,2BACA,sBACD,CACgB,IAAI,CAAC,AAAC,GAAQ,CAAC,CAAC,SAAS,aAAa,CAAC,GAXZ,GAiB1C,GAAe,GACf,GAAI,CACF,IAAM,EAAc,QAAQ,GAAG,CAAC,8BAA8B,EAAI,GAC5D,EAAM,CAAC,QAAQ,EAAE,EAAY,UAAU,CAAC,CACxC,EAAM,MAAM,MAAM,GAClB,EAAO,MAAM,EAAI,IAAI,GAC3B,EAAkB,CAAC,OAAO,EAAE,EAAI,MAAM,CAAC,OAAO,EAAE,EAAA,CAAM,CACxD,CAAE,MAAO,EAAQ,CACf,EAAkB,OAAO,GAC3B,EACF,EAAG,KAEH,MAAO,IAAM,aAAa,EAC5B,EAAG,EAAE,EAGH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2DACX,AAAD,EAGC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,YACtC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,+EACtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,WAAW,UAAU,qHAA4G,sBAGzI,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,IAAI,UAAU,mGAA0F,iBAGhH,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,SAAS,MAAM,GAAI,UAAU,uFAA8E,qBAIpI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,gGACH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2EAAmE,GAAkB,0CAlBxG,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,OAAO,KAAK,WAAW,UAAU,WAAW,eAAgB,OAyBtF"}