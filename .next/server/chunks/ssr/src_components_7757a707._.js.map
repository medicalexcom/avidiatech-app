{"version":3,"sources":["../../../../src/components/BackToDashboard.tsx","../../../../src/components/settings/ProfileForm.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\n/**\n * BackToDashboard button\n * - tries history.back() when possible, otherwise falls back to /dashboard\n * - use in settings pages so users can return to the main dashboard quickly\n */\n\nexport default function BackToDashboard() {\n  function goBack(e: React.MouseEvent) {\n    e.preventDefault();\n    try {\n      if (window.history.length > 1) {\n        window.history.back();\n      } else {\n        window.location.href = \"/dashboard\";\n      }\n    } catch {\n      window.location.href = \"/dashboard\";\n    }\n  }\n\n  return (\n    <a href=\"/dashboard\" onClick={goBack} className=\"inline-flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300 hover:underline\">\n      <span aria-hidden>←</span>\n      <span>Back to dashboard</span>\n    </a>\n  );\n}\n","\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\n\n/**\n * Premium Profile form\n * - Avatar preview + name\n * - Email read-only\n * - Language/timezone preferences\n * - Notification toggles\n * - Save with optimistic UI + toast messages\n */\n\ntype State = {\n  fullName: string;\n  language: string;\n  timezone: string;\n  notifications: boolean;\n};\n\nconst TIMEZONES = [\"UTC\", \"America/New_York\", \"Europe/London\", \"Asia/Tokyo\"];\nconst LANGS = [\n  { code: \"en\", label: \"English\" },\n  { code: \"es\", label: \"Español\" },\n  { code: \"fr\", label: \"Français\" },\n];\n\nexport default function ProfileForm() {\n  const { user } = useUser();\n  const [state, setState] = useState<State>({\n    fullName: user?.fullName ?? \"\",\n    language: \"en\",\n    timezone: \"UTC\",\n    notifications: true,\n  });\n  const [saving, setSaving] = useState(false);\n  const [msg, setMsg] = useState<string | null>(null);\n\n  useEffect(() => {\n    setState((s) => ({ ...s, fullName: user?.fullName ?? \"\" }));\n  }, [user?.fullName]);\n\n  async function onSave() {\n    setSaving(true);\n    setMsg(null);\n    try {\n      const res = await fetch(\"/api/settings/profile\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(state),\n      });\n      const json = await res.json();\n      if (!res.ok) throw new Error(json?.error || \"Failed saving\");\n      setMsg(\"Saved successfully\");\n      // Optionally update Clerk profile (if allowed) here\n    } catch (err: any) {\n      setMsg(err?.message || String(err));\n    } finally {\n      setSaving(false);\n      setTimeout(() => setMsg(null), 3000);\n    }\n  }\n\n  return (\n    <div className=\"max-w-4xl\">\n      <div className=\"bg-white dark:bg-slate-900 border rounded-lg p-6 shadow-sm\">\n        <div className=\"flex items-start gap-6\">\n          <div className=\"w-36 flex-shrink-0\">\n            <img src={(user as any)?.imageUrl ?? \"/default-avatar.png\"} alt=\"avatar\" className=\"w-32 h-32 rounded-lg object-cover\" />\n            <div className=\"mt-3 text-xs text-slate-500 dark:text-slate-400\">Pro tip: upload a clear face photo for your account</div>\n          </div>\n\n          <div className=\"flex-1\">\n            <h2 className=\"text-lg font-semibold\">Profile</h2>\n            <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">Personalize your account and preferences</p>\n\n            <div className=\"mt-4 grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-xs font-medium\">Full name</label>\n                <input value={state.fullName} onChange={(e) => setState({ ...state, fullName: e.target.value })} className=\"mt-1 w-full border rounded px-3 py-2 bg-white/80 dark:bg-slate-800\" />\n              </div>\n\n              <div>\n                <label className=\"block text-xs font-medium\">Email</label>\n                <input value={(user as any)?.primaryEmailAddress?.emailAddress ?? (user as any)?.emailAddresses?.[0]?.emailAddress ?? \"\"} readOnly className=\"mt-1 w-full border rounded px-3 py-2 bg-slate-50 dark:bg-slate-800\" />\n              </div>\n\n              <div>\n                <label className=\"block text-xs font-medium\">Language</label>\n                <select className=\"mt-1 w-full border rounded px-3 py-2 bg-white/80 dark:bg-slate-800\" value={state.language} onChange={(e) => setState({ ...state, language: e.target.value })}>\n                  {LANGS.map((l) => (\n                    <option key={l.code} value={l.code}>\n                      {l.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-xs font-medium\">Time zone</label>\n                <select className=\"mt-1 w-full border rounded px-3 py-2 bg-white/80 dark:bg-slate-800\" value={state.timezone} onChange={(e) => setState({ ...state, timezone: e.target.value })}>\n                  {TIMEZONES.map((t) => (\n                    <option key={t} value={t}>\n                      {t}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div className=\"col-span-2\">\n                <label className=\"inline-flex items-center gap-2\">\n                  <input type=\"checkbox\" checked={state.notifications} onChange={(e) => setState({ ...state, notifications: e.target.checked })} />\n                  <span className=\"text-sm\">Receive product & billing notifications</span>\n                </label>\n              </div>\n            </div>\n\n            <div className=\"mt-6 flex items-center gap-3\">\n              <button onClick={onSave} disabled={saving} className=\"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\">\n                {saving ? \"Saving…\" : \"Save changes\"}\n              </button>\n              <button onClick={() => setState({ fullName: user?.fullName ?? \"\", language: \"en\", timezone: \"UTC\", notifications: true })} className=\"px-4 py-2 border rounded\">\n                Reset\n              </button>\n              {msg && <div className=\"text-sm text-slate-500 dark:text-slate-400\">{msg}</div>}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}