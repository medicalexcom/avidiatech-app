module.exports=[37839,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(null);(0,c.useEffect)(()=>{i&&(async()=>{let a=await fetch(`/api/v1/api-keys?tenant_id=${encodeURIComponent(i)}`);d((await a.json()).keys||[])})()},[i]);let m=async()=>{if(!g||!i)return;f(!0);let a=await fetch("/api/v1/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_id:i,name:g})}),b=await a.json();f(!1),b.key&&l(b.key);let c=await fetch(`/api/v1/api-keys?tenant_id=${encodeURIComponent(i)}`);d((await c.json()).keys||[]),h("")},n=async a=>{await fetch("/api/v1/api-keys",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a})});let b=await fetch(`/api/v1/api-keys?tenant_id=${encodeURIComponent(i)}`);d((await b.json()).keys||[])};return(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"API Keys"}),(0,b.jsx)("p",{className:"mb-4 text-sm text-gray-600",children:"Manage programmatic access to your AvidiaTech tenant.  Only owners and admins can create or revoke keys."}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("input",{type:"text",value:i,onChange:a=>j(a.target.value),placeholder:"Tenant ID",className:"border rounded px-2 py-1 mr-2 text-sm"}),(0,b.jsx)("input",{type:"text",value:g,onChange:a=>h(a.target.value),placeholder:"Key name",className:"border rounded px-2 py-1 mr-2 text-sm"}),(0,b.jsx)("button",{onClick:m,disabled:!i||!g||e,className:"bg-blue-600 hover:bg-blue-700 text-white text-sm px-3 py-1 rounded",children:e?"Creating…":"Create key"})]}),k&&(0,b.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-gray-800",children:[(0,b.jsx)("p",{className:"font-semibold mb-1",children:"New key generated"}),(0,b.jsx)("p",{className:"break-all",children:(0,b.jsx)("code",{children:k})}),(0,b.jsx)("p",{className:"text-red-600 mt-1",children:"This is the only time you’ll see the full key. Store it securely."})]}),(0,b.jsxs)("table",{className:"min-w-full text-sm border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b text-left",children:[(0,b.jsx)("th",{className:"py-2",children:"Name"}),(0,b.jsx)("th",{className:"py-2",children:"Prefix"}),(0,b.jsx)("th",{className:"py-2",children:"Created"}),(0,b.jsx)("th",{className:"py-2",children:"Revoked"}),(0,b.jsx)("th",{className:"py-2"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"py-2",children:a.name}),(0,b.jsx)("td",{className:"py-2",children:a.prefix}),(0,b.jsx)("td",{className:"py-2",children:a.created_at?.slice(0,10)}),(0,b.jsx)("td",{className:"py-2",children:a.revoked_at?a.revoked_at.slice(0,10):"-"}),(0,b.jsx)("td",{className:"py-2",children:!a.revoked_at&&(0,b.jsx)("button",{onClick:()=>n(a.id),className:"text-red-600 hover:underline",children:"Revoke"})})]},a.id))})]})]})}a.s(["default",()=>d])}];

//# sourceMappingURL=src_app_dashboard_api-keys_page_tsx_caa631da._.js.map