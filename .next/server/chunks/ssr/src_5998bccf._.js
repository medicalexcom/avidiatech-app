module.exports=[82722,12171,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(69769);function e({open:a,title:d="Confirm",description:e,confirmLabel:f="Confirm",cancelLabel:g="Cancel",onConfirm:h,onCancel:i,onClose:j}){let k=(0,c.useRef)(null),l=(0,c.useRef)(null),m=(0,c.useRef)(null);return((0,c.useEffect)(()=>{if(a)return k.current?.focus(),document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b);function b(a){if("Escape"===a.key)a.preventDefault(),(j??i)?.();else if("Tab"===a.key){let b=k.current?.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!b||0===b.length)return;let c=b[0],d=b[b.length-1];a.shiftKey&&document.activeElement===c?(a.preventDefault(),d.focus()):a.shiftKey||document.activeElement!==d||(a.preventDefault(),c.focus())}}},[a,i,j]),a)?(0,b.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"confirm-title",tabIndex:-1,ref:k,className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:()=>(j??i)?.()}),(0,b.jsxs)("div",{className:"bg-white rounded shadow-lg max-w-lg w-full p-6 relative z-10",children:[(0,b.jsx)("h2",{id:"confirm-title",className:"text-lg font-medium",children:d}),e&&(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:e}),(0,b.jsxs)("div",{className:"mt-4 flex justify-end gap-3",children:[(0,b.jsx)("button",{ref:l,onClick:()=>(j??i)?.(),className:"px-3 py-1 rounded bg-gray-100",children:g}),(0,b.jsx)("button",{ref:m,onClick:h,className:"px-3 py-1 rounded bg-red-600 text-white",children:f})]})]})]}):null}a.s(["default",0,({integrationId:a,isOpen:e,onClose:f})=>{let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(null),m=(0,c.useRef)(null),n=(0,d.useToast)();return((0,c.useEffect)(()=>{if(!e||!a)return;let b=!0;return h(!0),l(null),fetch(`/api/v1/integrations/${a}`).then(a=>a.json()).then(a=>{b&&(a.ok?j(a.integration??a):(l(a.error??"Failed to load integration"),j(null)))}).catch(a=>{b&&l(String(a))}).finally(()=>{b&&h(!1)}),()=>{b=!1}},[e,a]),(0,c.useEffect)(()=>{e&&setTimeout(()=>m.current?.focus(),0)},[e]),e)?(0,b.jsxs)("div",{className:"fixed inset-0 z-[60] flex",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:f}),(0,b.jsxs)("aside",{ref:m,tabIndex:-1,className:"ml-auto w-full max-w-lg bg-white dark:bg-slate-900 shadow-xl p-6 overflow-auto","aria-label":"Connector details",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Connector details"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Inspect and run actions for this connector."})]}),(0,b.jsx)("button",{onClick:f,"aria-label":"Close",className:"ml-4 rounded p-1 text-gray-600 hover:text-gray-900",children:"✕"})]}),g?(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Loading…"}):k?(0,b.jsxs)("div",{className:"text-sm text-rose-600",children:["Error: ",k]}):i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Provider: ",(0,b.jsx)("strong",{className:"text-gray-800",children:i.provider??"—"})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Name: ",(0,b.jsx)("strong",{className:"text-gray-800",children:i.name??i.id})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Created: ",(0,b.jsx)("strong",{className:"text-gray-800",children:i.created_at??"—"})]})]}),(0,b.jsxs)("section",{className:"mt-4",children:[(0,b.jsx)("h3",{className:"font-medium mb-2",children:"Configuration"}),(0,b.jsx)("pre",{className:"text-xs bg-gray-100 dark:bg-slate-800 p-3 rounded max-h-44 overflow-auto",children:JSON.stringify(i.config??{},null,2)})]}),(0,b.jsxs)("section",{className:"mt-4",children:[(0,b.jsx)("h3",{className:"font-medium mb-2",children:"Schedule"}),i.schedule?(0,b.jsx)("pre",{className:"text-sm bg-gray-50 dark:bg-slate-800 p-2 rounded",children:JSON.stringify(i.schedule,null,2)}):(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"No schedule configured"})]}),i.last_error&&(0,b.jsxs)("div",{className:"mt-4 text-sm text-rose-600",children:["Last error: ",i.last_error]}),(0,b.jsxs)("div",{className:"mt-6 flex gap-2",children:[(0,b.jsx)("button",{onClick:async()=>{try{if(!i?.id)return;let a=await fetch(`/api/v1/integrations/${i.id}/sync`,{method:"POST"}),b=await a.json().catch(()=>null);if(!a.ok||!b?.ok)return void n.error(b?.error??"Failed to start sync");n.success("Sync queued")}catch(a){n.error(String(a?.message??a))}},className:"px-4 py-2 rounded bg-blue-600 text-white",children:"Sync now"}),(0,b.jsx)("a",{href:`/integrations/${i.id}/edit`,className:"px-4 py-2 rounded border text-sm text-gray-700 hover:bg-gray-50",children:"Edit"})]})]}):(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"No integration selected"})]})]}):null}],82722),a.s(["ConfirmDialog",()=>e],12171)},85619,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(82722),e=a.i(12171),f=a.i(69769);let g=({integration:a,onDeleted:g,onSynced:h})=>{let[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),o=(0,f.useToast)();return(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name??a.id}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.provider})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>j(!0),"aria-label":`Open details for ${a.name??a.id}`,className:"px-3 py-1 rounded border text-sm hover:bg-gray-50",children:"Details"}),(0,b.jsx)("button",{onClick:async()=>{n(!0);try{let b=await fetch(`/api/v1/integrations/${a.id}/sync`,{method:"POST"}),c=await b.json();if(!c.ok)throw Error(c.error||"Sync failed");o.success("Sync queued"),h?.(a.id)}catch(a){o.error(String(a?.message??a))}finally{n(!1)}},disabled:m,"aria-label":`Sync now ${a.name??a.id}`,className:"px-3 py-1 rounded bg-blue-600 text-white disabled:opacity-60",children:m?"Syncing…":"Sync"}),(0,b.jsx)("button",{onClick:()=>l(!0),"aria-label":`Delete ${a.name??a.id}`,className:"px-3 py-1 rounded border text-red-600 hover:bg-red-50",children:"Delete"})]}),(0,b.jsx)(d.default,{integrationId:a.id,isOpen:i,onClose:()=>j(!1)}),(0,b.jsx)(e.ConfirmDialog,{open:k,onCancel:()=>l(!1),title:"Delete integration",description:`Delete integration ${a.name??a.id}? This cannot be undone.`,onConfirm:async()=>{l(!1);try{let b=await fetch(`/api/v1/integrations/${a.id}`,{method:"DELETE"}),c=await b.json();if(!c.ok)throw Error(c.error||"Delete failed");o.success("Integration deleted"),g?.(a.id)}catch(a){o.error(String(a?.message??a))}}})]})};function h(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{let a=!0;return f(!0),fetch("/api/v1/integrations").then(a=>a.json()).then(b=>{a&&(b.ok?d(b.integrations??b):Array.isArray(b)&&d(b))}).catch(a=>{console.error("Failed to fetch integrations",a)}).finally(()=>{a&&f(!1)}),()=>{a=!1}},[]),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold mb-4",children:"Integrations"}),e?(0,b.jsx)("p",{children:"Loading…"}):0===a.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No integrations found."}):(0,b.jsx)("div",{className:"space-y-2",children:a.map(a=>(0,b.jsx)(g,{integration:a,onDeleted:a=>d(b=>b.filter(b=>b.id!==a)),onSynced:()=>{}},a.id))})]})}a.s(["default",()=>h],85619)}];

//# sourceMappingURL=src_5998bccf._.js.map