{"version":3,"sources":["../../../../src/components/settings/WebhooksManager.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useState } from \"react\";\n\n/**\n * Webhooks manager UI scaffold:\n * - add endpoint\n * - show last 20 deliveries (fetched from /api/developer/webhooks/logs)\n */\n\ntype Delivery = { id: string; status: string; event: string; received_at: string; response_code?: number };\n\nexport default function WebhooksManager() {\n  const [endpoint, setEndpoint] = useState(\"\");\n  const [logs, setLogs] = useState<Delivery[]>([]);\n  useEffect(() => {\n    fetch(\"/api/developer/webhooks/logs\")\n      .then((r) => r.json())\n      .then((d) => setLogs(d.logs || []))\n      .catch(() => setLogs([]));\n  }, []);\n\n  async function addEndpoint() {\n    await fetch(\"/api/developer/webhooks\", { method: \"POST\", body: JSON.stringify({ url: endpoint }), headers: { \"Content-Type\": \"application/json\" } });\n    setEndpoint(\"\");\n  }\n\n  return (\n    <div style={{ maxWidth: 1000 }}>\n      <div>\n        <label style={{ display: \"block\", fontWeight: 600 }}>Webhook endpoint</label>\n        <input value={endpoint} onChange={(e) => setEndpoint(e.target.value)} style={{ width: \"100%\", padding: 8, marginTop: 8 }} />\n        <button onClick={addEndpoint} style={{ marginTop: 8 }}>\n          Add endpoint\n        </button>\n      </div>\n\n      <div style={{ marginTop: 16 }}>\n        <h4>Recent deliveries</h4>\n        <ul>\n          {logs.map((l) => (\n            <li key={l.id}>\n              {l.event} — {l.status} — {new Date(l.received_at).toLocaleString()} ({l.response_code ?? \"—\"})\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"wDACA,EAAA,EAAA,CAAA,CAAA,OAUe,SAAS,IACtB,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,EAAE,EAQ/C,eAAe,IACb,MAAM,MAAM,0BAA2B,CAAE,OAAQ,OAAQ,KAAM,KAAK,SAAS,CAAC,CAAE,IAAK,CAAS,GAAI,QAAS,CAAE,eAAgB,kBAAmB,CAAE,GAClJ,EAAY,GACd,CAEA,MAZA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,MAAM,gCACH,IAAI,CAAE,AAAD,GAAO,EAAE,IAAI,IAClB,IAAI,CAAC,AAAC,GAAM,EAAQ,EAAE,IAAI,EAAI,EAAE,GAChC,KAAK,CAAC,IAAM,EAAQ,EAAE,EAC3B,EAAG,EAAE,EAQH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,GAAK,YAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,MAAO,CAAE,QAAS,QAAS,WAAY,GAAI,WAAG,qBACrD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,MAAO,EAAU,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAAG,MAAO,CAAE,MAAO,OAAQ,QAAS,EAAG,UAAW,CAAE,IACvH,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,EAAa,MAAO,CAAE,UAAW,CAAE,WAAG,oBAKzD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,UAAW,EAAG,YAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,sBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACE,EAAK,GAAG,CAAC,AAAC,GACT,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACE,EAAE,KAAK,CAAC,MAAI,EAAE,MAAM,CAAC,MAAI,IAAI,KAAK,EAAE,WAAW,EAAE,cAAc,GAAG,KAAG,EAAE,aAAa,EAAI,IAAI,MADtF,EAAE,EAAE,UAQzB"}