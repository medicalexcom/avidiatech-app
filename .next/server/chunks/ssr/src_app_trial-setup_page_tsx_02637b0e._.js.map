{"version":3,"sources":["../../../../src/app/trial-setup/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\nimport { useRouter } from \"next/navigation\";\n\nexport default function TrialSetupPage() {\n  const { isLoaded, isSignedIn } = useUser();\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [plan, setPlan] = useState<\"starter\" | \"growth\" | \"pro\">(\"starter\");\n\n  async function startCheckout() {\n    if (!isLoaded) return;\n    if (!isSignedIn) {\n      router.push(`/sign-in?redirect=/trial-setup`);\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(\"/api/checkout/session\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ plan }),\n      });\n      const data = await res.json();\n      if (!res.ok || !data?.url) throw new Error(data?.error || \"Failed to create checkout session\");\n      window.location.href = data.url;\n    } catch (err: any) {\n      setError(err.message || \"Unknown error\");\n      console.error(\"startCheckout error\", err);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  if (!isLoaded) return null;\n\n  return (\n    <main className=\"min-h-screen flex items-center justify-center\">\n      <div className=\"max-w-md w-full p-8 bg-white rounded shadow\">\n        <h1 className=\"text-xl font-semibold\">Start trial</h1>\n        <p className=\"mt-2 text-sm text-slate-600\">Start your free trial â€” complete subscription to unlock premium features.</p>\n\n        {error && <div className=\"mt-4 text-red-600\">{error}</div>}\n\n        {!isSignedIn ? (\n          <div className=\"mt-6\">\n            <p className=\"text-sm\">You must sign in to start a trial.</p>\n            <button\n              className=\"btn-primary mt-2\"\n              onClick={() => router.push(`/sign-in?redirect=/trial-setup`)}\n              disabled={!isLoaded}\n            >\n              Sign in / Sign up\n            </button>\n          </div>\n        ) : (\n          <>\n            <div className=\"mt-4\">\n              <label className=\"block text-sm\">Choose plan</label>\n              <select value={plan} onChange={(e) => setPlan(e.target.value as any)} className=\"mt-2\">\n                <option value=\"starter\">Starter</option>\n                <option value=\"growth\">Growth</option>\n                <option value=\"pro\">Pro</option>\n              </select>\n            </div>\n\n            <div className=\"mt-6\">\n              <button onClick={startCheckout} disabled={loading} className=\"btn-primary\">\n                {loading ? \"Starting...\" : \"Start free trial\"}\n              </button>\n            </div>\n          </>\n        )}\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,GAAM,UAAE,CAAQ,YAAE,CAAU,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClC,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA+B,WAE/D,eAAe,IACb,GAAK,CAAD,EACJ,GAAI,CAAC,EAAY,CADF,WAEb,EAAO,IAAI,CAAC,CAAC,8BAA8B,CAAC,EAG9C,GAAW,GACX,EAAS,MACT,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,wBAAyB,CAC/C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,MAAE,CAAK,EAC9B,GACM,EAAO,MAAM,EAAI,IAAI,GAC3B,GAAI,CAAC,EAAI,EAAE,EAAI,CAAC,GAAM,IAAK,MAAM,AAAI,MAAM,GAAM,OAAS,qCAC1D,OAAO,QAAQ,CAAC,IAAI,CAAG,EAAK,GAAG,AACjC,CAAE,MAAO,EAAU,CACjB,EAAS,EAAI,OAAO,EAAI,iBACxB,QAAQ,KAAK,CAAC,sBAAuB,EACvC,QAAU,CACR,GAAW,EACb,EACF,QAEA,AAAK,EAGH,CAAA,CAHE,CAGF,EAAA,GAAA,AAHa,EAGZ,OAAA,CAAK,UAAU,yDACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,gBACtC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCAA8B,8EAE1C,GAAS,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BAAqB,IAE7C,AAAC,EAYA,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,yBAAgB,gBACjC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,MAAO,EAAM,SAAU,AAAC,GAAM,EAAQ,EAAE,MAAM,CAAC,KAAK,EAAU,UAAU,iBAC9E,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,mBAAU,YACxB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,kBAAS,WACvB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,eAAM,cAIxB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,EAAe,SAAU,EAAS,UAAU,uBAC1D,EAAU,cAAgB,0BAvBjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAU,uCACvB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,mBACV,QAAS,IAAM,EAAO,IAAI,CAAC,CAAC,8BAA8B,CAAC,EAC3D,SAAU,CAAC,WACZ,8BAjBW,IA0CxB"}