{"version":3,"sources":["../../../../src/app/dashboard/pricing/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\nimport { useRouter } from \"next/navigation\";\n\nexport default function PricingPage() {\n  const { isLoaded, isSignedIn } = useUser();\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function choosePlan(plan: \"starter\" | \"growth\" | \"pro\") {\n    if (!isLoaded) return;\n    if (!isSignedIn) {\n      router.push(`/sign-in?redirect=/dashboard`);\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(\"/api/checkout/session\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ plan }),\n      });\n      const data = await res.json();\n      if (!res.ok || !data?.url) throw new Error(data?.error || \"Failed to create checkout session\");\n      window.location.href = data.url;\n    } catch (err: any) {\n      setError(err.message || \"Unknown error\");\n      console.error(\"choosePlan error\", err);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  if (!isLoaded) return null;\n\n  return (\n    <div className=\"p-6\">\n      <h2 className=\"text-2xl font-semibold\">Choose a plan</h2>\n      {error && <div className=\"mt-4 text-red-600\">{error}</div>}\n\n      {!isSignedIn ? (\n        <div className=\"mt-4\">\n          <p className=\"mb-2\">Sign in to pick a plan.</p>\n          <button className=\"btn-primary\" onClick={() => router.push(`/sign-in?redirect=/dashboard`)} disabled={!isLoaded}>\n            Sign in / Sign up\n          </button>\n        </div>\n      ) : (\n        <div className=\"mt-4 flex gap-4\">\n          <button className=\"btn\" onClick={() => choosePlan(\"starter\")} disabled={loading}>\n            {loading ? \"...\" : \"Start Starter — 14‑day trial\"}\n          </button>\n          <button className=\"btn\" onClick={() => choosePlan(\"growth\")} disabled={loading}>\n            Start Growth — 14‑day trial\n          </button>\n          <button className=\"btn\" onClick={() => choosePlan(\"pro\")} disabled={loading}>\n            Start Pro — 14‑day trial\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,GAAM,UAAE,CAAQ,YAAE,CAAU,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClC,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAElD,eAAe,EAAW,CAAkC,EAC1D,GAAK,CAAD,EACJ,GAAI,CAAC,EAAY,CADF,WAEb,EAAO,IAAI,CAAC,CAAC,4BAA4B,CAAC,EAG5C,GAAW,GACX,EAAS,MACT,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,wBAAyB,CAC/C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,MAAE,CAAK,EAC9B,GACM,EAAO,MAAM,EAAI,IAAI,GAC3B,GAAI,CAAC,EAAI,EAAE,EAAI,CAAC,GAAM,IAAK,MAAM,AAAI,MAAM,GAAM,OAAS,qCAC1D,OAAO,QAAQ,CAAC,IAAI,CAAG,EAAK,GAAG,AACjC,CAAE,MAAO,EAAU,CACjB,EAAS,EAAI,OAAO,EAAI,iBACxB,QAAQ,KAAK,CAAC,mBAAoB,EACpC,QAAU,CACR,GAAW,EACb,EACF,QAEA,AAAK,EAGH,CAAA,CAHE,CAGF,EAAA,GAHa,CAGb,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kCAAyB,kBACtC,GAAS,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BAAqB,IAE7C,AAAC,EAQA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,MAAM,QAAS,IAAM,EAAW,WAAY,SAAU,WACrE,EAAU,MAAQ,iCAErB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,MAAM,QAAS,IAAM,EAAW,UAAW,SAAU,WAAS,gCAGhF,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,MAAM,QAAS,IAAM,EAAW,OAAQ,SAAU,WAAS,gCAd/E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gBAAO,4BACpB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,cAAc,QAAS,IAAM,EAAO,IAAI,CAAC,CAAC,4BAA4B,CAAC,EAAG,SAAU,CAAC,WAAU,4BAVnG,IA6BxB"}