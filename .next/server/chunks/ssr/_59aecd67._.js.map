{"version":3,"sources":["../../../../src/components/imports/ImportUploader.tsx","../../../../src/components/imports/MappingModal.tsx","../../../../src/app/imports/new/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { createClient } from \"@supabase/supabase-js\";\nimport MappingModal from \"@/components/imports/MappingModal\";\n\ntype Props = {\n  bucket?: string;\n  maxRows?: number;\n  maxCols?: number;\n  onCreated?: (jobId: string) => void;\n  className?: string;\n  platform?: string;\n};\n\nconst SUPA_URL = process.env.NEXT_PUBLIC_SUPABASE_URL || \"\";\nconst SUPA_ANON = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \"\";\nconst supa = SUPA_URL && SUPA_ANON ? createClient(SUPA_URL, SUPA_ANON) : null;\n\nexport default function ImportUploader({ bucket = \"imports\", maxRows = 5000, maxCols = 50, onCreated, className, platform }: Props) {\n  const [file, setFile] = useState<File | null>(null);\n  const [headers, setHeaders] = useState<string[]>([]);\n  const [previewRows, setPreviewRows] = useState<any[]>([]);\n  const [loadingPreview, setLoadingPreview] = useState(false);\n  const [previewError, setPreviewError] = useState<string | null>(null);\n  const [uploading, setUploading] = useState(false);\n\n  // Mapping modal\n  const [mappingOpen, setMappingOpen] = useState(false);\n  const [mapping, setMapping] = useState<Record<string, string> | null>(null);\n\n  async function readPreview(f: File) {\n    setPreviewError(null);\n    setLoadingPreview(true);\n    setHeaders([]);\n    setPreviewRows([]);\n    setMapping(null);\n\n    try {\n      const ext = f.name.split(\".\").pop()?.toLowerCase();\n      if (ext === \"csv\" || ext === \"txt\") {\n        const PapaMod = await import(\"papaparse\");\n        const Papa = (PapaMod && (PapaMod.default ?? PapaMod)) as any;\n        await new Promise<void>((resolve, reject) => {\n          Papa.parse(f, {\n            header: true,\n            preview: 50,\n            skipEmptyLines: true,\n            complete: (res: any) => {\n              setHeaders(res.meta?.fields ?? []);\n              setPreviewRows(res.data ?? []);\n              resolve();\n            },\n            error: (err: any) => reject(err),\n          });\n        });\n      } else {\n        const XLSX = (await import(\"xlsx\")) as any;\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          try {\n            const ab = e.target?.result as ArrayBuffer;\n            const wb = XLSX.read(ab, { type: \"array\" });\n            const rows = XLSX.utils.sheet_to_json(wb.Sheets[wb.SheetNames[0]], { defval: \"\" }) as any[];\n            setHeaders(rows.length ? Object.keys(rows[0]) : []);\n            setPreviewRows(rows.slice(0, 50));\n          } catch (err: any) {\n            setPreviewError(err?.message ?? String(err));\n          } finally {\n            setLoadingPreview(false);\n          }\n        };\n        reader.onerror = () => {\n          setPreviewError(\"Failed to read file for preview\");\n          setLoadingPreview(false);\n        };\n        reader.readAsArrayBuffer(f);\n        return;\n      }\n    } catch (err: any) {\n      setPreviewError(err?.message ?? String(err));\n    } finally {\n      setLoadingPreview(false);\n    }\n  }\n\n  async function handleUpload() {\n    setPreviewError(null);\n    if (!file) {\n      setPreviewError(\"No file selected\");\n      return;\n    }\n    if (!supa) {\n      setPreviewError(\"Supabase client not configured (missing env vars)\");\n      return;\n    }\n    if (headers.length > maxCols) {\n      setPreviewError(`Too many columns (max ${maxCols}). Please reduce columns.`);\n      return;\n    }\n\n    setUploading(true);\n    try {\n      const storagePath = `${Date.now()}-${file.name}`;\n      const { error: uploadError } = await supa.storage.from(bucket).upload(storagePath, file, { upsert: false });\n      if (uploadError) {\n        setPreviewError(`Upload failed: ${uploadError.message}`);\n        return;\n      }\n\n      const bodyObj: any = {\n        file_path: `${bucket}/${storagePath}`,\n        file_name: file.name,\n        file_format: file.name.split(\".\").pop()?.toLowerCase(),\n        mapping: mapping ?? null,\n        platform: platform ?? null,\n      };\n\n      const res = await fetch(\"/api/imports\", {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify(bodyObj),\n      });\n\n      const json = await res.json().catch(() => null);\n      if (!res.ok || !json?.ok) {\n        setPreviewError(json?.error ?? `Create import job failed: ${res.status}`);\n        return;\n      }\n\n      const jobId = json.jobId ?? json.id ?? null;\n      onCreated?.(jobId ?? \"\");\n    } catch (err: any) {\n      setPreviewError(String(err?.message || err));\n    } finally {\n      setUploading(false);\n    }\n  }\n\n  return (\n    <div className={className}>\n      <div>\n        <input\n          type=\"file\"\n          accept=\".csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n          onChange={(e) => {\n            const f = e.target.files?.[0] ?? null;\n            setFile(f);\n            if (f) readPreview(f);\n          }}\n        />\n      </div>\n\n      {loadingPreview && <div className=\"mt-3 text-sm\">Loading preview…</div>}\n      {previewError && <div className=\"mt-3 text-sm text-rose-700\">{previewError}</div>}\n\n      {headers.length > 0 && (\n        <div className=\"mt-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-xs text-slate-500\">Preview headers</div>\n            <div>\n              <button onClick={() => setMappingOpen(true)} className=\"text-xs px-2 py-1 border rounded mr-2\">Open mapping</button>\n              <button onClick={() => { setHeaders([]); setPreviewRows([]); setFile(null); setMapping(null); }} className=\"text-xs px-2 py-1 border rounded\">Clear</button>\n            </div>\n          </div>\n\n          <pre className=\"mt-2 text-xs overflow-auto bg-slate-50 p-2 rounded\">{JSON.stringify(headers)}</pre>\n\n          <div className=\"mt-3 text-xs text-slate-500\">Preview rows</div>\n          <pre className=\"mt-2 text-xs overflow-auto bg-slate-50 p-2 rounded\">{JSON.stringify(previewRows.slice(0, 5), null, 2)}</pre>\n\n          <div className=\"mt-4 flex gap-2\">\n            <button onClick={handleUpload} disabled={uploading} className=\"inline-flex items-center rounded px-3 py-2 bg-slate-900 text-white text-sm disabled:opacity-60\">\n              {uploading ? \"Uploading…\" : \"Upload & Create Import\"}\n            </button>\n          </div>\n        </div>\n      )}\n\n      <MappingModal\n        open={mappingOpen}\n        headers={headers}\n        initialMapping={mapping ?? {}}\n        onSave={(m) => { setMapping(m); setMappingOpen(false); }}\n        onClose={() => setMappingOpen(false)}\n      />\n    </div>\n  );\n}\n","\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\n\ntype MappingModalProps = {\n  open: boolean;\n  headers: string[];\n  initialMapping?: Record<string, string>;\n  onSave: (mapping: Record<string, string>) => void;\n  onClose: () => void;\n};\n\nconst TARGET_FIELDS = [\n  \"\",\n  \"sku\",\n  \"title\",\n  \"description\",\n  \"price\",\n  \"inventory\",\n  \"weight\",\n  \"brand\",\n  \"image\",\n  \"category\",\n];\n\nexport default function MappingModal({ open, headers, initialMapping = {}, onSave, onClose }: MappingModalProps) {\n  const [mapping, setMapping] = useState<Record<string, string>>({});\n\n  useEffect(() => {\n    // initialize auto-mapping heuristics\n    const m: Record<string, string> = {};\n    for (const h of headers) {\n      if (initialMapping[h]) {\n        m[h] = initialMapping[h];\n        continue;\n      }\n      const k = h.toLowerCase();\n      if (k.includes(\"sku\")) m[h] = \"sku\";\n      else if (k.includes(\"title\") || k.includes(\"name\")) m[h] = \"title\";\n      else if (k.includes(\"desc\")) m[h] = \"description\";\n      else if (k.includes(\"price\")) m[h] = \"price\";\n      else if (k.includes(\"qty\") || k.includes(\"inventory\") || k.includes(\"stock\")) m[h] = \"inventory\";\n      else m[h] = \"\";\n    }\n    setMapping(m);\n  }, [headers, initialMapping]);\n\n  function update(h: string, v: string) {\n    setMapping((s) => ({ ...s, [h]: v }));\n  }\n\n  if (!open) return null;\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4\">\n      <div className=\"w-full max-w-3xl rounded-lg bg-white p-4\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold\">Map source columns to product fields</h3>\n          <button onClick={onClose} className=\"px-2 py-1 text-sm\">Close</button>\n        </div>\n\n        <div className=\"mt-3 max-h-[60vh] overflow-auto\">\n          <table className=\"w-full table-auto\">\n            <thead>\n              <tr>\n                <th className=\"text-left text-xs text-slate-500 pb-2\">Source column</th>\n                <th className=\"text-left text-xs text-slate-500 pb-2\">Map to field</th>\n              </tr>\n            </thead>\n            <tbody>\n              {headers.map((h) => (\n                <tr key={h}>\n                  <td className=\"py-2 text-sm\">{h}</td>\n                  <td className=\"py-2\">\n                    <select value={mapping[h] ?? \"\"} onChange={(e) => update(h, e.target.value)} className=\"rounded border px-2 py-1 text-sm\">\n                      {TARGET_FIELDS.map((f) => (\n                        <option key={f} value={f}>{f === \"\" ? \"-- ignore --\" : f}</option>\n                      ))}\n                    </select>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        <div className=\"mt-4 flex items-center justify-end gap-2\">\n          <button onClick={() => { onSave(mapping); }} className=\"px-3 py-2 rounded bg-emerald-500 text-white\">Save mapping</button>\n          <button onClick={onClose} className=\"px-3 py-2 rounded border\">Cancel</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport React from \"react\";\nimport ImportUploader from \"@/components/imports/ImportUploader\";\n\n/**\n * /imports/new\n * Minimal page that renders only the canonical ImportUploader component so users can upload CSV/XLSX\n * and create an import job.\n */\n\nexport default function NewImportPage() {\n  return (\n    <main className=\"flex min-h-screen items-center justify-center bg-gray-50 px-4 py-12\">\n      <div className=\"w-full max-w-xl\">\n        <div className=\"rounded-lg bg-white p-6 shadow-sm\">\n          <h1 className=\"text-xl font-semibold mb-3\">Create import</h1>\n          <p className=\"text-sm text-slate-500 mb-4\">\n            Upload a CSV or Excel file. Max rows: 5000, Max columns: 50.\n          </p>\n\n          <ImportUploader\n            bucket=\"imports\"\n            onCreated={(jobId) => {\n              // optional: navigate to job page or show toast\n              if (jobId) {\n                // prefer to use the ingestion/job id as the canonical ingestion id\n                window.location.href = `/imports/${jobId}`;\n              } else {\n                // fallback: reload\n                window.location.reload();\n              }\n            }}\n          />\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}